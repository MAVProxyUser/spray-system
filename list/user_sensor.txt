; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\output\user_sensor.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\output\user_sensor.d --cpu=Cortex-M3 --apcs=interwork -O0 --diag_suppress=9931 -I.\cstartup -I.\drivers\uart -I.\app\cfg -I.\iap -I.\drivers -I.\usb -I.\drivers\adc -I.\drivers\gpio -I.\drivers -I.\RTE\_lpc17xx_can_loader_debug -IC:\Keil_v5\ARM\PACK\Keil\LPC1700_DFP\2.3.0\Device\Include -IC:\Keil_v5\ARM\CMSIS\Include -D__UVISION_VERSION=523 -DLPC175x_6x -D__DEBUG_UART2_PRINTF__ -D__UART0__ -D__UART1__ -D__UART2__ -D__UART3__ -D__UART2_ENABLE__ -D__UART3_ENABLE__ -D__UART0_ENABLE__ -D__UART1_ENABLE__ --omf_browse=.\output\user_sensor.crf drivers\user_sensor.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  get_capacity_flag_1L PROC
;;;22      
;;;23     uint8_t get_capacity_flag_1L(void)
000000  48f7              LDR      r0,|L1.992|
;;;24     {
;;;25       return capacity_flag_1L;
000002  7800              LDRB     r0,[r0,#0]  ; capacity_flag_1L
;;;26     }
000004  4770              BX       lr
;;;27     
                          ENDP

                  level_sensor_init PROC
;;;28     void level_sensor_init(void)
000006  48f7              LDR      r0,|L1.996|
;;;29     {
;;;30       LPC_GPIO1->FIODIR  &= (~(1<<31));// P1_31 为输入 resaved0
000008  6a00              LDR      r0,[r0,#0x20]
00000a  f0204000          BIC      r0,r0,#0x80000000
00000e  49f5              LDR      r1,|L1.996|
000010  6208              STR      r0,[r1,#0x20]
;;;31     }
000012  4770              BX       lr
;;;32     
                          ENDP

                  level_data_process PROC
;;;33     uint16_t level_count;
;;;34     void level_data_process(void)
000014  b510              PUSH     {r4,lr}
;;;35     {
;;;36       if(get_level_status_by_radar() == 1)
000016  f7fffffe          BL       get_level_status_by_radar
00001a  2801              CMP      r0,#1
00001c  d103              BNE      |L1.38|
;;;37     	 level_stauts = 0;
00001e  2000              MOVS     r0,#0
000020  49f1              LDR      r1,|L1.1000|
000022  7008              STRB     r0,[r1,#0]
000024  e002              B        |L1.44|
                  |L1.38|
;;;38     	else
;;;39        level_stauts = 1;
000026  2001              MOVS     r0,#1
000028  49ef              LDR      r1,|L1.1000|
00002a  7008              STRB     r0,[r1,#0]
                  |L1.44|
;;;40     	
;;;41     	if(level_stauts == 1)
00002c  48ee              LDR      r0,|L1.1000|
00002e  7800              LDRB     r0,[r0,#0]  ; level_stauts
000030  2801              CMP      r0,#1
000032  d110              BNE      |L1.86|
;;;42     	{
;;;43     	   level_count++;
000034  48ed              LDR      r0,|L1.1004|
000036  8800              LDRH     r0,[r0,#0]  ; level_count
000038  1c40              ADDS     r0,r0,#1
00003a  49ec              LDR      r1,|L1.1004|
00003c  8008              STRH     r0,[r1,#0]
;;;44     		 if(level_count >= 400)//4S
00003e  4608              MOV      r0,r1
000040  8800              LDRH     r0,[r0,#0]  ; level_count
000042  f5b07fc8          CMP      r0,#0x190
000046  db0b              BLT      |L1.96|
;;;45     		 {
;;;46     			  level_count = 400;
000048  f44f70c8          MOV      r0,#0x190
00004c  8008              STRH     r0,[r1,#0]
;;;47     			  capacity_flag_1L = 1;
00004e  2001              MOVS     r0,#1
000050  49e3              LDR      r1,|L1.992|
000052  7008              STRB     r0,[r1,#0]
000054  e004              B        |L1.96|
                  |L1.86|
;;;48     		 }
;;;49     	}
;;;50     	else
;;;51     	{
;;;52     	  level_count = 0;
000056  2000              MOVS     r0,#0
000058  49e4              LDR      r1,|L1.1004|
00005a  8008              STRH     r0,[r1,#0]
;;;53     		capacity_flag_1L = 0;
00005c  49e0              LDR      r1,|L1.992|
00005e  7008              STRB     r0,[r1,#0]
                  |L1.96|
;;;54     	}
;;;55     }
000060  bd10              POP      {r4,pc}
;;;56     
                          ENDP

                  get_temperature PROC
;;;58     /************************************温度传感器数据处理*************************************************************/
;;;59     float get_temperature(uint16_t tempe_sensor_value)
000062  e92d47f0          PUSH     {r4-r10,lr}
;;;60     {
000066  4604              MOV      r4,r0
;;;61       float tempe;
;;;62     	tempe = (1035 - tempe_sensor_value)/5.5;
000068  f240410b          MOV      r1,#0x40b
00006c  1b08              SUBS     r0,r1,r4
00006e  f7fffffe          BL       __aeabi_i2d
000072  4607              MOV      r7,r0
000074  2200              MOVS     r2,#0
000076  4bde              LDR      r3,|L1.1008|
000078  f7fffffe          BL       __aeabi_ddiv
00007c  4605              MOV      r5,r0
00007e  f7fffffe          BL       __aeabi_d2f
000082  4681              MOV      r9,r0
;;;63       return tempe;
000084  4648              MOV      r0,r9
;;;64     }																	
000086  e8bd87f0          POP      {r4-r10,pc}
;;;65     
                          ENDP

                  K_Coefficient_Compensation PROC
;;;81     float Viscosity_Offset = 0,K_offset = 0;
;;;82     float K_Coefficient_Compensation(void) // 流量计K值系数补偿
00008a  e92d5ff0          PUSH     {r4-r12,lr}
;;;83     {
;;;84     
;;;85     // vk04  标定流量  0.9L/min---1.2L/min      粘度差补偿系数               清水K值 0.5 
;;;86     // 11001 标定流量  1.4L/min---1.8L/min      粘度差补偿系数  0.5
;;;87     // vk08 标定流量   1.95L/min---2.2L/min     粘度差补偿系数  0.8
;;;88     // 与标定频率的脉冲差 表示流速变化
;;;89     // 即最终公式为  脉冲频率*K(1+粘度差*0.5*(标定频率 - 实时频率))
;;;90     
;;;91          if((Volume_Each_Pulse) - Reference_K > 0)
00008e  48d9              LDR      r0,|L1.1012|
000090  6800              LDR      r0,[r0,#0]  ; Volume_Each_Pulse
000092  f7fffffe          BL       __aeabi_f2d
000096  4606              MOV      r6,r0
000098  4ad7              LDR      r2,|L1.1016|
00009a  4bd8              LDR      r3,|L1.1020|
00009c  f7fffffe          BL       __aeabi_dsub
0000a0  4604              MOV      r4,r0
0000a2  2200              MOVS     r2,#0
0000a4  4613              MOV      r3,r2
0000a6  f7fffffe          BL       __aeabi_cdrcmple
0000aa  d219              BCS      |L1.224|
;;;92     		 {			 
;;;93     				// 判断为粘稠液体  减去偏移值
;;;94     				Viscosity_Offset  =	((Volume_Each_Pulse) - Reference_K)*Viscosity_Offset_Coeff;
0000ac  48d4              LDR      r0,|L1.1024|
0000ae  6800              LDR      r0,[r0,#0]  ; Viscosity_Offset_Coeff
0000b0  f7fffffe          BL       __aeabi_f2d
0000b4  4682              MOV      r10,r0
0000b6  468b              MOV      r11,r1
0000b8  48ce              LDR      r0,|L1.1012|
0000ba  6800              LDR      r0,[r0,#0]  ; Volume_Each_Pulse
0000bc  f7fffffe          BL       __aeabi_f2d
0000c0  4680              MOV      r8,r0
0000c2  4acd              LDR      r2,|L1.1016|
0000c4  4bcd              LDR      r3,|L1.1020|
0000c6  f7fffffe          BL       __aeabi_dsub
0000ca  4606              MOV      r6,r0
0000cc  4652              MOV      r2,r10
0000ce  465b              MOV      r3,r11
0000d0  f7fffffe          BL       __aeabi_dmul
0000d4  4604              MOV      r4,r0
0000d6  f7fffffe          BL       __aeabi_d2f
0000da  49ca              LDR      r1,|L1.1028|
0000dc  6008              STR      r0,[r1,#0]  ; Viscosity_Offset
0000de  e002              B        |L1.230|
                  |L1.224|
;;;95     		 }
;;;96     		 else
;;;97     		 {
;;;98     		   Viscosity_Offset = 0; // 判断为清水
0000e0  2000              MOVS     r0,#0
0000e2  49c8              LDR      r1,|L1.1028|
0000e4  6008              STR      r0,[r1,#0]  ; Viscosity_Offset
                  |L1.230|
;;;99     		 }
;;;100    //	}
;;;101    	
;;;102    	
;;;103    	if(get_cali_flow_freq() > 5)// && get_foc_throttle_value(FOC_1) > MIN_CNT && get_foc_throttle_value(FOC_2) > MIN_CNT
0000e6  f7fffffe          BL       get_cali_flow_freq
0000ea  2805              CMP      r0,#5
0000ec  dd13              BLE      |L1.278|
;;;104    	{
;;;105    		K_offset = Viscosity_Offset*(Cali_Freq - get_cali_flow_freq()); 
0000ee  f7fffffe          BL       get_cali_flow_freq
0000f2  4606              MOV      r6,r0
0000f4  f7fffffe          BL       __aeabi_ui2f
0000f8  4605              MOV      r5,r0
0000fa  48c3              LDR      r0,|L1.1032|
0000fc  6801              LDR      r1,[r0,#0]  ; Cali_Freq
0000fe  4628              MOV      r0,r5
000100  f7fffffe          BL       __aeabi_frsub
000104  4604              MOV      r4,r0
000106  48bf              LDR      r0,|L1.1028|
000108  6801              LDR      r1,[r0,#0]  ; Viscosity_Offset
00010a  4620              MOV      r0,r4
00010c  f7fffffe          BL       __aeabi_fmul
000110  49be              LDR      r1,|L1.1036|
000112  6008              STR      r0,[r1,#0]  ; K_offset
000114  e002              B        |L1.284|
                  |L1.278|
;;;106    	}
;;;107    	else
;;;108    	{
;;;109    	  K_offset = 0;
000116  2000              MOVS     r0,#0
000118  49bc              LDR      r1,|L1.1036|
00011a  6008              STR      r0,[r1,#0]  ; K_offset
                  |L1.284|
;;;110    	}
;;;111    	
;;;112    	return K_offset;
00011c  48bb              LDR      r0,|L1.1036|
00011e  6800              LDR      r0,[r0,#0]  ; K_offset
;;;113    }
000120  e8bd9ff0          POP      {r4-r12,pc}
;;;114    
                          ENDP

                  get_current_capacity_d PROC
;;;115    
;;;116    uint16_t get_current_capacity_d(void)
000124  b510              PUSH     {r4,lr}
;;;117    {
;;;118    	if(current_capacity_part > 25500)//16位 计数加大 会触发单字节溢出
000126  49ba              LDR      r1,|L1.1040|
000128  48ba              LDR      r0,|L1.1044|
00012a  6800              LDR      r0,[r0,#0]  ; current_capacity_part
00012c  f7fffffe          BL       __aeabi_cfrcmple
000130  d202              BCS      |L1.312|
;;;119    	 	current_capacity_part = 25500;
000132  48b7              LDR      r0,|L1.1040|
000134  49b7              LDR      r1,|L1.1044|
000136  6008              STR      r0,[r1,#0]  ; current_capacity_part
                  |L1.312|
;;;120    	
;;;121    	current_capacity_total = current_capacity_part; 
000138  48b6              LDR      r0,|L1.1044|
00013a  6800              LDR      r0,[r0,#0]  ; current_capacity_part
00013c  f7fffffe          BL       __aeabi_f2uiz
000140  49b5              LDR      r1,|L1.1048|
000142  8008              STRH     r0,[r1,#0]
;;;122      return current_capacity_total;
000144  4608              MOV      r0,r1
000146  8800              LDRH     r0,[r0,#0]  ; current_capacity_total
;;;123    }
000148  bd10              POP      {r4,pc}
;;;124    
                          ENDP

                  Set_Volume_Each_Pulse PROC
;;;125    
;;;126    void Set_Volume_Each_Pulse(float value)
00014a  49aa              LDR      r1,|L1.1012|
;;;127    {
;;;128      Volume_Each_Pulse = value ; // + 0.03; // 为了防止误差导致药量不够用
00014c  6008              STR      r0,[r1,#0]  ; Volume_Each_Pulse
;;;129    }
00014e  4770              BX       lr
;;;130    
                          ENDP

                  capacity_by_flow_sensor PROC
;;;131    void capacity_by_flow_sensor(void)// 只能有一个地方运行
000150  e92d41f0          PUSH     {r4-r8,lr}
;;;132    {	
;;;133    		if(get_cali_flow_freq() > 5) // 暂时处理方式 小于这个频率默认为0
000154  f7fffffe          BL       get_cali_flow_freq
000158  2805              CMP      r0,#5
00015a  dd2a              BLE      |L1.434|
;;;134    		{
;;;135    			 debug_watch_k_value = Volume_Each_Pulse+K_Coefficient_Compensation();
00015c  f7fffffe          BL       K_Coefficient_Compensation
000160  4604              MOV      r4,r0
000162  48a4              LDR      r0,|L1.1012|
000164  6801              LDR      r1,[r0,#0]  ; Volume_Each_Pulse
000166  4620              MOV      r0,r4
000168  f7fffffe          BL       __aeabi_fadd
00016c  49ab              LDR      r1,|L1.1052|
00016e  6008              STR      r0,[r1,#0]  ; debug_watch_k_value
;;;136    			 flow_compute = get_cali_flow_freq()*Volume_Each_Pulse*(1+K_Coefficient_Compensation()); // 每秒多少ml
000170  f7fffffe          BL       K_Coefficient_Compensation
000174  4606              MOV      r6,r0
000176  f04f517e          MOV      r1,#0x3f800000
00017a  f7fffffe          BL       __aeabi_fadd
00017e  4604              MOV      r4,r0
000180  f7fffffe          BL       get_cali_flow_freq
000184  4607              MOV      r7,r0
000186  f7fffffe          BL       __aeabi_ui2f
00018a  4606              MOV      r6,r0
00018c  4899              LDR      r0,|L1.1012|
00018e  6801              LDR      r1,[r0,#0]  ; Volume_Each_Pulse
000190  4630              MOV      r0,r6
000192  f7fffffe          BL       __aeabi_fmul
000196  4605              MOV      r5,r0
000198  4621              MOV      r1,r4
00019a  f7fffffe          BL       __aeabi_fmul
00019e  49a0              LDR      r1,|L1.1056|
0001a0  6008              STR      r0,[r1,#0]  ; flow_compute
;;;137    			 current_capacity_part += flow_compute; 
0001a2  4608              MOV      r0,r1
0001a4  6801              LDR      r1,[r0,#0]  ; flow_compute
0001a6  489b              LDR      r0,|L1.1044|
0001a8  6800              LDR      r0,[r0,#0]  ; current_capacity_part
0001aa  f7fffffe          BL       __aeabi_fadd
0001ae  4999              LDR      r1,|L1.1044|
0001b0  6008              STR      r0,[r1,#0]  ; current_capacity_part
                  |L1.434|
;;;138    		}
;;;139    }
0001b2  e8bd81f0          POP      {r4-r8,pc}
;;;140    
                          ENDP

                  MedFilter PROC
;;;147    #define N 51
;;;148    uint16_t MedFilter(uint16_t *Value_buf)
0001b6  b530              PUSH     {r4,r5,lr}
;;;149    {
0001b8  4601              MOV      r1,r0
;;;150    	uint16_t temp=0;
0001ba  2400              MOVS     r4,#0
;;;151    	uint8_t i,j; 
;;;152    	for (j=0;j<N-1;j++) 
0001bc  2300              MOVS     r3,#0
0001be  e01a              B        |L1.502|
                  |L1.448|
;;;153    	{ 
;;;154    		for (i=0;i<N-j;i++) 
0001c0  2200              MOVS     r2,#0
0001c2  e012              B        |L1.490|
                  |L1.452|
;;;155    	  {    
;;;156    			if ( Value_buf[i]>Value_buf[i+1] )
0001c4  f8315012          LDRH     r5,[r1,r2,LSL #1]
0001c8  1c50              ADDS     r0,r2,#1
0001ca  f8310010          LDRH     r0,[r1,r0,LSL #1]
0001ce  4285              CMP      r5,r0
0001d0  dd09              BLE      |L1.486|
;;;157    		  {        
;;;158    				temp = Value_buf[i]; 
0001d2  f8314012          LDRH     r4,[r1,r2,LSL #1]
;;;159    				Value_buf[i] = Value_buf[i+1]; 
0001d6  1c50              ADDS     r0,r2,#1
0001d8  f8310010          LDRH     r0,[r1,r0,LSL #1]
0001dc  f8210012          STRH     r0,[r1,r2,LSL #1]
;;;160    				Value_buf[i+1] = temp;   
0001e0  1c50              ADDS     r0,r2,#1
0001e2  f8214010          STRH     r4,[r1,r0,LSL #1]
                  |L1.486|
0001e6  1c50              ADDS     r0,r2,#1              ;154
0001e8  b2c2              UXTB     r2,r0                 ;154
                  |L1.490|
0001ea  f1c30033          RSB      r0,r3,#0x33           ;154
0001ee  4290              CMP      r0,r2                 ;154
0001f0  dce8              BGT      |L1.452|
0001f2  1c58              ADDS     r0,r3,#1              ;152
0001f4  b2c3              UXTB     r3,r0                 ;152
                  |L1.502|
0001f6  2b32              CMP      r3,#0x32              ;152
0001f8  dbe2              BLT      |L1.448|
;;;161    		  } 
;;;162    	  } 
;;;163    	}  
;;;164    	return Value_buf[(N-1)/2];	
0001fa  8e48              LDRH     r0,[r1,#0x32]
;;;165    }
0001fc  bd30              POP      {r4,r5,pc}
;;;166    /*
                          ENDP

                  Get_XT100_State PROC
;;;177    uint8_t XT100_battery_temp_state = State_Normal, XT90_battery_temp_state = State_Normal;
;;;178    uint8_t Get_XT100_State(void)
0001fe  4889              LDR      r0,|L1.1060|
;;;179    {
;;;180    	return XT100_battery_temp_state;
000200  7800              LDRB     r0,[r0,#0]  ; XT100_battery_temp_state
;;;181    }
000202  4770              BX       lr
;;;182    
                          ENDP

                  Get_XT90_State PROC
;;;183    uint8_t Get_XT90_State(void)
000204  4888              LDR      r0,|L1.1064|
;;;184    {
;;;185    	return XT90_battery_temp_state;
000206  7800              LDRB     r0,[r0,#0]  ; XT90_battery_temp_state
;;;186    }
000208  4770              BX       lr
;;;187    uint16_t temp0[51],temp1[51];//
                          ENDP

                  temperature_sensor_handle PROC
;;;188    void temperature_sensor_handle(void)
00020a  b570              PUSH     {r4-r6,lr}
;;;189    {
;;;190       
;;;191        static uint8_t cont=0;
;;;192    	  static uint8_t  check_temp0_count_warning = 0,check_temp1_count_warning = 0;
;;;193    	  static uint8_t  check_temp0_count_err = 0,check_temp1_count_err = 0;
;;;194    
;;;195        if(cont<51)
00020c  4887              LDR      r0,|L1.1068|
00020e  7800              LDRB     r0,[r0,#0]  ; cont
000210  2833              CMP      r0,#0x33
000212  da13              BGE      |L1.572|
;;;196        {
;;;197            temp0[cont]=temperature0_sensor_get();
000214  f7fffffe          BL       temperature0_sensor_get
000218  4985              LDR      r1,|L1.1072|
00021a  4a84              LDR      r2,|L1.1068|
00021c  7812              LDRB     r2,[r2,#0]  ; cont
00021e  f8210012          STRH     r0,[r1,r2,LSL #1]
;;;198            temp1[cont]=temperature1_sensor_get(); 
000222  f7fffffe          BL       temperature1_sensor_get
000226  4983              LDR      r1,|L1.1076|
000228  4a80              LDR      r2,|L1.1068|
00022a  7812              LDRB     r2,[r2,#0]  ; cont
00022c  f8210012          STRH     r0,[r1,r2,LSL #1]
;;;199            cont++;
000230  487e              LDR      r0,|L1.1068|
000232  7800              LDRB     r0,[r0,#0]  ; cont
000234  1c40              ADDS     r0,r0,#1
000236  497d              LDR      r1,|L1.1068|
000238  7008              STRB     r0,[r1,#0]
00023a  e0ba              B        |L1.946|
                  |L1.572|
;;;200        }
;;;201        else
;;;202        {
;;;203            cont=0;
00023c  2000              MOVS     r0,#0
00023e  497b              LDR      r1,|L1.1068|
000240  7008              STRB     r0,[r1,#0]
;;;204            temperature0_value=MedFilter(temp0);
000242  487b              LDR      r0,|L1.1072|
000244  f7fffffe          BL       MedFilter
000248  497b              LDR      r1,|L1.1080|
00024a  8008              STRH     r0,[r1,#0]
;;;205            temperature1_value=MedFilter(temp1);
00024c  4879              LDR      r0,|L1.1076|
00024e  f7fffffe          BL       MedFilter
000252  497a              LDR      r1,|L1.1084|
000254  8008              STRH     r0,[r1,#0]
;;;206            temperature0_voltage = ((float)temperature0_value /4096)*3.3f*1000;// 2/3,单位：mv
000256  4878              LDR      r0,|L1.1080|
000258  8800              LDRH     r0,[r0,#0]  ; temperature0_value
00025a  f7fffffe          BL       __aeabi_ui2f
00025e  4606              MOV      r6,r0
000260  f04f418b          MOV      r1,#0x45800000
000264  f7fffffe          BL       __aeabi_fdiv
000268  4605              MOV      r5,r0
00026a  4975              LDR      r1,|L1.1088|
00026c  f7fffffe          BL       __aeabi_fmul
000270  4604              MOV      r4,r0
000272  4974              LDR      r1,|L1.1092|
000274  f7fffffe          BL       __aeabi_fmul
000278  4973              LDR      r1,|L1.1096|
00027a  6008              STR      r0,[r1,#0]  ; temperature0_voltage
;;;207            temperature1_voltage =  ((float)temperature1_value /4096)*3.3f*1000;// 2/3,单位：mv
00027c  486f              LDR      r0,|L1.1084|
00027e  8800              LDRH     r0,[r0,#0]  ; temperature1_value
000280  f7fffffe          BL       __aeabi_ui2f
000284  4606              MOV      r6,r0
000286  f04f418b          MOV      r1,#0x45800000
00028a  f7fffffe          BL       __aeabi_fdiv
00028e  4605              MOV      r5,r0
000290  496b              LDR      r1,|L1.1088|
000292  f7fffffe          BL       __aeabi_fmul
000296  4604              MOV      r4,r0
000298  496a              LDR      r1,|L1.1092|
00029a  f7fffffe          BL       __aeabi_fmul
00029e  496b              LDR      r1,|L1.1100|
0002a0  6008              STR      r0,[r1,#0]  ; temperature1_voltage
;;;208            temperature0_interface_battery  = get_temperature(temperature0_voltage);
0002a2  4869              LDR      r0,|L1.1096|
0002a4  6800              LDR      r0,[r0,#0]  ; temperature0_voltage
0002a6  f7fffffe          BL       __aeabi_f2uiz
0002aa  b284              UXTH     r4,r0
0002ac  4620              MOV      r0,r4
0002ae  f7fffffe          BL       get_temperature
0002b2  4967              LDR      r1,|L1.1104|
0002b4  6008              STR      r0,[r1,#0]  ; temperature0_interface_battery
;;;209        	  temperature1_interface_battery =  get_temperature(temperature1_voltage);
0002b6  4865              LDR      r0,|L1.1100|
0002b8  6800              LDR      r0,[r0,#0]  ; temperature1_voltage
0002ba  f7fffffe          BL       __aeabi_f2uiz
0002be  b284              UXTH     r4,r0
0002c0  4620              MOV      r0,r4
0002c2  f7fffffe          BL       get_temperature
0002c6  4963              LDR      r1,|L1.1108|
0002c8  6008              STR      r0,[r1,#0]  ; temperature1_interface_battery
;;;210    			
;;;211    				if(temperature0_interface_battery<Temperature_Warning)  //大插头
0002ca  4963              LDR      r1,|L1.1112|
0002cc  4860              LDR      r0,|L1.1104|
0002ce  6800              LDR      r0,[r0,#0]  ; temperature0_interface_battery
0002d0  f7fffffe          BL       __aeabi_cfcmple
0002d4  d207              BCS      |L1.742|
;;;212    				{
;;;213    						XT100_battery_temp_state=State_Normal;
0002d6  2000              MOVS     r0,#0
0002d8  4952              LDR      r1,|L1.1060|
0002da  7008              STRB     r0,[r1,#0]
;;;214    						check_temp0_count_warning = 0;
0002dc  495f              LDR      r1,|L1.1116|
0002de  7008              STRB     r0,[r1,#0]
;;;215    					  check_temp0_count_err = 0;
0002e0  495f              LDR      r1,|L1.1120|
0002e2  7008              STRB     r0,[r1,#0]
0002e4  e02b              B        |L1.830|
                  |L1.742|
;;;216    				}
;;;217    				else if(temperature0_interface_battery>Temperature_Err)
0002e6  495f              LDR      r1,|L1.1124|
0002e8  4859              LDR      r0,|L1.1104|
0002ea  6800              LDR      r0,[r0,#0]  ; temperature0_interface_battery
0002ec  f7fffffe          BL       __aeabi_cfrcmple
0002f0  d213              BCS      |L1.794|
;;;218    				{
;;;219    						check_temp0_count_warning++;
0002f2  485a              LDR      r0,|L1.1116|
0002f4  7800              LDRB     r0,[r0,#0]  ; check_temp0_count_warning
0002f6  1c40              ADDS     r0,r0,#1
0002f8  4958              LDR      r1,|L1.1116|
0002fa  7008              STRB     r0,[r1,#0]
;;;220    					  check_temp0_count_err++;
0002fc  4858              LDR      r0,|L1.1120|
0002fe  7800              LDRB     r0,[r0,#0]  ; check_temp0_count_err
000300  1c40              ADDS     r0,r0,#1
000302  4957              LDR      r1,|L1.1120|
000304  7008              STRB     r0,[r1,#0]
;;;221    					  if(check_temp0_count_err >= 20)
000306  4608              MOV      r0,r1
000308  7800              LDRB     r0,[r0,#0]  ; check_temp0_count_err
00030a  2814              CMP      r0,#0x14
00030c  db17              BLT      |L1.830|
;;;222    						{
;;;223    							check_temp0_count_err = 20;
00030e  2014              MOVS     r0,#0x14
000310  7008              STRB     r0,[r1,#0]
;;;224    							XT100_battery_temp_state=State_Err;
000312  2002              MOVS     r0,#2
000314  4943              LDR      r1,|L1.1060|
000316  7008              STRB     r0,[r1,#0]
000318  e011              B        |L1.830|
                  |L1.794|
;;;225    						}
;;;226    				}
;;;227    				else
;;;228    				{
;;;229    					 check_temp0_count_warning++;
00031a  4850              LDR      r0,|L1.1116|
00031c  7800              LDRB     r0,[r0,#0]  ; check_temp0_count_warning
00031e  1c40              ADDS     r0,r0,#1
000320  494e              LDR      r1,|L1.1116|
000322  7008              STRB     r0,[r1,#0]
;;;230    					 check_temp0_count_err = 0;
000324  2000              MOVS     r0,#0
000326  494e              LDR      r1,|L1.1120|
000328  7008              STRB     r0,[r1,#0]
;;;231    					 if(check_temp0_count_warning >= 20) // 10 = 1s
00032a  484c              LDR      r0,|L1.1116|
00032c  7800              LDRB     r0,[r0,#0]  ; check_temp0_count_warning
00032e  2814              CMP      r0,#0x14
000330  db05              BLT      |L1.830|
;;;232    					 {
;;;233    						 check_temp0_count_warning = 20;
000332  2014              MOVS     r0,#0x14
000334  4949              LDR      r1,|L1.1116|
000336  7008              STRB     r0,[r1,#0]
;;;234    						 XT100_battery_temp_state=State_Warning;
000338  2001              MOVS     r0,#1
00033a  493a              LDR      r1,|L1.1060|
00033c  7008              STRB     r0,[r1,#0]
                  |L1.830|
;;;235    					 }
;;;236    				}
;;;237    				
;;;238    				if(temperature1_interface_battery<Temperature_Warning)   //小插头
00033e  4946              LDR      r1,|L1.1112|
000340  4844              LDR      r0,|L1.1108|
000342  6800              LDR      r0,[r0,#0]  ; temperature1_interface_battery
000344  f7fffffe          BL       __aeabi_cfcmple
000348  d207              BCS      |L1.858|
;;;239    				{
;;;240    						XT90_battery_temp_state=State_Normal;
00034a  2000              MOVS     r0,#0
00034c  4936              LDR      r1,|L1.1064|
00034e  7008              STRB     r0,[r1,#0]
;;;241    						check_temp1_count_warning=0;
000350  4945              LDR      r1,|L1.1128|
000352  7008              STRB     r0,[r1,#0]
;;;242    					  check_temp1_count_err = 0;
000354  4945              LDR      r1,|L1.1132|
000356  7008              STRB     r0,[r1,#0]
000358  e02b              B        |L1.946|
                  |L1.858|
;;;243    				}
;;;244    				else if(temperature1_interface_battery>Temperature_Err)
00035a  4942              LDR      r1,|L1.1124|
00035c  483d              LDR      r0,|L1.1108|
00035e  6800              LDR      r0,[r0,#0]  ; temperature1_interface_battery
000360  f7fffffe          BL       __aeabi_cfrcmple
000364  d213              BCS      |L1.910|
;;;245    				{
;;;246    						check_temp1_count_warning++;
000366  4840              LDR      r0,|L1.1128|
000368  7800              LDRB     r0,[r0,#0]  ; check_temp1_count_warning
00036a  1c40              ADDS     r0,r0,#1
00036c  493e              LDR      r1,|L1.1128|
00036e  7008              STRB     r0,[r1,#0]
;;;247    					  check_temp1_count_err++;
000370  483e              LDR      r0,|L1.1132|
000372  7800              LDRB     r0,[r0,#0]  ; check_temp1_count_err
000374  1c40              ADDS     r0,r0,#1
000376  493d              LDR      r1,|L1.1132|
000378  7008              STRB     r0,[r1,#0]
;;;248    					  if(check_temp1_count_err > 20)
00037a  4608              MOV      r0,r1
00037c  7800              LDRB     r0,[r0,#0]  ; check_temp1_count_err
00037e  2814              CMP      r0,#0x14
000380  dd17              BLE      |L1.946|
;;;249    					  {
;;;250    					    check_temp1_count_err = 20;
000382  2014              MOVS     r0,#0x14
000384  7008              STRB     r0,[r1,#0]
;;;251    							XT90_battery_temp_state=State_Err;
000386  2002              MOVS     r0,#2
000388  4927              LDR      r1,|L1.1064|
00038a  7008              STRB     r0,[r1,#0]
00038c  e011              B        |L1.946|
                  |L1.910|
;;;252    					  }
;;;253    				}
;;;254    				else
;;;255    				{
;;;256    						check_temp1_count_warning++;
00038e  4836              LDR      r0,|L1.1128|
000390  7800              LDRB     r0,[r0,#0]  ; check_temp1_count_warning
000392  1c40              ADDS     r0,r0,#1
000394  4934              LDR      r1,|L1.1128|
000396  7008              STRB     r0,[r1,#0]
;;;257    					  check_temp1_count_err = 0;
000398  2000              MOVS     r0,#0
00039a  4934              LDR      r1,|L1.1132|
00039c  7008              STRB     r0,[r1,#0]
;;;258    					  if(check_temp1_count_warning >= 20) // 10 = 1s
00039e  4832              LDR      r0,|L1.1128|
0003a0  7800              LDRB     r0,[r0,#0]  ; check_temp1_count_warning
0003a2  2814              CMP      r0,#0x14
0003a4  db05              BLT      |L1.946|
;;;259    						{
;;;260    							 check_temp1_count_warning = 20;
0003a6  2014              MOVS     r0,#0x14
0003a8  492f              LDR      r1,|L1.1128|
0003aa  7008              STRB     r0,[r1,#0]
;;;261    						   XT90_battery_temp_state = State_Warning;
0003ac  2001              MOVS     r0,#1
0003ae  491e              LDR      r1,|L1.1064|
0003b0  7008              STRB     r0,[r1,#0]
                  |L1.946|
;;;262    						}
;;;263    				}
;;;264        }  
;;;265    }
0003b2  bd70              POP      {r4-r6,pc}
;;;266    
                          ENDP

                  Get_Spary_Limit_Value PROC
;;;1299   
;;;1300   uint16_t Get_Spary_Limit_Value(uint8_t foc_id,uint8_t value_id)
0003b4  4602              MOV      r2,r0
;;;1301   {
;;;1302   	if(foc_id == FOC_1)	
0003b6  2a01              CMP      r2,#1
0003b8  d10b              BNE      |L1.978|
;;;1303   		if(value_id == MAX_SPRAY_ID)
0003ba  2901              CMP      r1,#1
0003bc  d104              BNE      |L1.968|
;;;1304   			return FOC1_MAX_SPRAY_Speed + 10;
0003be  482c              LDR      r0,|L1.1136|
0003c0  8800              LDRH     r0,[r0,#0]  ; FOC1_MAX_SPRAY_Speed
0003c2  300a              ADDS     r0,r0,#0xa
0003c4  b280              UXTH     r0,r0
                  |L1.966|
;;;1305   		else
;;;1306   		 return  FOC1_MIN_SPRAY_Speed- 20;
;;;1307   	else
;;;1308   		if(value_id == MAX_SPRAY_ID)
;;;1309   			return FOC2_MAX_SPRAY_Speed + 10;
;;;1310   		else
;;;1311   		 return  FOC2_MIN_SPRAY_Speed- 20;
;;;1312   			
;;;1313   }
0003c6  4770              BX       lr
                  |L1.968|
0003c8  482a              LDR      r0,|L1.1140|
0003ca  8800              LDRH     r0,[r0,#0]            ;1306  ; FOC1_MIN_SPRAY_Speed
0003cc  3814              SUBS     r0,r0,#0x14           ;1306
0003ce  b280              UXTH     r0,r0                 ;1306
0003d0  e7f9              B        |L1.966|
                  |L1.978|
0003d2  2901              CMP      r1,#1                 ;1308
0003d4  d152              BNE      |L1.1148|
0003d6  4828              LDR      r0,|L1.1144|
0003d8  8800              LDRH     r0,[r0,#0]            ;1309  ; FOC2_MAX_SPRAY_Speed
0003da  300a              ADDS     r0,r0,#0xa            ;1309
0003dc  b280              UXTH     r0,r0                 ;1309
0003de  e7f2              B        |L1.966|
                  |L1.992|
                          DCD      capacity_flag_1L
                  |L1.996|
                          DCD      0x2009c000
                  |L1.1000|
                          DCD      level_stauts
                  |L1.1004|
                          DCD      level_count
                  |L1.1008|
                          DCD      0x40160000
                  |L1.1012|
                          DCD      Volume_Each_Pulse
                  |L1.1016|
                          DCD      0xf5c28f5c
                  |L1.1020|
                          DCD      0x3fdf5c28
                  |L1.1024|
                          DCD      Viscosity_Offset_Coeff
                  |L1.1028|
                          DCD      Viscosity_Offset
                  |L1.1032|
                          DCD      Cali_Freq
                  |L1.1036|
                          DCD      K_offset
                  |L1.1040|
                          DCD      0x46c73800
                  |L1.1044|
                          DCD      current_capacity_part
                  |L1.1048|
                          DCD      current_capacity_total
                  |L1.1052|
                          DCD      debug_watch_k_value
                  |L1.1056|
                          DCD      flow_compute
                  |L1.1060|
                          DCD      XT100_battery_temp_state
                  |L1.1064|
                          DCD      XT90_battery_temp_state
                  |L1.1068|
                          DCD      cont
                  |L1.1072|
                          DCD      temp0
                  |L1.1076|
                          DCD      temp1
                  |L1.1080|
                          DCD      temperature0_value
                  |L1.1084|
                          DCD      temperature1_value
                  |L1.1088|
                          DCD      0x40533333
                  |L1.1092|
                          DCD      0x447a0000
                  |L1.1096|
                          DCD      temperature0_voltage
                  |L1.1100|
                          DCD      temperature1_voltage
                  |L1.1104|
                          DCD      temperature0_interface_battery
                  |L1.1108|
                          DCD      temperature1_interface_battery
                  |L1.1112|
                          DCD      0x42dc0000
                  |L1.1116|
                          DCD      check_temp0_count_warning
                  |L1.1120|
                          DCD      check_temp0_count_err
                  |L1.1124|
                          DCD      0x43020000
                  |L1.1128|
                          DCD      check_temp1_count_warning
                  |L1.1132|
                          DCD      check_temp1_count_err
                  |L1.1136|
                          DCD      FOC1_MAX_SPRAY_Speed
                  |L1.1140|
                          DCD      FOC1_MIN_SPRAY_Speed
                  |L1.1144|
                          DCD      FOC2_MAX_SPRAY_Speed
                  |L1.1148|
00047c  48fe              LDR      r0,|L1.2168|
00047e  8800              LDRH     r0,[r0,#0]            ;1311  ; FOC2_MIN_SPRAY_Speed
000480  3814              SUBS     r0,r0,#0x14           ;1311
000482  b280              UXTH     r0,r0                 ;1311
000484  e79f              B        |L1.966|
;;;1314   
                          ENDP

                  Set_Foc_Value_By_Flow_Double_Pump PROC
;;;280    uint8_t debug_target_pules;
;;;281    void Set_Foc_Value_By_Flow_Double_Pump(spray_sys_esc_status_t foc_status ) //单位为 0.02L/min
000486  e92d4ff1          PUSH     {r0,r4-r11,lr}
;;;282    {
00048a  b096              SUB      sp,sp,#0x58
;;;283    	 static float value_1 = 0,value_2 = 0;
;;;284    	 static uint8_t last_flow = 0,last_status = 0;
;;;285    	 float  target_pules = 0,step_value_pulse = 0,target_flow= 0,wucha = 0;
00048c  2400              MOVS     r4,#0
00048e  2000              MOVS     r0,#0
000490  9015              STR      r0,[sp,#0x54]
000492  9014              STR      r0,[sp,#0x50]
000494  4681              MOV      r9,r0
;;;286    	 static uint8_t state = 0;
;;;287    
;;;288        control_freq++;
000496  48f9              LDR      r0,|L1.2172|
000498  7800              LDRB     r0,[r0,#0]  ; control_freq
00049a  1c40              ADDS     r0,r0,#1
00049c  49f7              LDR      r1,|L1.2172|
00049e  7008              STRB     r0,[r1,#0]
;;;289    		if(foc_status.enable_flag ==1 && foc_status.flow_speed != 0)
0004a0  f89d0058          LDRB     r0,[sp,#0x58]
0004a4  f0000001          AND      r0,r0,#1
0004a8  2800              CMP      r0,#0
                  |L1.1194|
0004aa  d07d              BEQ      |L1.1448|
0004ac  f89d0058          LDRB     r0,[sp,#0x58]
0004b0  0840              LSRS     r0,r0,#1
0004b2  2800              CMP      r0,#0
0004b4  d0f9              BEQ      |L1.1194|
;;;290    		{
;;;291    			if(foc_status.flow_speed > MAX_FLOW )//2.54 L/min
0004b6  f89d0058          LDRB     r0,[sp,#0x58]
0004ba  217f              MOVS     r1,#0x7f
0004bc  ebb10f50          CMP      r1,r0,LSR #1
0004c0  da06              BGE      |L1.1232|
;;;292    				foc_status.flow_speed = MAX_FLOW;
0004c2  f89d0058          LDRB     r0,[sp,#0x58]
0004c6  f02000fe          BIC      r0,r0,#0xfe
0004ca  30fe              ADDS     r0,r0,#0xfe
0004cc  f88d0058          STRB     r0,[sp,#0x58]
                  |L1.1232|
;;;293    			if(foc_status.flow_speed < MIN_FLOW)//0.4 L/min
0004d0  f89d0058          LDRB     r0,[sp,#0x58]
0004d4  2114              MOVS     r1,#0x14
0004d6  ebb10f50          CMP      r1,r0,LSR #1
0004da  dd06              BLE      |L1.1258|
;;;294    				foc_status.flow_speed = MIN_FLOW;
0004dc  f89d0058          LDRB     r0,[sp,#0x58]
0004e0  f02000fe          BIC      r0,r0,#0xfe
0004e4  3028              ADDS     r0,r0,#0x28
0004e6  f88d0058          STRB     r0,[sp,#0x58]
                  |L1.1258|
;;;295    
;;;296    			target_flow = foc_status.flow_speed *0.02;
0004ea  f89d1058          LDRB     r1,[sp,#0x58]
0004ee  0848              LSRS     r0,r1,#1
0004f0  f7fffffe          BL       __aeabi_ui2d
0004f4  4607              MOV      r7,r0
0004f6  4ae2              LDR      r2,|L1.2176|
0004f8  4be2              LDR      r3,|L1.2180|
0004fa  f7fffffe          BL       __aeabi_dmul
0004fe  4605              MOV      r5,r0
000500  f7fffffe          BL       __aeabi_d2f
000504  9014              STR      r0,[sp,#0x50]
;;;297    				
;;;298    
;;;299    			if(last_flow == 0)
000506  48e0              LDR      r0,|L1.2184|
000508  7800              LDRB     r0,[r0,#0]  ; last_flow
00050a  b988              CBNZ     r0,|L1.1328|
;;;300    			{
;;;301    				value_1 = FOC1_MIN_VALUE_WORKING;
00050c  2102              MOVS     r1,#2
00050e  2001              MOVS     r0,#1
000510  f7fffffe          BL       Get_Spary_Limit_Value
000514  4605              MOV      r5,r0
000516  f7fffffe          BL       __aeabi_ui2f
00051a  49dc              LDR      r1,|L1.2188|
00051c  6008              STR      r0,[r1,#0]  ; value_1
;;;302    				value_2 = FOC2_MIN_VALUE_WORKING; 
00051e  2102              MOVS     r1,#2
000520  4608              MOV      r0,r1
000522  f7fffffe          BL       Get_Spary_Limit_Value
000526  4605              MOV      r5,r0
000528  f7fffffe          BL       __aeabi_ui2f
00052c  49d8              LDR      r1,|L1.2192|
00052e  6008              STR      r0,[r1,#0]  ; value_2
                  |L1.1328|
;;;303    			}
;;;304    			
;;;305    			if(control_freq % 5 == 0 ) // 1hz
000530  48d2              LDR      r0,|L1.2172|
000532  7800              LDRB     r0,[r0,#0]  ; control_freq
000534  2105              MOVS     r1,#5
000536  fb90f2f1          SDIV     r2,r0,r1
00053a  fb010012          MLS      r0,r1,r2,r0
00053e  2800              CMP      r0,#0
000540  d172              BNE      |L1.1576|
;;;306    			{
;;;307    				
;;;308    				target_capa_debug +=  1000*foc_status.flow_speed *0.02f/60;
000542  f89d1058          LDRB     r1,[sp,#0x58]
000546  0849              LSRS     r1,r1,#1
000548  f44f727a          MOV      r2,#0x3e8
00054c  fb01f002          MUL      r0,r1,r2
000550  f7fffffe          BL       __aeabi_i2f
000554  4607              MOV      r7,r0
000556  49cf              LDR      r1,|L1.2196|
000558  f7fffffe          BL       __aeabi_fmul
00055c  4606              MOV      r6,r0
00055e  49ce              LDR      r1,|L1.2200|
000560  f7fffffe          BL       __aeabi_fdiv
000564  4605              MOV      r5,r0
000566  48cd              LDR      r0,|L1.2204|
000568  6801              LDR      r1,[r0,#0]  ; target_capa_debug
00056a  4628              MOV      r0,r5
00056c  f7fffffe          BL       __aeabi_fadd
000570  49ca              LDR      r1,|L1.2204|
000572  6008              STR      r0,[r1,#0]  ; target_capa_debug
;;;309    				// 如果K值不对，在变化范围中用校准的油门值做限制
;;;310    				 if(last_status == 1)
000574  48ca              LDR      r0,|L1.2208|
000576  7800              LDRB     r0,[r0,#0]  ; last_status
000578  2801              CMP      r0,#1
00057a  d17d              BNE      |L1.1656|
;;;311    				 { 
;;;312    				  target_pules = (float)((1000*foc_status.flow_speed *0.02f)/(Volume_Each_Pulse*60))+0.5f;//四舍五入 
00057c  49c6              LDR      r1,|L1.2200|
00057e  48c9              LDR      r0,|L1.2212|
000580  6800              LDR      r0,[r0,#0]  ; Volume_Each_Pulse
000582  f7fffffe          BL       __aeabi_fmul
000586  4607              MOV      r7,r0
000588  f89d1058          LDRB     r1,[sp,#0x58]
00058c  0849              LSRS     r1,r1,#1
00058e  f44f727a          MOV      r2,#0x3e8
000592  fb01f002          MUL      r0,r1,r2
000596  f7fffffe          BL       __aeabi_i2f
00059a  4680              MOV      r8,r0
00059c  49bd              LDR      r1,|L1.2196|
00059e  f7fffffe          BL       __aeabi_fmul
0005a2  4606              MOV      r6,r0
0005a4  4639              MOV      r1,r7
0005a6  e000              B        |L1.1450|
                  |L1.1448|
0005a8  e1dd              B        |L1.2406|
                  |L1.1450|
0005aa  f7fffffe          BL       __aeabi_fdiv
0005ae  4605              MOV      r5,r0
0005b0  f04f517c          MOV      r1,#0x3f000000
0005b4  f7fffffe          BL       __aeabi_fadd
0005b8  4604              MOV      r4,r0
;;;313    					wucha = current_capacity_total - target_capa_debug;
0005ba  48bb              LDR      r0,|L1.2216|
0005bc  8800              LDRH     r0,[r0,#0]  ; current_capacity_total
0005be  f7fffffe          BL       __aeabi_ui2f
0005c2  4605              MOV      r5,r0
0005c4  48b5              LDR      r0,|L1.2204|
0005c6  6801              LDR      r1,[r0,#0]  ; target_capa_debug
0005c8  4628              MOV      r0,r5
0005ca  f7fffffe          BL       __aeabi_fsub
0005ce  4681              MOV      r9,r0
;;;314    					switch(state)
0005d0  48b6              LDR      r0,|L1.2220|
0005d2  7800              LDRB     r0,[r0,#0]  ; state
0005d4  b120              CBZ      r0,|L1.1504|
0005d6  2801              CMP      r0,#1
0005d8  d018              BEQ      |L1.1548|
0005da  2802              CMP      r0,#2
0005dc  d133              BNE      |L1.1606|
0005de  e024              B        |L1.1578|
                  |L1.1504|
;;;315    					{
;;;316    					   case 0:
;;;317    							 if(wucha > 150)
0005e0  49b3              LDR      r1,|L1.2224|
0005e2  4648              MOV      r0,r9
0005e4  f7fffffe          BL       __aeabi_cfrcmple
0005e8  d203              BCS      |L1.1522|
;;;318    								 state = 1;
0005ea  2001              MOVS     r0,#1
0005ec  49af              LDR      r1,|L1.2220|
0005ee  7008              STRB     r0,[r1,#0]
0005f0  e00b              B        |L1.1546|
                  |L1.1522|
;;;319    							 else if(wucha < -100)
0005f2  49b0              LDR      r1,|L1.2228|
0005f4  4648              MOV      r0,r9
0005f6  f7fffffe          BL       __aeabi_cfcmple
0005fa  d203              BCS      |L1.1540|
;;;320    								 state = 2;
0005fc  2002              MOVS     r0,#2
0005fe  49ab              LDR      r1,|L1.2220|
000600  7008              STRB     r0,[r1,#0]
000602  e002              B        |L1.1546|
                  |L1.1540|
;;;321    							 else
;;;322    								 state = 0;
000604  2000              MOVS     r0,#0
000606  49a9              LDR      r1,|L1.2220|
000608  7008              STRB     r0,[r1,#0]
                  |L1.1546|
;;;323    						 break;
00060a  e01d              B        |L1.1608|
                  |L1.1548|
;;;324    					
;;;325    						 case 1:
;;;326    						  target_pules = target_pules - 5;
00060c  49aa              LDR      r1,|L1.2232|
00060e  4620              MOV      r0,r4
000610  f7fffffe          BL       __aeabi_fsub
000614  4604              MOV      r4,r0
;;;327    						  if(wucha < -100)
000616  49a7              LDR      r1,|L1.2228|
000618  4648              MOV      r0,r9
00061a  f7fffffe          BL       __aeabi_cfcmple
00061e  d202              BCS      |L1.1574|
;;;328    								state = 0;
000620  2000              MOVS     r0,#0
000622  49a2              LDR      r1,|L1.2220|
000624  7008              STRB     r0,[r1,#0]
                  |L1.1574|
;;;329    						 break;
000626  e00f              B        |L1.1608|
                  |L1.1576|
000628  e0d2              B        |L1.2000|
                  |L1.1578|
;;;330    						 
;;;331    						 case 2:
;;;332    							target_pules = target_pules + 5;	
00062a  49a3              LDR      r1,|L1.2232|
00062c  4620              MOV      r0,r4
00062e  f7fffffe          BL       __aeabi_fadd
000632  4604              MOV      r4,r0
;;;333    						  if(wucha > 50)
000634  49a1              LDR      r1,|L1.2236|
000636  4648              MOV      r0,r9
000638  f7fffffe          BL       __aeabi_cfrcmple
00063c  d202              BCS      |L1.1604|
;;;334    								state = 0; 
00063e  2000              MOVS     r0,#0
000640  499a              LDR      r1,|L1.2220|
000642  7008              STRB     r0,[r1,#0]
                  |L1.1604|
;;;335    						 break;
000644  e000              B        |L1.1608|
                  |L1.1606|
;;;336    						 
;;;337    						 default:
;;;338    							
;;;339    						 break;
000646  bf00              NOP      
                  |L1.1608|
000648  bf00              NOP                            ;323
;;;340    				
;;;341    					}
;;;342    					
;;;343    					debug_target_pules = target_pules;
00064a  4620              MOV      r0,r4
00064c  f7fffffe          BL       __aeabi_f2uiz
000650  499b              LDR      r1,|L1.2240|
000652  7008              STRB     r0,[r1,#0]
;;;344    					if((fabs(target_pules - get_cali_flow_freq())+0.5f) > 1 )//如果脉冲数差太多则停止校准
000654  f7fffffe          BL       get_cali_flow_freq
000658  9013              STR      r0,[sp,#0x4c]
00065a  f7fffffe          BL       __aeabi_ui2f
00065e  4683              MOV      r11,r0
000660  4621              MOV      r1,r4
000662  f7fffffe          BL       __aeabi_frsub
000666  4682              MOV      r10,r0
000668  f7fffffe          BL       __aeabi_f2d
00066c  f0214100          BIC      r1,r1,#0x80000000
000670  4607              MOV      r7,r0
000672  2200              MOVS     r2,#0
000674  4b93              LDR      r3,|L1.2244|
000676  e000              B        |L1.1658|
                  |L1.1656|
000678  e020              B        |L1.1724|
                  |L1.1658|
00067a  f7fffffe          BL       __aeabi_dadd
00067e  4605              MOV      r5,r0
000680  2200              MOVS     r2,#0
000682  4b91              LDR      r3,|L1.2248|
000684  f7fffffe          BL       __aeabi_cdrcmple
000688  d209              BCS      |L1.1694|
;;;345    						step_value_pulse = (float)(target_pules - get_cali_flow_freq());
00068a  f7fffffe          BL       get_cali_flow_freq
00068e  4606              MOV      r6,r0
000690  f7fffffe          BL       __aeabi_ui2f
000694  4605              MOV      r5,r0
000696  4621              MOV      r1,r4
000698  f7fffffe          BL       __aeabi_frsub
00069c  9015              STR      r0,[sp,#0x54]
                  |L1.1694|
;;;346    
;;;347    					
;;;348    					if(step_value_pulse >= 10)
00069e  498b              LDR      r1,|L1.2252|
0006a0  9815              LDR      r0,[sp,#0x54]
0006a2  f7fffffe          BL       __aeabi_cfrcmple
0006a6  d801              BHI      |L1.1708|
;;;349    						step_value_pulse = 10; // 此处表示的为百分比增长
0006a8  4888              LDR      r0,|L1.2252|
0006aa  9015              STR      r0,[sp,#0x54]
                  |L1.1708|
;;;350    					if(step_value_pulse <= -10)
0006ac  4988              LDR      r1,|L1.2256|
0006ae  9815              LDR      r0,[sp,#0x54]
0006b0  f7fffffe          BL       __aeabi_cfcmple
0006b4  d805              BHI      |L1.1730|
;;;351    						step_value_pulse = -10; // 此处表示的为百分比增长
0006b6  4886              LDR      r0,|L1.2256|
0006b8  9015              STR      r0,[sp,#0x54]
0006ba  e002              B        |L1.1730|
                  |L1.1724|
;;;352    	
;;;353    				 }
;;;354    				 else
;;;355    				 {
;;;356    						last_status = 1;// 如果上次暂停 延缓一个控制周期
0006bc  2001              MOVS     r0,#1
0006be  4978              LDR      r1,|L1.2208|
0006c0  7008              STRB     r0,[r1,#0]
                  |L1.1730|
;;;357    				 }
;;;358    				 
;;;359    				 { 
;;;360    					 extern uint8_t start_flag;
;;;361    					 start_flag = 2; // 关闭主程序打印
0006c2  2002              MOVS     r0,#2
0006c4  4983              LDR      r1,|L1.2260|
0006c6  7008              STRB     r0,[r1,#0]
;;;362    				 }
;;;363    				 
;;;364    				 		// 确定范围，同比增长
;;;365    					value_1+= (FOC1_MAX_VALUE_WORKING - FOC1_MIN_VALUE_WORKING)*(step_value_pulse/100);
0006c8  4983              LDR      r1,|L1.2264|
0006ca  9815              LDR      r0,[sp,#0x54]
0006cc  f7fffffe          BL       __aeabi_fdiv
0006d0  4680              MOV      r8,r0
0006d2  2101              MOVS     r1,#1
0006d4  4608              MOV      r0,r1
0006d6  f7fffffe          BL       Get_Spary_Limit_Value
0006da  4603              MOV      r3,r0
0006dc  2102              MOVS     r1,#2
0006de  2001              MOVS     r0,#1
0006e0  f7fffffe          BL       Get_Spary_Limit_Value
0006e4  1a1f              SUBS     r7,r3,r0
0006e6  4638              MOV      r0,r7
0006e8  f7fffffe          BL       __aeabi_i2f
0006ec  4606              MOV      r6,r0
0006ee  4641              MOV      r1,r8
0006f0  f7fffffe          BL       __aeabi_fmul
0006f4  4605              MOV      r5,r0
0006f6  4865              LDR      r0,|L1.2188|
0006f8  6801              LDR      r1,[r0,#0]  ; value_1
0006fa  4628              MOV      r0,r5
0006fc  f7fffffe          BL       __aeabi_fadd
000700  4962              LDR      r1,|L1.2188|
000702  6008              STR      r0,[r1,#0]  ; value_1
;;;366    					value_2+= (FOC2_MAX_VALUE_WORKING - FOC2_MIN_VALUE_WORKING)*(step_value_pulse/100);
000704  4974              LDR      r1,|L1.2264|
000706  9815              LDR      r0,[sp,#0x54]
000708  f7fffffe          BL       __aeabi_fdiv
00070c  4680              MOV      r8,r0
00070e  2101              MOVS     r1,#1
000710  2002              MOVS     r0,#2
000712  f7fffffe          BL       Get_Spary_Limit_Value
000716  4603              MOV      r3,r0
000718  2102              MOVS     r1,#2
00071a  4608              MOV      r0,r1
00071c  f7fffffe          BL       Get_Spary_Limit_Value
000720  1a1f              SUBS     r7,r3,r0
000722  4638              MOV      r0,r7
000724  f7fffffe          BL       __aeabi_i2f
000728  4606              MOV      r6,r0
00072a  4641              MOV      r1,r8
00072c  f7fffffe          BL       __aeabi_fmul
000730  4605              MOV      r5,r0
000732  4857              LDR      r0,|L1.2192|
000734  6801              LDR      r1,[r0,#0]  ; value_2
000736  4628              MOV      r0,r5
000738  f7fffffe          BL       __aeabi_fadd
00073c  4954              LDR      r1,|L1.2192|
00073e  6008              STR      r0,[r1,#0]  ; value_2
;;;367    			
;;;368    	        uart_printf( 2, "ve_1 = %.2f ve_2 = %.2f step_p = %.2f idx_7 = %d  tart_p = %.2f tar_f = %.2f current_t = %d tar_c_d = %.2f\r\n",
000740  4856              LDR      r0,|L1.2204|
000742  6800              LDR      r0,[r0,#0]  ; target_capa_debug
000744  f7fffffe          BL       __aeabi_f2d
000748  4605              MOV      r5,r0
00074a  460e              MOV      r6,r1
00074c  9814              LDR      r0,[sp,#0x50]
00074e  f7fffffe          BL       __aeabi_f2d
000752  4607              MOV      r7,r0
000754  4688              MOV      r8,r1
000756  4620              MOV      r0,r4
000758  f7fffffe          BL       __aeabi_f2d
00075c  4682              MOV      r10,r0
00075e  468b              MOV      r11,r1
000760  9815              LDR      r0,[sp,#0x54]
000762  f7fffffe          BL       __aeabi_f2d
000766  e9cd0112          STRD     r0,r1,[sp,#0x48]
00076a  4849              LDR      r0,|L1.2192|
00076c  6800              LDR      r0,[r0,#0]  ; value_2
00076e  f7fffffe          BL       __aeabi_f2d
000772  e9cd0110          STRD     r0,r1,[sp,#0x40]
000776  4845              LDR      r0,|L1.2188|
000778  6800              LDR      r0,[r0,#0]  ; value_1
00077a  f7fffffe          BL       __aeabi_f2d
00077e  e9cd560c          STRD     r5,r6,[sp,#0x30]
000782  e9cd010e          STRD     r0,r1,[sp,#0x38]
000786  4848              LDR      r0,|L1.2216|
000788  8800              LDRH     r0,[r0,#0]  ; current_capacity_total
00078a  e9cdab06          STRD     r10,r11,[sp,#0x18]
00078e  e9cd7808          STRD     r7,r8,[sp,#0x20]
000792  900a              STR      r0,[sp,#0x28]
000794  4851              LDR      r0,|L1.2268|
000796  f9b00000          LDRSH    r0,[r0,#0]  ; flow_sensor_value
00079a  9004              STR      r0,[sp,#0x10]
00079c  e9dd0112          LDRD     r0,r1,[sp,#0x48]
0007a0  e9cd0102          STRD     r0,r1,[sp,#8]
0007a4  e9dd0110          LDRD     r0,r1,[sp,#0x40]
0007a8  e9cd0100          STRD     r0,r1,[sp,#0]
0007ac  494c              LDR      r1,|L1.2272|
0007ae  2002              MOVS     r0,#2
0007b0  e9dd230e          LDRD     r2,r3,[sp,#0x38]
0007b4  f7fffffe          BL       uart_printf
;;;369    	        value_1,value_2,step_value_pulse ,flow_sensor_value,target_pules,target_flow,current_capacity_total,target_capa_debug);
;;;370    				  uart_printf( 2, "#####press1_value_min = %d  press0_value_min = %d  \r\n", press1_value_min,press0_value_min);
0007b8  484a              LDR      r0,|L1.2276|
0007ba  8803              LDRH     r3,[r0,#0]  ; press0_value_min
0007bc  484a              LDR      r0,|L1.2280|
0007be  8802              LDRH     r2,[r0,#0]  ; press1_value_min
0007c0  a14a              ADR      r1,|L1.2284|
0007c2  2002              MOVS     r0,#2
0007c4  f7fffffe          BL       uart_printf
;;;371    				  uart_printf( 2, " \r\n");
0007c8  a156              ADR      r1,|L1.2340|
0007ca  2002              MOVS     r0,#2
0007cc  f7fffffe          BL       uart_printf
                  |L1.2000|
;;;372    			}
;;;373    		
;;;374    
;;;375    			last_flow = foc_status.flow_speed;
0007d0  f89d0058          LDRB     r0,[sp,#0x58]
0007d4  0840              LSRS     r0,r0,#1
0007d6  492c              LDR      r1,|L1.2184|
0007d8  7008              STRB     r0,[r1,#0]
;;;376    			
;;;377    			if(value_1 < FOC1_MIN_VALUE_WORKING)
0007da  2102              MOVS     r1,#2
0007dc  2001              MOVS     r0,#1
0007de  f7fffffe          BL       Get_Spary_Limit_Value
0007e2  4606              MOV      r6,r0
0007e4  f7fffffe          BL       __aeabi_ui2f
0007e8  4605              MOV      r5,r0
0007ea  4828              LDR      r0,|L1.2188|
0007ec  6801              LDR      r1,[r0,#0]  ; value_1
0007ee  4628              MOV      r0,r5
0007f0  f7fffffe          BL       __aeabi_cfrcmple
0007f4  d208              BCS      |L1.2056|
;;;378    				value_1 = FOC1_MIN_VALUE_WORKING;
0007f6  2102              MOVS     r1,#2
0007f8  2001              MOVS     r0,#1
0007fa  f7fffffe          BL       Get_Spary_Limit_Value
0007fe  4605              MOV      r5,r0
000800  f7fffffe          BL       __aeabi_ui2f
000804  4921              LDR      r1,|L1.2188|
000806  6008              STR      r0,[r1,#0]  ; value_1
                  |L1.2056|
;;;379    			if(value_2 < FOC2_MIN_VALUE_WORKING)
000808  2102              MOVS     r1,#2
00080a  4608              MOV      r0,r1
00080c  f7fffffe          BL       Get_Spary_Limit_Value
000810  4606              MOV      r6,r0
000812  f7fffffe          BL       __aeabi_ui2f
000816  4605              MOV      r5,r0
000818  481d              LDR      r0,|L1.2192|
00081a  6801              LDR      r1,[r0,#0]  ; value_2
00081c  4628              MOV      r0,r5
00081e  f7fffffe          BL       __aeabi_cfrcmple
000822  d208              BCS      |L1.2102|
;;;380    				value_2 = FOC2_MIN_VALUE_WORKING;
000824  2102              MOVS     r1,#2
000826  4608              MOV      r0,r1
000828  f7fffffe          BL       Get_Spary_Limit_Value
00082c  4605              MOV      r5,r0
00082e  f7fffffe          BL       __aeabi_ui2f
000832  4917              LDR      r1,|L1.2192|
000834  6008              STR      r0,[r1,#0]  ; value_2
                  |L1.2102|
;;;381    
;;;382    			if(value_1 > FOC1_MAX_VALUE_WORKING)
000836  2101              MOVS     r1,#1
000838  4608              MOV      r0,r1
00083a  f7fffffe          BL       Get_Spary_Limit_Value
00083e  4606              MOV      r6,r0
000840  f7fffffe          BL       __aeabi_ui2f
000844  4605              MOV      r5,r0
000846  4811              LDR      r0,|L1.2188|
000848  6801              LDR      r1,[r0,#0]  ; value_1
00084a  4628              MOV      r0,r5
00084c  f7fffffe          BL       __aeabi_cfcmple
000850  d208              BCS      |L1.2148|
;;;383    				value_1 = FOC1_MAX_VALUE_WORKING;
000852  2101              MOVS     r1,#1
000854  4608              MOV      r0,r1
000856  f7fffffe          BL       Get_Spary_Limit_Value
00085a  4605              MOV      r5,r0
00085c  f7fffffe          BL       __aeabi_ui2f
000860  490a              LDR      r1,|L1.2188|
000862  6008              STR      r0,[r1,#0]  ; value_1
                  |L1.2148|
;;;384    			if(value_2 > FOC2_MAX_VALUE_WORKING)
000864  2101              MOVS     r1,#1
000866  2002              MOVS     r0,#2
000868  f7fffffe          BL       Get_Spary_Limit_Value
00086c  4606              MOV      r6,r0
00086e  f7fffffe          BL       __aeabi_ui2f
000872  4605              MOV      r5,r0
000874  4806              LDR      r0,|L1.2192|
000876  e057              B        |L1.2344|
                  |L1.2168|
                          DCD      FOC2_MIN_SPRAY_Speed
                  |L1.2172|
                          DCD      control_freq
                  |L1.2176|
                          DCD      0x47ae147b
                  |L1.2180|
                          DCD      0x3f947ae1
                  |L1.2184|
                          DCD      last_flow
                  |L1.2188|
                          DCD      value_1
                  |L1.2192|
                          DCD      value_2
                  |L1.2196|
                          DCD      0x3ca3d70a
                  |L1.2200|
                          DCD      0x42700000
                  |L1.2204|
                          DCD      target_capa_debug
                  |L1.2208|
                          DCD      last_status
                  |L1.2212|
                          DCD      Volume_Each_Pulse
                  |L1.2216|
                          DCD      current_capacity_total
                  |L1.2220|
                          DCD      state
                  |L1.2224|
                          DCD      0x43160000
                  |L1.2228|
                          DCD      0xc2c80000
                  |L1.2232|
                          DCD      0x40a00000
                  |L1.2236|
                          DCD      0x42480000
                  |L1.2240|
                          DCD      debug_target_pules
                  |L1.2244|
                          DCD      0x3fe00000
                  |L1.2248|
                          DCD      0x3ff00000
                  |L1.2252|
                          DCD      0x41200000
                  |L1.2256|
                          DCD      0xc1200000
                  |L1.2260|
                          DCD      start_flag
                  |L1.2264|
                          DCD      0x42c80000
                  |L1.2268|
                          DCD      flow_sensor_value
                  |L1.2272|
                          DCD      ||.conststring||
                  |L1.2276|
                          DCD      press0_value_min
                  |L1.2280|
                          DCD      press1_value_min
                  |L1.2284|
0008ec  23232323          DCB      "#####press1_value_min = %d  press0_value_min = %d  \r\n"
0008f0  23707265
0008f4  7373315f
0008f8  76616c75
0008fc  655f6d69
000900  6e203d20
000904  25642020
000908  70726573
00090c  73305f76
000910  616c7565
000914  5f6d696e
000918  203d2025
00091c  6420200d
000920  0a      
000921  00                DCB      0
000922  00                DCB      0
000923  00                DCB      0
                  |L1.2340|
000924  200d0a00          DCB      " \r\n",0
                  |L1.2344|
000928  6801              LDR      r1,[r0,#0]  ; value_2
00092a  4628              MOV      r0,r5
00092c  f7fffffe          BL       __aeabi_cfcmple
000930  d208              BCS      |L1.2372|
;;;385    				value_2 = FOC2_MAX_VALUE_WORKING;
000932  2101              MOVS     r1,#1
000934  2002              MOVS     r0,#2
000936  f7fffffe          BL       Get_Spary_Limit_Value
00093a  4605              MOV      r5,r0
00093c  f7fffffe          BL       __aeabi_ui2f
000940  49fe              LDR      r1,|L1.3388|
000942  6008              STR      r0,[r1,#0]  ; value_2
                  |L1.2372|
;;;386    			
;;;387    			Set_Throttle_Value_1(value_1);
000944  48fe              LDR      r0,|L1.3392|
000946  6800              LDR      r0,[r0,#0]  ; value_1
000948  f7fffffe          BL       __aeabi_f2uiz
00094c  b285              UXTH     r5,r0
00094e  4628              MOV      r0,r5
000950  f7fffffe          BL       Set_Throttle_Value_1
;;;388    			Set_Throttle_Value_2(value_2);
000954  48f9              LDR      r0,|L1.3388|
000956  6800              LDR      r0,[r0,#0]  ; value_2
000958  f7fffffe          BL       __aeabi_f2uiz
00095c  b285              UXTH     r5,r0
00095e  4628              MOV      r0,r5
000960  f7fffffe          BL       Set_Throttle_Value_2
000964  e00c              B        |L1.2432|
                  |L1.2406|
;;;389    		}
;;;390    		else
;;;391    		{
;;;392    			Set_Throttle_Value_1(MIN_CNT);
000966  f44f706b          MOV      r0,#0x3ac
00096a  f7fffffe          BL       Set_Throttle_Value_1
;;;393    			Set_Throttle_Value_2(MIN_CNT);
00096e  f44f706b          MOV      r0,#0x3ac
000972  f7fffffe          BL       Set_Throttle_Value_2
;;;394    			last_status = 0;
000976  2000              MOVS     r0,#0
000978  49f2              LDR      r1,|L1.3396|
00097a  7008              STRB     r0,[r1,#0]
;;;395    			control_freq = 0;
00097c  49f2              LDR      r1,|L1.3400|
00097e  7008              STRB     r0,[r1,#0]
                  |L1.2432|
;;;396    		}
;;;397    }
000980  b017              ADD      sp,sp,#0x5c
000982  e8bd8ff0          POP      {r4-r11,pc}
;;;398    
                          ENDP

                  Set_Foc_Value_By_Flow_Single_Pump PROC
;;;399    
;;;400    void Set_Foc_Value_By_Flow_Single_Pump(uint8_t foc_id,spray_sys_esc_status_t foc_status ) //单位为 0.02L/min
000986  e92d4ff3          PUSH     {r0,r1,r4-r11,lr}
;;;401    {
00098a  b095              SUB      sp,sp,#0x54
00098c  4682              MOV      r10,r0
;;;402    	 static uint8_t control_freq_1 = 0,control_freq_2 = 0;
;;;403    	 static float value_1 = 0,value_2 = 0;
;;;404    	 static uint8_t last_flow_1 = 0,last_status_1 = 0;
;;;405    	 static uint8_t last_flow_2 = 0,last_status_2 = 0;
;;;406       float  target_pules_1 = 0,step_value_pulse_1 = 0;
00098e  2400              MOVS     r4,#0
000990  2000              MOVS     r0,#0
000992  9014              STR      r0,[sp,#0x50]
;;;407    	 float  target_pules_2 = 0,step_value_pulse_2 = 0,target_flow = 0;
000994  4681              MOV      r9,r0
000996  9013              STR      r0,[sp,#0x4c]
000998  9012              STR      r0,[sp,#0x48]
;;;408    	
;;;409       if(foc_id == FOC_1)
00099a  f1ba0f01          CMP      r10,#1
00099e  d17d              BNE      |L1.2716|
;;;410    	 {
;;;411    		 control_freq_1++;
0009a0  48ea              LDR      r0,|L1.3404|
0009a2  7800              LDRB     r0,[r0,#0]  ; control_freq_1
0009a4  1c40              ADDS     r0,r0,#1
0009a6  49e9              LDR      r1,|L1.3404|
0009a8  7008              STRB     r0,[r1,#0]
;;;412    		 if(foc_status.enable_flag ==1 && foc_status.flow_speed != 0)
0009aa  f89d0058          LDRB     r0,[sp,#0x58]
0009ae  f0000001          AND      r0,r0,#1
0009b2  2800              CMP      r0,#0
                  |L1.2484|
0009b4  d073              BEQ      |L1.2718|
0009b6  f89d0058          LDRB     r0,[sp,#0x58]
0009ba  0840              LSRS     r0,r0,#1
0009bc  2800              CMP      r0,#0
0009be  d0f9              BEQ      |L1.2484|
;;;413    		 {
;;;414    		 	if(foc_status.flow_speed > MAX_FLOW )//2.54 L/min
0009c0  f89d0058          LDRB     r0,[sp,#0x58]
0009c4  217f              MOVS     r1,#0x7f
0009c6  ebb10f50          CMP      r1,r0,LSR #1
0009ca  da06              BGE      |L1.2522|
;;;415    				foc_status.flow_speed = MAX_FLOW;
0009cc  f89d0058          LDRB     r0,[sp,#0x58]
0009d0  f02000fe          BIC      r0,r0,#0xfe
0009d4  30fe              ADDS     r0,r0,#0xfe
0009d6  f88d0058          STRB     r0,[sp,#0x58]
                  |L1.2522|
;;;416    			if(foc_status.flow_speed < MIN_FLOW)//0.4 L/min
0009da  f89d0058          LDRB     r0,[sp,#0x58]
0009de  2114              MOVS     r1,#0x14
0009e0  ebb10f50          CMP      r1,r0,LSR #1
0009e4  dd06              BLE      |L1.2548|
;;;417    				foc_status.flow_speed = MIN_FLOW;
0009e6  f89d0058          LDRB     r0,[sp,#0x58]
0009ea  f02000fe          BIC      r0,r0,#0xfe
0009ee  3028              ADDS     r0,r0,#0x28
0009f0  f88d0058          STRB     r0,[sp,#0x58]
                  |L1.2548|
;;;418    			
;;;419    			if(Volume_Each_Pulse != 0) // 可以上电默认一个参数值
0009f4  2100              MOVS     r1,#0
0009f6  48d6              LDR      r0,|L1.3408|
0009f8  6800              LDR      r0,[r0,#0]  ; Volume_Each_Pulse
0009fa  f7fffffe          BL       __aeabi_cfcmpeq
0009fe  d01c              BEQ      |L1.2618|
;;;420    				target_pules_1 = (float)((1000*foc_status.flow_speed *0.02f)/(Volume_Each_Pulse*60))+0.5f;//四舍五入
000a00  49d4              LDR      r1,|L1.3412|
000a02  48d3              LDR      r0,|L1.3408|
000a04  6800              LDR      r0,[r0,#0]  ; Volume_Each_Pulse
000a06  f7fffffe          BL       __aeabi_fmul
000a0a  4607              MOV      r7,r0
000a0c  f89d1058          LDRB     r1,[sp,#0x58]
000a10  0849              LSRS     r1,r1,#1
000a12  f44f727a          MOV      r2,#0x3e8
000a16  fb01f002          MUL      r0,r1,r2
000a1a  f7fffffe          BL       __aeabi_i2f
000a1e  4680              MOV      r8,r0
000a20  49cd              LDR      r1,|L1.3416|
000a22  f7fffffe          BL       __aeabi_fmul
000a26  4606              MOV      r6,r0
000a28  4639              MOV      r1,r7
000a2a  f7fffffe          BL       __aeabi_fdiv
000a2e  4605              MOV      r5,r0
000a30  f04f517c          MOV      r1,#0x3f000000
000a34  f7fffffe          BL       __aeabi_fadd
000a38  4604              MOV      r4,r0
                  |L1.2618|
;;;421    			
;;;422    		  if(last_flow_1 == 0)
000a3a  48c8              LDR      r0,|L1.3420|
000a3c  7800              LDRB     r0,[r0,#0]  ; last_flow_1
000a3e  b940              CBNZ     r0,|L1.2642|
;;;423    				value_1 = FOC1_MIN_VALUE_WORKING;
000a40  2102              MOVS     r1,#2
000a42  2001              MOVS     r0,#1
000a44  f7fffffe          BL       Get_Spary_Limit_Value
000a48  4605              MOV      r5,r0
000a4a  f7fffffe          BL       __aeabi_ui2f
000a4e  49c4              LDR      r1,|L1.3424|
000a50  6008              STR      r0,[r1,#0]  ; value_1
                  |L1.2642|
;;;424    			
;;;425    			target_flow = foc_status.flow_speed*0.02;
000a52  f89d1058          LDRB     r1,[sp,#0x58]
000a56  0848              LSRS     r0,r1,#1
000a58  f7fffffe          BL       __aeabi_ui2d
000a5c  4607              MOV      r7,r0
000a5e  4ac1              LDR      r2,|L1.3428|
000a60  4bc1              LDR      r3,|L1.3432|
000a62  f7fffffe          BL       __aeabi_dmul
000a66  4605              MOV      r5,r0
000a68  f7fffffe          BL       __aeabi_d2f
000a6c  9012              STR      r0,[sp,#0x48]
;;;426    			if(control_freq_1 % 5 == 0 ) // 1hz
000a6e  48b7              LDR      r0,|L1.3404|
000a70  7800              LDRB     r0,[r0,#0]  ; control_freq_1
000a72  2105              MOVS     r1,#5
000a74  fb90f2f1          SDIV     r2,r0,r1
000a78  fb010012          MLS      r0,r1,r2,r0
000a7c  2800              CMP      r0,#0
000a7e  d17d              BNE      |L1.2940|
;;;427    			{
;;;428    				// 如果K值不对，在变化范围中用校准的油门值做限制
;;;429    				
;;;430    				 target_capa_debug +=  1000*foc_status.flow_speed *0.02f/60;
000a80  f89d1058          LDRB     r1,[sp,#0x58]
000a84  0849              LSRS     r1,r1,#1
000a86  f44f727a          MOV      r2,#0x3e8
000a8a  fb01f002          MUL      r0,r1,r2
000a8e  f7fffffe          BL       __aeabi_i2f
000a92  4607              MOV      r7,r0
000a94  49b0              LDR      r1,|L1.3416|
000a96  f7fffffe          BL       __aeabi_fmul
000a9a  e001              B        |L1.2720|
                  |L1.2716|
000a9c  e0f4              B        |L1.3208|
                  |L1.2718|
000a9e  e0e5              B        |L1.3180|
                  |L1.2720|
000aa0  4606              MOV      r6,r0
000aa2  49ac              LDR      r1,|L1.3412|
000aa4  f7fffffe          BL       __aeabi_fdiv
000aa8  4605              MOV      r5,r0
000aaa  48b0              LDR      r0,|L1.3436|
000aac  6801              LDR      r1,[r0,#0]  ; target_capa_debug
000aae  4628              MOV      r0,r5
000ab0  f7fffffe          BL       __aeabi_fadd
000ab4  49ad              LDR      r1,|L1.3436|
000ab6  6008              STR      r0,[r1,#0]  ; target_capa_debug
;;;431    				 if(last_status_1 == 1)
000ab8  48ad              LDR      r0,|L1.3440|
000aba  7800              LDRB     r0,[r0,#0]  ; last_status_1
000abc  2801              CMP      r0,#1
000abe  d131              BNE      |L1.2852|
;;;432    				 {
;;;433    					if((fabs(target_pules_1 - get_cali_flow_freq())+0.5f) > 1 )//如果脉冲数差太多则停止校准
000ac0  f7fffffe          BL       get_cali_flow_freq
000ac4  9010              STR      r0,[sp,#0x40]
000ac6  f7fffffe          BL       __aeabi_ui2f
000aca  4621              MOV      r1,r4
000acc  9011              STR      r0,[sp,#0x44]
000ace  f7fffffe          BL       __aeabi_frsub
000ad2  4683              MOV      r11,r0
000ad4  f7fffffe          BL       __aeabi_f2d
000ad8  f0214100          BIC      r1,r1,#0x80000000
000adc  4605              MOV      r5,r0
000ade  2200              MOVS     r2,#0
000ae0  4ba4              LDR      r3,|L1.3444|
000ae2  f7fffffe          BL       __aeabi_dadd
000ae6  4607              MOV      r7,r0
000ae8  2200              MOVS     r2,#0
000aea  4ba3              LDR      r3,|L1.3448|
000aec  f7fffffe          BL       __aeabi_cdrcmple
000af0  d209              BCS      |L1.2822|
;;;434    						step_value_pulse_1 = (float)(target_pules_1 - get_cali_flow_freq());
000af2  f7fffffe          BL       get_cali_flow_freq
000af6  4606              MOV      r6,r0
000af8  f7fffffe          BL       __aeabi_ui2f
000afc  4605              MOV      r5,r0
000afe  4621              MOV      r1,r4
000b00  f7fffffe          BL       __aeabi_frsub
000b04  9014              STR      r0,[sp,#0x50]
                  |L1.2822|
;;;435    					
;;;436    					
;;;437    					if(step_value_pulse_1 >= 10)
000b06  499d              LDR      r1,|L1.3452|
000b08  9814              LDR      r0,[sp,#0x50]
000b0a  f7fffffe          BL       __aeabi_cfrcmple
000b0e  d801              BHI      |L1.2836|
;;;438    						step_value_pulse_1 = 10; // 此处表示的为百分比增长
000b10  489a              LDR      r0,|L1.3452|
000b12  9014              STR      r0,[sp,#0x50]
                  |L1.2836|
;;;439    					if(step_value_pulse_1 <= -10)
000b14  499a              LDR      r1,|L1.3456|
000b16  9814              LDR      r0,[sp,#0x50]
000b18  f7fffffe          BL       __aeabi_cfcmple
000b1c  d805              BHI      |L1.2858|
;;;440    						step_value_pulse_1 = -10; // 此处表示的为百分比增长
000b1e  4898              LDR      r0,|L1.3456|
000b20  9014              STR      r0,[sp,#0x50]
000b22  e002              B        |L1.2858|
                  |L1.2852|
;;;441    				
;;;442    				 }
;;;443    				 else
;;;444    				 {
;;;445    						last_status_1 = 1;// 如果上次暂停 延缓一个控制周期
000b24  2001              MOVS     r0,#1
000b26  4992              LDR      r1,|L1.3440|
000b28  7008              STRB     r0,[r1,#0]
                  |L1.2858|
;;;446    				 }
;;;447    				 { 
;;;448    					 extern uint8_t start_flag;
;;;449    					 start_flag = 2; // 关闭主程序打印
000b2a  2002              MOVS     r0,#2
000b2c  4995              LDR      r1,|L1.3460|
000b2e  7008              STRB     r0,[r1,#0]
;;;450    				 }
;;;451    				 
;;;452    				 				 		// 确定范围，同比增长
;;;453    			    value_1+= (FOC1_MAX_VALUE_WORKING - FOC1_MIN_VALUE_WORKING)*(step_value_pulse_1/100);
000b30  4995              LDR      r1,|L1.3464|
000b32  9814              LDR      r0,[sp,#0x50]
000b34  f7fffffe          BL       __aeabi_fdiv
000b38  4680              MOV      r8,r0
000b3a  2101              MOVS     r1,#1
000b3c  4608              MOV      r0,r1
000b3e  f7fffffe          BL       Get_Spary_Limit_Value
000b42  4603              MOV      r3,r0
000b44  2102              MOVS     r1,#2
000b46  2001              MOVS     r0,#1
000b48  f7fffffe          BL       Get_Spary_Limit_Value
000b4c  1a1f              SUBS     r7,r3,r0
000b4e  4638              MOV      r0,r7
000b50  f7fffffe          BL       __aeabi_i2f
000b54  4606              MOV      r6,r0
000b56  4641              MOV      r1,r8
000b58  f7fffffe          BL       __aeabi_fmul
000b5c  4605              MOV      r5,r0
000b5e  4880              LDR      r0,|L1.3424|
000b60  6801              LDR      r1,[r0,#0]  ; value_1
000b62  4628              MOV      r0,r5
000b64  f7fffffe          BL       __aeabi_fadd
000b68  497d              LDR      r1,|L1.3424|
000b6a  6008              STR      r0,[r1,#0]  ; value_1
;;;454    				  uart_printf( 2, " 1--v_1 = %.2f step_p = %.2f idx_7 = %d  tar_p_1 = %.2f tar_flow = %.2f cur_total = %d tar_capa = %.2f \r\n",
000b6c  487f              LDR      r0,|L1.3436|
000b6e  6800              LDR      r0,[r0,#0]  ; target_capa_debug
000b70  f7fffffe          BL       __aeabi_f2d
000b74  e9cd0110          STRD     r0,r1,[sp,#0x40]
000b78  9812              LDR      r0,[sp,#0x48]
000b7a  e000              B        |L1.2942|
                  |L1.2940|
000b7c  e03a              B        |L1.3060|
                  |L1.2942|
000b7e  f7fffffe          BL       __aeabi_f2d
000b82  4605              MOV      r5,r0
000b84  460e              MOV      r6,r1
000b86  4620              MOV      r0,r4
000b88  f7fffffe          BL       __aeabi_f2d
000b8c  4607              MOV      r7,r0
000b8e  4688              MOV      r8,r1
000b90  9814              LDR      r0,[sp,#0x50]
000b92  f7fffffe          BL       __aeabi_f2d
000b96  e9cd010e          STRD     r0,r1,[sp,#0x38]
000b9a  4871              LDR      r0,|L1.3424|
000b9c  6800              LDR      r0,[r0,#0]  ; value_1
000b9e  f7fffffe          BL       __aeabi_f2d
000ba2  e9cd010c          STRD     r0,r1,[sp,#0x30]
000ba6  e9dd0110          LDRD     r0,r1,[sp,#0x40]
000baa  e9cd010a          STRD     r0,r1,[sp,#0x28]
000bae  4877              LDR      r0,|L1.3468|
000bb0  8800              LDRH     r0,[r0,#0]  ; current_capacity_total
000bb2  e9cd7804          STRD     r7,r8,[sp,#0x10]
000bb6  e9cd5606          STRD     r5,r6,[sp,#0x18]
000bba  9008              STR      r0,[sp,#0x20]
000bbc  4874              LDR      r0,|L1.3472|
000bbe  f9b00000          LDRSH    r0,[r0,#0]  ; flow_sensor_value
000bc2  9002              STR      r0,[sp,#8]
000bc4  e9dd010e          LDRD     r0,r1,[sp,#0x38]
000bc8  e9cd0100          STRD     r0,r1,[sp,#0]
000bcc  4971              LDR      r1,|L1.3476|
000bce  2002              MOVS     r0,#2
000bd0  e9dd230c          LDRD     r2,r3,[sp,#0x30]
000bd4  f7fffffe          BL       uart_printf
;;;455    	        value_1,step_value_pulse_1 ,flow_sensor_value,target_pules_1,target_flow,current_capacity_total,target_capa_debug);
;;;456    				  uart_printf( 2, "#####press1_value_min = %d  press0_value_min = %d  \r\n", press1_value_min,press0_value_min);
000bd8  486f              LDR      r0,|L1.3480|
000bda  8803              LDRH     r3,[r0,#0]  ; press0_value_min
000bdc  486f              LDR      r0,|L1.3484|
000bde  8802              LDRH     r2,[r0,#0]  ; press1_value_min
000be0  f2af21f8          ADR      r1,|L1.2284|
000be4  2002              MOVS     r0,#2
000be6  f7fffffe          BL       uart_printf
;;;457    				  uart_printf( 2, " \r\n");
000bea  f2af21c8          ADR      r1,|L1.2340|
000bee  2002              MOVS     r0,#2
000bf0  f7fffffe          BL       uart_printf
                  |L1.3060|
;;;458    
;;;459    			}
;;;460    			
;;;461    	
;;;462    			  
;;;463       			last_flow_1 = foc_status.flow_speed;
000bf4  f89d0058          LDRB     r0,[sp,#0x58]
000bf8  0840              LSRS     r0,r0,#1
000bfa  4958              LDR      r1,|L1.3420|
000bfc  7008              STRB     r0,[r1,#0]
;;;464    				 if(value_1 < FOC1_MIN_VALUE_WORKING)
000bfe  2102              MOVS     r1,#2
000c00  2001              MOVS     r0,#1
000c02  f7fffffe          BL       Get_Spary_Limit_Value
000c06  4606              MOV      r6,r0
000c08  f7fffffe          BL       __aeabi_ui2f
000c0c  4605              MOV      r5,r0
000c0e  4854              LDR      r0,|L1.3424|
000c10  6801              LDR      r1,[r0,#0]  ; value_1
000c12  4628              MOV      r0,r5
000c14  f7fffffe          BL       __aeabi_cfrcmple
000c18  d208              BCS      |L1.3116|
;;;465    					 value_1 = FOC1_MIN_VALUE_WORKING;
000c1a  2102              MOVS     r1,#2
000c1c  2001              MOVS     r0,#1
000c1e  f7fffffe          BL       Get_Spary_Limit_Value
000c22  4605              MOV      r5,r0
000c24  f7fffffe          BL       __aeabi_ui2f
000c28  494d              LDR      r1,|L1.3424|
000c2a  6008              STR      r0,[r1,#0]  ; value_1
                  |L1.3116|
;;;466    				 if(value_1 > FOC1_MAX_VALUE_WORKING)
000c2c  2101              MOVS     r1,#1
000c2e  4608              MOV      r0,r1
000c30  f7fffffe          BL       Get_Spary_Limit_Value
000c34  4606              MOV      r6,r0
000c36  f7fffffe          BL       __aeabi_ui2f
000c3a  4605              MOV      r5,r0
000c3c  4848              LDR      r0,|L1.3424|
000c3e  6801              LDR      r1,[r0,#0]  ; value_1
000c40  4628              MOV      r0,r5
000c42  f7fffffe          BL       __aeabi_cfcmple
000c46  d208              BCS      |L1.3162|
;;;467    					 value_1 = FOC1_MAX_VALUE_WORKING;
000c48  2101              MOVS     r1,#1
000c4a  4608              MOV      r0,r1
000c4c  f7fffffe          BL       Get_Spary_Limit_Value
000c50  4605              MOV      r5,r0
000c52  f7fffffe          BL       __aeabi_ui2f
000c56  4942              LDR      r1,|L1.3424|
000c58  6008              STR      r0,[r1,#0]  ; value_1
                  |L1.3162|
;;;468    				 Set_Throttle_Value_1(value_1);
000c5a  4841              LDR      r0,|L1.3424|
000c5c  6800              LDR      r0,[r0,#0]  ; value_1
000c5e  f7fffffe          BL       __aeabi_f2uiz
000c62  b285              UXTH     r5,r0
000c64  4628              MOV      r0,r5
000c66  f7fffffe          BL       Set_Throttle_Value_1
000c6a  e008              B        |L1.3198|
                  |L1.3180|
;;;469    		 }
;;;470    		 else
;;;471    		 {
;;;472    			 	last_status_1 = 0;
000c6c  2000              MOVS     r0,#0
000c6e  4940              LDR      r1,|L1.3440|
000c70  7008              STRB     r0,[r1,#0]
;;;473    			  control_freq_1 = 0;
000c72  4936              LDR      r1,|L1.3404|
000c74  7008              STRB     r0,[r1,#0]
;;;474    			  Set_Throttle_Value_1(MIN_CNT);
000c76  f44f706b          MOV      r0,#0x3ac
000c7a  f7fffffe          BL       Set_Throttle_Value_1
                  |L1.3198|
;;;475    		 }
;;;476    		 Set_Throttle_Value_2(MIN_CNT);
000c7e  f44f706b          MOV      r0,#0x3ac
000c82  f7fffffe          BL       Set_Throttle_Value_2
000c86  e1a8              B        |L1.4058|
                  |L1.3208|
;;;477    	 }
;;;478    	 else
;;;479    	 {
;;;480    		 control_freq_2++;
000c88  4845              LDR      r0,|L1.3488|
000c8a  7800              LDRB     r0,[r0,#0]  ; control_freq_2
000c8c  1c40              ADDS     r0,r0,#1
000c8e  4944              LDR      r1,|L1.3488|
000c90  7008              STRB     r0,[r1,#0]
;;;481    		 if(foc_status.enable_flag ==1 && foc_status.flow_speed != 0)
000c92  f89d0058          LDRB     r0,[sp,#0x58]
000c96  f0000001          AND      r0,r0,#1
000c9a  2800              CMP      r0,#0
                  |L1.3228|
000c9c  d04c              BEQ      |L1.3384|
000c9e  f89d0058          LDRB     r0,[sp,#0x58]
000ca2  0840              LSRS     r0,r0,#1
000ca4  2800              CMP      r0,#0
000ca6  d0f9              BEQ      |L1.3228|
;;;482    		 {
;;;483    		 	if(foc_status.flow_speed > MAX_FLOW )//2.54 L/min
000ca8  f89d0058          LDRB     r0,[sp,#0x58]
000cac  217f              MOVS     r1,#0x7f
000cae  ebb10f50          CMP      r1,r0,LSR #1
000cb2  da06              BGE      |L1.3266|
;;;484    				foc_status.flow_speed = MAX_FLOW;
000cb4  f89d0058          LDRB     r0,[sp,#0x58]
000cb8  f02000fe          BIC      r0,r0,#0xfe
000cbc  30fe              ADDS     r0,r0,#0xfe
000cbe  f88d0058          STRB     r0,[sp,#0x58]
                  |L1.3266|
;;;485    			if(foc_status.flow_speed < MIN_FLOW)//0.4 L/min
000cc2  f89d0058          LDRB     r0,[sp,#0x58]
000cc6  2114              MOVS     r1,#0x14
000cc8  ebb10f50          CMP      r1,r0,LSR #1
000ccc  dd06              BLE      |L1.3292|
;;;486    				foc_status.flow_speed = MIN_FLOW;
000cce  f89d0058          LDRB     r0,[sp,#0x58]
000cd2  f02000fe          BIC      r0,r0,#0xfe
000cd6  3028              ADDS     r0,r0,#0x28
000cd8  f88d0058          STRB     r0,[sp,#0x58]
                  |L1.3292|
;;;487    			
;;;488    			if(Volume_Each_Pulse != 0) // 可以上电默认一个参数值
000cdc  2100              MOVS     r1,#0
000cde  481c              LDR      r0,|L1.3408|
000ce0  6800              LDR      r0,[r0,#0]  ; Volume_Each_Pulse
000ce2  f7fffffe          BL       __aeabi_cfcmpeq
000ce6  d01c              BEQ      |L1.3362|
;;;489    				target_pules_2 = (float)((1000*foc_status.flow_speed *0.02f)/(Volume_Each_Pulse*60))+0.5f;//四舍五入
000ce8  491a              LDR      r1,|L1.3412|
000cea  4819              LDR      r0,|L1.3408|
000cec  6800              LDR      r0,[r0,#0]  ; Volume_Each_Pulse
000cee  f7fffffe          BL       __aeabi_fmul
000cf2  4607              MOV      r7,r0
000cf4  f89d1058          LDRB     r1,[sp,#0x58]
000cf8  0849              LSRS     r1,r1,#1
000cfa  f44f727a          MOV      r2,#0x3e8
000cfe  fb01f002          MUL      r0,r1,r2
000d02  f7fffffe          BL       __aeabi_i2f
000d06  4680              MOV      r8,r0
000d08  4913              LDR      r1,|L1.3416|
000d0a  f7fffffe          BL       __aeabi_fmul
000d0e  4606              MOV      r6,r0
000d10  4639              MOV      r1,r7
000d12  f7fffffe          BL       __aeabi_fdiv
000d16  4605              MOV      r5,r0
000d18  f04f517c          MOV      r1,#0x3f000000
000d1c  f7fffffe          BL       __aeabi_fadd
000d20  4681              MOV      r9,r0
                  |L1.3362|
;;;490    			
;;;491    		  if(last_flow_2 == 0)
000d22  4820              LDR      r0,|L1.3492|
000d24  7800              LDRB     r0,[r0,#0]  ; last_flow_2
000d26  b940              CBNZ     r0,|L1.3386|
;;;492    				value_2 = FOC2_MIN_VALUE_WORKING;
000d28  2102              MOVS     r1,#2
000d2a  4608              MOV      r0,r1
000d2c  f7fffffe          BL       Get_Spary_Limit_Value
000d30  4605              MOV      r5,r0
000d32  f7fffffe          BL       __aeabi_ui2f
000d36  e037              B        |L1.3496|
                  |L1.3384|
000d38  e142              B        |L1.4032|
                  |L1.3386|
000d3a  e037              B        |L1.3500|
                  |L1.3388|
                          DCD      value_2
                  |L1.3392|
                          DCD      value_1
                  |L1.3396|
                          DCD      last_status
                  |L1.3400|
                          DCD      control_freq
                  |L1.3404|
                          DCD      control_freq_1
                  |L1.3408|
                          DCD      Volume_Each_Pulse
                  |L1.3412|
                          DCD      0x42700000
                  |L1.3416|
                          DCD      0x3ca3d70a
                  |L1.3420|
                          DCD      last_flow_1
                  |L1.3424|
                          DCD      |symbol_number.53|
                  |L1.3428|
                          DCD      0x47ae147b
                  |L1.3432|
                          DCD      0x3f947ae1
                  |L1.3436|
                          DCD      target_capa_debug
                  |L1.3440|
                          DCD      last_status_1
                  |L1.3444|
                          DCD      0x3fe00000
                  |L1.3448|
                          DCD      0x3ff00000
                  |L1.3452|
                          DCD      0x41200000
                  |L1.3456|
                          DCD      0xc1200000
                  |L1.3460|
                          DCD      start_flag
                  |L1.3464|
                          DCD      0x42c80000
                  |L1.3468|
                          DCD      current_capacity_total
                  |L1.3472|
                          DCD      flow_sensor_value
                  |L1.3476|
                          DCD      ||.conststring||+0x70
                  |L1.3480|
                          DCD      press0_value_min
                  |L1.3484|
                          DCD      press1_value_min
                  |L1.3488|
                          DCD      control_freq_2
                  |L1.3492|
                          DCD      last_flow_2
                  |L1.3496|
000da8  49fe              LDR      r1,|L1.4516|
000daa  6008              STR      r0,[r1,#0]  ; value_2
                  |L1.3500|
;;;493    			
;;;494    			target_flow = foc_status.flow_speed*0.02 ;
000dac  f89d1058          LDRB     r1,[sp,#0x58]
000db0  0848              LSRS     r0,r1,#1
000db2  f7fffffe          BL       __aeabi_ui2d
000db6  4607              MOV      r7,r0
000db8  4afb              LDR      r2,|L1.4520|
000dba  4bfc              LDR      r3,|L1.4524|
000dbc  f7fffffe          BL       __aeabi_dmul
000dc0  4605              MOV      r5,r0
000dc2  f7fffffe          BL       __aeabi_d2f
000dc6  9012              STR      r0,[sp,#0x48]
;;;495    			if(control_freq_2 % 5 == 0 ) // 1 hz
000dc8  48f9              LDR      r0,|L1.4528|
000dca  7800              LDRB     r0,[r0,#0]  ; control_freq_2
000dcc  2105              MOVS     r1,#5
000dce  fb90f2f1          SDIV     r2,r0,r1
000dd2  fb010012          MLS      r0,r1,r2,r0
000dd6  2800              CMP      r0,#0
000dd8  d17e              BNE      |L1.3800|
;;;496    			{
;;;497    				// 如果K值不对，在变化范围中用校准的油门值做限制
;;;498    				 target_capa_debug +=  1000*foc_status.flow_speed *0.02f/60;
000dda  f89d1058          LDRB     r1,[sp,#0x58]
000dde  0849              LSRS     r1,r1,#1
000de0  f44f727a          MOV      r2,#0x3e8
000de4  fb01f002          MUL      r0,r1,r2
000de8  f7fffffe          BL       __aeabi_i2f
000dec  4607              MOV      r7,r0
000dee  49f1              LDR      r1,|L1.4532|
000df0  f7fffffe          BL       __aeabi_fmul
000df4  4606              MOV      r6,r0
000df6  49f0              LDR      r1,|L1.4536|
000df8  f7fffffe          BL       __aeabi_fdiv
000dfc  4605              MOV      r5,r0
000dfe  48ef              LDR      r0,|L1.4540|
000e00  6801              LDR      r1,[r0,#0]  ; target_capa_debug
000e02  4628              MOV      r0,r5
000e04  f7fffffe          BL       __aeabi_fadd
000e08  49ec              LDR      r1,|L1.4540|
000e0a  6008              STR      r0,[r1,#0]  ; target_capa_debug
;;;499    				 if(last_status_2 == 1)
000e0c  48ec              LDR      r0,|L1.4544|
000e0e  7800              LDRB     r0,[r0,#0]  ; last_status_2
000e10  2801              CMP      r0,#1
000e12  d131              BNE      |L1.3704|
;;;500    				 {
;;;501    					if((fabs(target_pules_2 - get_cali_flow_freq())+0.5f) > 1 )//如果脉冲数差太多则停止校准
000e14  f7fffffe          BL       get_cali_flow_freq
000e18  9010              STR      r0,[sp,#0x40]
000e1a  f7fffffe          BL       __aeabi_ui2f
000e1e  4683              MOV      r11,r0
000e20  4649              MOV      r1,r9
000e22  f7fffffe          BL       __aeabi_frsub
000e26  9011              STR      r0,[sp,#0x44]
000e28  f7fffffe          BL       __aeabi_f2d
000e2c  f0214100          BIC      r1,r1,#0x80000000
000e30  4605              MOV      r5,r0
000e32  2200              MOVS     r2,#0
000e34  4be3              LDR      r3,|L1.4548|
000e36  f7fffffe          BL       __aeabi_dadd
000e3a  4607              MOV      r7,r0
000e3c  2200              MOVS     r2,#0
000e3e  4be2              LDR      r3,|L1.4552|
000e40  f7fffffe          BL       __aeabi_cdrcmple
000e44  d209              BCS      |L1.3674|
;;;502    						step_value_pulse_2 = (float)(target_pules_2 - get_cali_flow_freq());
000e46  f7fffffe          BL       get_cali_flow_freq
000e4a  4606              MOV      r6,r0
000e4c  f7fffffe          BL       __aeabi_ui2f
000e50  4605              MOV      r5,r0
000e52  4649              MOV      r1,r9
000e54  f7fffffe          BL       __aeabi_frsub
000e58  9013              STR      r0,[sp,#0x4c]
                  |L1.3674|
;;;503    					
;;;504    					
;;;505    					if(step_value_pulse_2 >= 10)
000e5a  49dc              LDR      r1,|L1.4556|
000e5c  9813              LDR      r0,[sp,#0x4c]
000e5e  f7fffffe          BL       __aeabi_cfrcmple
000e62  d801              BHI      |L1.3688|
;;;506    						step_value_pulse_2 = 10; // 此处表示的为百分比增长
000e64  48d9              LDR      r0,|L1.4556|
000e66  9013              STR      r0,[sp,#0x4c]
                  |L1.3688|
;;;507    					if(step_value_pulse_2 <= -10)
000e68  49d9              LDR      r1,|L1.4560|
000e6a  9813              LDR      r0,[sp,#0x4c]
000e6c  f7fffffe          BL       __aeabi_cfcmple
000e70  d805              BHI      |L1.3710|
;;;508    						step_value_pulse_2 = -10; // 此处表示的为百分比增长
000e72  48d7              LDR      r0,|L1.4560|
000e74  9013              STR      r0,[sp,#0x4c]
000e76  e002              B        |L1.3710|
                  |L1.3704|
;;;509    					
;;;510    				 }
;;;511    				 else
;;;512    				 {
;;;513    						last_status_2 = 1;// 如果上次暂停 延缓一个控制周期
000e78  2001              MOVS     r0,#1
000e7a  49d1              LDR      r1,|L1.4544|
000e7c  7008              STRB     r0,[r1,#0]
                  |L1.3710|
;;;514    				 }
;;;515    				 
;;;516    				 
;;;517    				 { 
;;;518    					 extern uint8_t start_flag;
;;;519    					 start_flag = 2; // 关闭主程序打印
000e7e  2002              MOVS     r0,#2
000e80  49d4              LDR      r1,|L1.4564|
000e82  7008              STRB     r0,[r1,#0]
;;;520    				 }
;;;521    				  // 确定范围，同比增长
;;;522    			    value_2+= (FOC2_MAX_VALUE_WORKING - FOC2_MIN_VALUE_WORKING)*(step_value_pulse_2/100);
000e84  49d4              LDR      r1,|L1.4568|
000e86  9813              LDR      r0,[sp,#0x4c]
000e88  f7fffffe          BL       __aeabi_fdiv
000e8c  4680              MOV      r8,r0
000e8e  2101              MOVS     r1,#1
000e90  2002              MOVS     r0,#2
000e92  f7fffffe          BL       Get_Spary_Limit_Value
000e96  4603              MOV      r3,r0
000e98  2102              MOVS     r1,#2
000e9a  4608              MOV      r0,r1
000e9c  f7fffffe          BL       Get_Spary_Limit_Value
000ea0  1a1f              SUBS     r7,r3,r0
000ea2  4638              MOV      r0,r7
000ea4  f7fffffe          BL       __aeabi_i2f
000ea8  4606              MOV      r6,r0
000eaa  4641              MOV      r1,r8
000eac  f7fffffe          BL       __aeabi_fmul
000eb0  4605              MOV      r5,r0
000eb2  48bc              LDR      r0,|L1.4516|
000eb4  6801              LDR      r1,[r0,#0]  ; value_2
000eb6  4628              MOV      r0,r5
000eb8  f7fffffe          BL       __aeabi_fadd
000ebc  49b9              LDR      r1,|L1.4516|
000ebe  6008              STR      r0,[r1,#0]  ; value_2
;;;523    				  uart_printf( 2, " 2--v2 = %.2f step_p_2 = %.2f idx_7 = %d tar_p_2 = %.2f tar_f = %.2f curr_c = %d tar_c = %.2f \r\n",
000ec0  48be              LDR      r0,|L1.4540|
000ec2  6800              LDR      r0,[r0,#0]  ; target_capa_debug
000ec4  f7fffffe          BL       __aeabi_f2d
000ec8  4605              MOV      r5,r0
000eca  460e              MOV      r6,r1
000ecc  9812              LDR      r0,[sp,#0x48]
000ece  f7fffffe          BL       __aeabi_f2d
000ed2  4607              MOV      r7,r0
000ed4  4688              MOV      r8,r1
000ed6  e000              B        |L1.3802|
                  |L1.3800|
000ed8  e036              B        |L1.3912|
                  |L1.3802|
000eda  4648              MOV      r0,r9
000edc  f7fffffe          BL       __aeabi_f2d
000ee0  e9cd0110          STRD     r0,r1,[sp,#0x40]
000ee4  9813              LDR      r0,[sp,#0x4c]
000ee6  f7fffffe          BL       __aeabi_f2d
000eea  e9cd010e          STRD     r0,r1,[sp,#0x38]
000eee  48ad              LDR      r0,|L1.4516|
000ef0  6800              LDR      r0,[r0,#0]  ; value_2
000ef2  f7fffffe          BL       __aeabi_f2d
000ef6  e9cd560a          STRD     r5,r6,[sp,#0x28]
000efa  e9cd010c          STRD     r0,r1,[sp,#0x30]
000efe  48b7              LDR      r0,|L1.4572|
000f00  8800              LDRH     r0,[r0,#0]  ; current_capacity_total
000f02  e9cd7806          STRD     r7,r8,[sp,#0x18]
000f06  9008              STR      r0,[sp,#0x20]
000f08  e9dd0110          LDRD     r0,r1,[sp,#0x40]
000f0c  e9cd0104          STRD     r0,r1,[sp,#0x10]
000f10  48b3              LDR      r0,|L1.4576|
000f12  f9b00000          LDRSH    r0,[r0,#0]  ; flow_sensor_value
000f16  9002              STR      r0,[sp,#8]
000f18  e9dd010e          LDRD     r0,r1,[sp,#0x38]
000f1c  e9cd0100          STRD     r0,r1,[sp,#0]
000f20  49b0              LDR      r1,|L1.4580|
000f22  2002              MOVS     r0,#2
000f24  e9dd230c          LDRD     r2,r3,[sp,#0x30]
000f28  f7fffffe          BL       uart_printf
;;;524    	        value_2,step_value_pulse_2 ,flow_sensor_value,target_pules_2,target_flow,current_capacity_total,target_capa_debug);
;;;525    				  uart_printf( 2, "#####press1_value_min = %d  press0_value_min = %d  \r\n", press1_value_min,press0_value_min);
000f2c  48ae              LDR      r0,|L1.4584|
000f2e  8803              LDRH     r3,[r0,#0]  ; press0_value_min
000f30  48ae              LDR      r0,|L1.4588|
000f32  8802              LDRH     r2,[r0,#0]  ; press1_value_min
000f34  f2af614c          ADR      r1,|L1.2284|
000f38  2002              MOVS     r0,#2
000f3a  f7fffffe          BL       uart_printf
;;;526    				  uart_printf( 2, " \r\n");
000f3e  f2af611c          ADR      r1,|L1.2340|
000f42  2002              MOVS     r0,#2
000f44  f7fffffe          BL       uart_printf
                  |L1.3912|
;;;527    			}
;;;528    			// 确定范围，同比增长
;;;529    			 last_flow_2 = foc_status.flow_speed;
000f48  f89d0058          LDRB     r0,[sp,#0x58]
000f4c  0840              LSRS     r0,r0,#1
000f4e  49a8              LDR      r1,|L1.4592|
000f50  7008              STRB     r0,[r1,#0]
;;;530    			
;;;531    			 if(value_2 < FOC2_MIN_VALUE_WORKING)
000f52  2102              MOVS     r1,#2
000f54  4608              MOV      r0,r1
000f56  f7fffffe          BL       Get_Spary_Limit_Value
000f5a  4606              MOV      r6,r0
000f5c  f7fffffe          BL       __aeabi_ui2f
000f60  4605              MOV      r5,r0
000f62  4890              LDR      r0,|L1.4516|
000f64  6801              LDR      r1,[r0,#0]  ; value_2
000f66  4628              MOV      r0,r5
000f68  f7fffffe          BL       __aeabi_cfrcmple
000f6c  d208              BCS      |L1.3968|
;;;532    				value_2 = FOC2_MIN_VALUE_WORKING;
000f6e  2102              MOVS     r1,#2
000f70  4608              MOV      r0,r1
000f72  f7fffffe          BL       Get_Spary_Limit_Value
000f76  4605              MOV      r5,r0
000f78  f7fffffe          BL       __aeabi_ui2f
000f7c  4989              LDR      r1,|L1.4516|
000f7e  6008              STR      r0,[r1,#0]  ; value_2
                  |L1.3968|
;;;533    			 
;;;534    			 if(value_2 > FOC2_MAX_VALUE_WORKING)
000f80  2101              MOVS     r1,#1
000f82  2002              MOVS     r0,#2
000f84  f7fffffe          BL       Get_Spary_Limit_Value
000f88  4606              MOV      r6,r0
000f8a  f7fffffe          BL       __aeabi_ui2f
000f8e  4605              MOV      r5,r0
000f90  4884              LDR      r0,|L1.4516|
000f92  6801              LDR      r1,[r0,#0]  ; value_2
000f94  4628              MOV      r0,r5
000f96  f7fffffe          BL       __aeabi_cfcmple
000f9a  d208              BCS      |L1.4014|
;;;535    				value_2 = FOC2_MAX_VALUE_WORKING;
000f9c  2101              MOVS     r1,#1
000f9e  2002              MOVS     r0,#2
000fa0  f7fffffe          BL       Get_Spary_Limit_Value
000fa4  4605              MOV      r5,r0
000fa6  f7fffffe          BL       __aeabi_ui2f
000faa  497e              LDR      r1,|L1.4516|
000fac  6008              STR      r0,[r1,#0]  ; value_2
                  |L1.4014|
;;;536    			 
;;;537    			 Set_Throttle_Value_2(value_2);
000fae  487d              LDR      r0,|L1.4516|
000fb0  6800              LDR      r0,[r0,#0]  ; value_2
000fb2  f7fffffe          BL       __aeabi_f2uiz
000fb6  b285              UXTH     r5,r0
000fb8  4628              MOV      r0,r5
000fba  f7fffffe          BL       Set_Throttle_Value_2
000fbe  e008              B        |L1.4050|
                  |L1.4032|
;;;538    		 }
;;;539    		 else
;;;540    		 {
;;;541    			
;;;542    			 	last_status_2 = 0;
000fc0  2000              MOVS     r0,#0
000fc2  497f              LDR      r1,|L1.4544|
000fc4  7008              STRB     r0,[r1,#0]
;;;543    			  control_freq_2 = 0;
000fc6  497a              LDR      r1,|L1.4528|
000fc8  7008              STRB     r0,[r1,#0]
;;;544    			  Set_Throttle_Value_2(MIN_CNT);
000fca  f44f706b          MOV      r0,#0x3ac
000fce  f7fffffe          BL       Set_Throttle_Value_2
                  |L1.4050|
;;;545    		 }
;;;546    		 Set_Throttle_Value_1(MIN_CNT);
000fd2  f44f706b          MOV      r0,#0x3ac
000fd6  f7fffffe          BL       Set_Throttle_Value_1
                  |L1.4058|
;;;547    	 }
;;;548    
;;;549    }
000fda  b017              ADD      sp,sp,#0x5c
000fdc  e8bd8ff0          POP      {r4-r11,pc}
;;;550    
                          ENDP

                  Control_The_Frequency_Pulse_1 PROC
;;;553    /*********************************** 流量校准时闭环控制脉冲频率 ***********************************************************/
;;;554    void Control_The_Frequency_Pulse_1(uint16_t foc_value,uint8_t target_value)
000fe0  e92d47f0          PUSH     {r4-r10,lr}
;;;555    {
000fe4  b086              SUB      sp,sp,#0x18
000fe6  4682              MOV      r10,r0
000fe8  460c              MOV      r4,r1
;;;556    	 static float control_value = 0;
;;;557    	 static uint8_t last_target_value = 0;//control_count = 0
;;;558    	 float step_value_pulse = 0;
000fea  f04f0900          MOV      r9,#0
;;;559    	
;;;560    	 if(last_target_value != target_value) // 更换锁定频率后，重新载入油门值
000fee  4881              LDR      r0,|L1.4596|
000ff0  7800              LDRB     r0,[r0,#0]  ; last_target_value
000ff2  42a0              CMP      r0,r4
000ff4  d004              BEQ      |L1.4096|
;;;561    		 control_value = foc_value;
000ff6  4650              MOV      r0,r10
000ff8  f7fffffe          BL       __aeabi_ui2f
000ffc  497e              LDR      r1,|L1.4600|
000ffe  6008              STR      r0,[r1,#0]  ; control_value
                  |L1.4096|
;;;562    	
;;;563    	 if(abs(target_value - get_cali_flow_freq()) > 2 && (get_cali_flow_freq() > (target_value - 8)))//如果脉冲数差太多则停止校准
001000  f7fffffe          BL       get_cali_flow_freq
001004  1a25              SUBS     r5,r4,r0
001006  2d00              CMP      r5,#0
001008  db01              BLT      |L1.4110|
00100a  4628              MOV      r0,r5
00100c  e000              B        |L1.4112|
                  |L1.4110|
00100e  4268              RSBS     r0,r5,#0
                  |L1.4112|
001010  2802              CMP      r0,#2
001012  dd10              BLE      |L1.4150|
001014  f7fffffe          BL       get_cali_flow_freq
001018  f1a40108          SUB      r1,r4,#8
00101c  4288              CMP      r0,r1
00101e  dd0a              BLE      |L1.4150|
;;;564    		 step_value_pulse = (float)P_FREQ*(target_value - get_cali_flow_freq());
001020  f7fffffe          BL       get_cali_flow_freq
001024  1a26              SUBS     r6,r4,r0
001026  4630              MOV      r0,r6
001028  f7fffffe          BL       __aeabi_i2f
00102c  4605              MOV      r5,r0
00102e  4973              LDR      r1,|L1.4604|
001030  f7fffffe          BL       __aeabi_fmul
001034  4681              MOV      r9,r0
                  |L1.4150|
;;;565    	 
;;;566    	 control_value += step_value_pulse;
001036  4649              MOV      r1,r9
001038  486f              LDR      r0,|L1.4600|
00103a  6800              LDR      r0,[r0,#0]  ; control_value
00103c  f7fffffe          BL       __aeabi_fadd
001040  496d              LDR      r1,|L1.4600|
001042  6008              STR      r0,[r1,#0]  ; control_value
;;;567    	 
;;;568    	 Set_Throttle_Value_1(control_value);
001044  4608              MOV      r0,r1
001046  6800              LDR      r0,[r0,#0]  ; control_value
001048  f7fffffe          BL       __aeabi_f2uiz
00104c  b285              UXTH     r5,r0
00104e  4628              MOV      r0,r5
001050  f7fffffe          BL       Set_Throttle_Value_1
;;;569    	 last_target_value = target_value;
001054  4867              LDR      r0,|L1.4596|
001056  7004              STRB     r4,[r0,#0]
;;;570    	 uart_printf( 2, "control_value_1 = %.2f  step_value_pulse_1 = %.2f idx_7_freq = %d  target_value_1 = %d  press0_value_min = %d  \r\n",
001058  4648              MOV      r0,r9
00105a  f7fffffe          BL       __aeabi_f2d
00105e  4605              MOV      r5,r0
001060  460e              MOV      r6,r1
001062  4865              LDR      r0,|L1.4600|
001064  6800              LDR      r0,[r0,#0]  ; control_value
001066  f7fffffe          BL       __aeabi_f2d
00106a  4607              MOV      r7,r0
00106c  460b              MOV      r3,r1
00106e  485e              LDR      r0,|L1.4584|
001070  8800              LDRH     r0,[r0,#0]  ; press0_value_min
001072  495b              LDR      r1,|L1.4576|
001074  f9b11000          LDRSH    r1,[r1,#0]  ; flow_sensor_value
001078  463a              MOV      r2,r7
00107a  e9cd5600          STRD     r5,r6,[sp,#0]
00107e  e9cd1402          STRD     r1,r4,[sp,#8]
001082  9004              STR      r0,[sp,#0x10]
001084  495e              LDR      r1,|L1.4608|
001086  2002              MOVS     r0,#2
001088  f7fffffe          BL       uart_printf
;;;571    	 control_value,step_value_pulse ,flow_sensor_value,target_value,press0_value_min);
;;;572    }
00108c  b006              ADD      sp,sp,#0x18
00108e  e8bd87f0          POP      {r4-r10,pc}
;;;573    
                          ENDP

                  Control_The_Frequency_Pulse_2 PROC
;;;574    void Control_The_Frequency_Pulse_2(uint16_t foc_value,uint8_t target_value)
001092  e92d47f0          PUSH     {r4-r10,lr}
;;;575    {
001096  b086              SUB      sp,sp,#0x18
001098  4682              MOV      r10,r0
00109a  460c              MOV      r4,r1
;;;576    	 static float control_value = 0;
;;;577    	 static uint8_t last_target_value = 0;//control_count = 0
;;;578    	 float step_value_pulse = 0;
00109c  f04f0900          MOV      r9,#0
;;;579    	
;;;580    	 if(last_target_value != target_value) // 更换锁定频率后，重新载入油门值
0010a0  4858              LDR      r0,|L1.4612|
0010a2  7800              LDRB     r0,[r0,#0]  ; last_target_value
0010a4  42a0              CMP      r0,r4
0010a6  d004              BEQ      |L1.4274|
;;;581    		 control_value = foc_value;
0010a8  4650              MOV      r0,r10
0010aa  f7fffffe          BL       __aeabi_ui2f
0010ae  4956              LDR      r1,|L1.4616|
0010b0  6008              STR      r0,[r1,#0]  ; control_value
                  |L1.4274|
;;;582    	 
;;;583    
;;;584    	 if(abs(target_value - get_cali_flow_freq()) > 2 && (get_cali_flow_freq() > (target_value - 8)))//如果脉冲数差太多则停止校准
0010b2  f7fffffe          BL       get_cali_flow_freq
0010b6  1a25              SUBS     r5,r4,r0
0010b8  2d00              CMP      r5,#0
0010ba  db01              BLT      |L1.4288|
0010bc  4628              MOV      r0,r5
0010be  e000              B        |L1.4290|
                  |L1.4288|
0010c0  4268              RSBS     r0,r5,#0
                  |L1.4290|
0010c2  2802              CMP      r0,#2
0010c4  dd10              BLE      |L1.4328|
0010c6  f7fffffe          BL       get_cali_flow_freq
0010ca  f1a40108          SUB      r1,r4,#8
0010ce  4288              CMP      r0,r1
0010d0  dd0a              BLE      |L1.4328|
;;;585    		 step_value_pulse = (float)P_FREQ*(target_value - get_cali_flow_freq());
0010d2  f7fffffe          BL       get_cali_flow_freq
0010d6  1a26              SUBS     r6,r4,r0
0010d8  4630              MOV      r0,r6
0010da  f7fffffe          BL       __aeabi_i2f
0010de  4605              MOV      r5,r0
0010e0  4946              LDR      r1,|L1.4604|
0010e2  f7fffffe          BL       __aeabi_fmul
0010e6  4681              MOV      r9,r0
                  |L1.4328|
;;;586    	 
;;;587    	 control_value += step_value_pulse;
0010e8  4649              MOV      r1,r9
0010ea  4847              LDR      r0,|L1.4616|
0010ec  6800              LDR      r0,[r0,#0]  ; control_value
0010ee  f7fffffe          BL       __aeabi_fadd
0010f2  4945              LDR      r1,|L1.4616|
0010f4  6008              STR      r0,[r1,#0]  ; control_value
;;;588    	 
;;;589    	 Set_Throttle_Value_2(control_value);
0010f6  4608              MOV      r0,r1
0010f8  6800              LDR      r0,[r0,#0]  ; control_value
0010fa  f7fffffe          BL       __aeabi_f2uiz
0010fe  b285              UXTH     r5,r0
001100  4628              MOV      r0,r5
001102  f7fffffe          BL       Set_Throttle_Value_2
;;;590    	 last_target_value = target_value;
001106  483f              LDR      r0,|L1.4612|
001108  7004              STRB     r4,[r0,#0]
;;;591    	 uart_printf( 2, "control_value_2 = %.2f  step_value_pulse_2 = %.2f idx_7_freq = %d  target_value_2 = %d  press1_value_min_2 = %d  \r\n",
00110a  4648              MOV      r0,r9
00110c  f7fffffe          BL       __aeabi_f2d
001110  4605              MOV      r5,r0
001112  460e              MOV      r6,r1
001114  483c              LDR      r0,|L1.4616|
001116  6800              LDR      r0,[r0,#0]  ; control_value
001118  f7fffffe          BL       __aeabi_f2d
00111c  4607              MOV      r7,r0
00111e  460b              MOV      r3,r1
001120  4832              LDR      r0,|L1.4588|
001122  8800              LDRH     r0,[r0,#0]  ; press1_value_min
001124  492e              LDR      r1,|L1.4576|
001126  f9b11000          LDRSH    r1,[r1,#0]  ; flow_sensor_value
00112a  463a              MOV      r2,r7
00112c  e9cd5600          STRD     r5,r6,[sp,#0]
001130  e9cd1402          STRD     r1,r4,[sp,#8]
001134  9004              STR      r0,[sp,#0x10]
001136  4935              LDR      r1,|L1.4620|
001138  2002              MOVS     r0,#2
00113a  f7fffffe          BL       uart_printf
;;;592    	 control_value,step_value_pulse ,flow_sensor_value,target_value,press1_value_min);
;;;593    }
00113e  b006              ADD      sp,sp,#0x18
001140  e8bd87f0          POP      {r4-r10,pc}
;;;594    
                          ENDP

                  Set_Spary_Limit_Value PROC
;;;1285   uint16_t FOC2_MAX_SPRAY_Speed,FOC2_MIN_SPRAY_Speed;
;;;1286   void Set_Spary_Limit_Value(uint8_t foc_id,uint8_t value_id ,uint16_t value)
001144  2801              CMP      r0,#1
;;;1287   {
;;;1288   	if(foc_id == FOC_1)
001146  d107              BNE      |L1.4440|
;;;1289   		if(value_id == MAX_SPRAY_ID)
001148  2901              CMP      r1,#1
00114a  d102              BNE      |L1.4434|
;;;1290   			FOC1_MAX_SPRAY_Speed = value;
00114c  4b30              LDR      r3,|L1.4624|
00114e  801a              STRH     r2,[r3,#0]
001150  e009              B        |L1.4454|
                  |L1.4434|
;;;1291   		else
;;;1292   			FOC1_MIN_SPRAY_Speed = value;
001152  4b30              LDR      r3,|L1.4628|
001154  801a              STRH     r2,[r3,#0]
001156  e006              B        |L1.4454|
                  |L1.4440|
;;;1293   	else
;;;1294   		if(value_id == MAX_SPRAY_ID)
001158  2901              CMP      r1,#1
00115a  d102              BNE      |L1.4450|
;;;1295   			FOC2_MAX_SPRAY_Speed = value;
00115c  4b2e              LDR      r3,|L1.4632|
00115e  801a              STRH     r2,[r3,#0]
001160  e001              B        |L1.4454|
                  |L1.4450|
;;;1296   		else
;;;1297   			FOC2_MIN_SPRAY_Speed = value;
001162  4b2e              LDR      r3,|L1.4636|
001164  801a              STRH     r2,[r3,#0]
                  |L1.4454|
;;;1298   }
001166  4770              BX       lr
;;;1299   
                          ENDP

                  spray_system_press_para_init_check PROC
;;;597    #define DEFAULT_FOC_VALUE 1210
;;;598    void spray_system_press_para_init_check(void)
001168  b510              PUSH     {r4,lr}
;;;599    {
;;;600    	 cali_pressure1_para_read_flash((uint8_t*)&spray_system_pressure_cali_para_1,sizeof(spray_system_pressure_cali_para_t));
00116a  210a              MOVS     r1,#0xa
00116c  482c              LDR      r0,|L1.4640|
00116e  f7fffffe          BL       cali_pressure1_para_read_flash
;;;601    	 cali_pressure2_para_read_flash((uint8_t*)&spray_system_pressure_cali_para_2,sizeof(spray_system_pressure_cali_para_t));
001172  210a              MOVS     r1,#0xa
001174  482b              LDR      r0,|L1.4644|
001176  f7fffffe          BL       cali_pressure2_para_read_flash
;;;602    	 if(  spray_system_pressure_cali_para_1.save_flag == Data_Exists_Flag
00117a  4829              LDR      r0,|L1.4640|
00117c  7800              LDRB     r0,[r0,#0]  ; spray_system_pressure_cali_para_1
00117e  2855              CMP      r0,#0x55
001180  d15d              BNE      |L1.4670|
;;;603    			  &&spray_system_pressure_cali_para_1.throttle_value_min <=  spray_system_pressure_cali_para_1.throttle_value_default
001182  4827              LDR      r0,|L1.4640|
001184  8840              LDRH     r0,[r0,#2]  ; spray_system_pressure_cali_para_1
001186  4926              LDR      r1,|L1.4640|
001188  8889              LDRH     r1,[r1,#4]  ; spray_system_pressure_cali_para_1
00118a  4288              CMP      r0,r1
00118c  dc57              BGT      |L1.4670|
;;;604    		    && spray_system_pressure_cali_para_1.throttle_value_default <=  spray_system_pressure_cali_para_1.throttle_value_max
00118e  4824              LDR      r0,|L1.4640|
001190  8880              LDRH     r0,[r0,#4]  ; spray_system_pressure_cali_para_1
001192  4923              LDR      r1,|L1.4640|
001194  88c9              LDRH     r1,[r1,#6]  ; spray_system_pressure_cali_para_1
001196  4288              CMP      r0,r1
001198  dc51              BGT      |L1.4670|
;;;605    		    && spray_system_pressure_cali_para_1.throttle_value_min > DEFAULT_FOC_VALUE - 50
00119a  4821              LDR      r0,|L1.4640|
00119c  8840              LDRH     r0,[r0,#2]  ; spray_system_pressure_cali_para_1
00119e  f5b06f91          CMP      r0,#0x488
0011a2  e041              B        |L1.4648|
                  |L1.4516|
                          DCD      |symbol_number.54|
                  |L1.4520|
                          DCD      0x47ae147b
                  |L1.4524|
                          DCD      0x3f947ae1
                  |L1.4528|
                          DCD      control_freq_2
                  |L1.4532|
                          DCD      0x3ca3d70a
                  |L1.4536|
                          DCD      0x42700000
                  |L1.4540|
                          DCD      target_capa_debug
                  |L1.4544|
                          DCD      last_status_2
                  |L1.4548|
                          DCD      0x3fe00000
                  |L1.4552|
                          DCD      0x3ff00000
                  |L1.4556|
                          DCD      0x41200000
                  |L1.4560|
                          DCD      0xc1200000
                  |L1.4564|
                          DCD      start_flag
                  |L1.4568|
                          DCD      0x42c80000
                  |L1.4572|
                          DCD      current_capacity_total
                  |L1.4576|
                          DCD      flow_sensor_value
                  |L1.4580|
                          DCD      ||.conststring||+0xdc
                  |L1.4584|
                          DCD      press0_value_min
                  |L1.4588|
                          DCD      press1_value_min
                  |L1.4592|
                          DCD      last_flow_2
                  |L1.4596|
                          DCD      last_target_value
                  |L1.4600|
                          DCD      control_value
                  |L1.4604|
                          DCD      0x3f19999a
                  |L1.4608|
                          DCD      ||.conststring||+0x140
                  |L1.4612|
                          DCD      |symbol_number.62|
                  |L1.4616|
                          DCD      |symbol_number.61|
                  |L1.4620|
                          DCD      ||.conststring||+0x1b4
                  |L1.4624|
                          DCD      FOC1_MAX_SPRAY_Speed
                  |L1.4628|
                          DCD      FOC1_MIN_SPRAY_Speed
                  |L1.4632|
                          DCD      FOC2_MAX_SPRAY_Speed
                  |L1.4636|
                          DCD      FOC2_MIN_SPRAY_Speed
                  |L1.4640|
                          DCD      spray_system_pressure_cali_para_1
                  |L1.4644|
                          DCD      spray_system_pressure_cali_para_2
                  |L1.4648|
001228  dd09              BLE      |L1.4670|
;;;606    		    && spray_system_pressure_cali_para_1.throttle_value_max < MAX_CNT - 200)
00122a  48f7              LDR      r0,|L1.5640|
00122c  88c0              LDRH     r0,[r0,#6]  ; spray_system_pressure_cali_para_1
00122e  f5b06fe1          CMP      r0,#0x708
001232  da04              BGE      |L1.4670|
;;;607    		{
;;;608    		  uart_printf( 2 ,"spray_system_press1_para_init_check_pass \r\n");                     
001234  a1f5              ADR      r1,|L1.5644|
001236  2002              MOVS     r0,#2
001238  f7fffffe          BL       uart_printf
00123c  e017              B        |L1.4718|
                  |L1.4670|
;;;609    		}
;;;610    		else
;;;611    		{	
;;;612    			spray_system_pressure_cali_para_1.save_flag = Data_Exists_Flag;//参数异常 恢复默认参数 重新校准
00123e  2055              MOVS     r0,#0x55
001240  49f1              LDR      r1,|L1.5640|
001242  7008              STRB     r0,[r1,#0]
;;;613    			spray_system_pressure_cali_para_1.need_cali_flag = 1;
001244  2001              MOVS     r0,#1
001246  7048              STRB     r0,[r1,#1]
;;;614    		  spray_system_pressure_cali_para_1.throttle_value_min = DEFAULT_FOC_VALUE;
001248  f24040ba          MOV      r0,#0x4ba
00124c  8048              STRH     r0,[r1,#2]
;;;615    			spray_system_pressure_cali_para_1.throttle_value_default = DEFAULT_FOC_VALUE + 30;
00124e  f44f609b          MOV      r0,#0x4d8
001252  8088              STRH     r0,[r1,#4]
;;;616    			spray_system_pressure_cali_para_1.throttle_value_max = DEFAULT_FOC_VALUE + 60;
001254  f24040f6          MOV      r0,#0x4f6
001258  80c8              STRH     r0,[r1,#6]
;;;617    			spray_system_pressure_cali_para_1.pressure_user = 0xaa;
00125a  20aa              MOVS     r0,#0xaa
00125c  8108              STRH     r0,[r1,#8]
;;;618    			cali_pressure1_para_write_flash((uint8_t*)&spray_system_pressure_cali_para_1,sizeof(spray_system_pressure_cali_para_t));
00125e  210a              MOVS     r1,#0xa
001260  48e9              LDR      r0,|L1.5640|
001262  f7fffffe          BL       cali_pressure1_para_write_flash
;;;619    			uart_printf( 2 ,"spray_system_press1_para_init_check_fail \r\n");
001266  a1f4              ADR      r1,|L1.5688|
001268  2002              MOVS     r0,#2
00126a  f7fffffe          BL       uart_printf
                  |L1.4718|
;;;620    		}		
;;;621    		
;;;622    		
;;;623    		if( spray_system_pressure_cali_para_2.save_flag == Data_Exists_Flag
00126e  48fd              LDR      r0,|L1.5732|
001270  7800              LDRB     r0,[r0,#0]  ; spray_system_pressure_cali_para_2
001272  2855              CMP      r0,#0x55
001274  d11a              BNE      |L1.4780|
;;;624    			  &&spray_system_pressure_cali_para_2.throttle_value_min <=  spray_system_pressure_cali_para_2.throttle_value_default
001276  48fb              LDR      r0,|L1.5732|
001278  8840              LDRH     r0,[r0,#2]  ; spray_system_pressure_cali_para_2
00127a  49fa              LDR      r1,|L1.5732|
00127c  8889              LDRH     r1,[r1,#4]  ; spray_system_pressure_cali_para_2
00127e  4288              CMP      r0,r1
001280  dc14              BGT      |L1.4780|
;;;625    		    && spray_system_pressure_cali_para_2.throttle_value_default <=  spray_system_pressure_cali_para_2.throttle_value_max
001282  48f8              LDR      r0,|L1.5732|
001284  8880              LDRH     r0,[r0,#4]  ; spray_system_pressure_cali_para_2
001286  49f7              LDR      r1,|L1.5732|
001288  88c9              LDRH     r1,[r1,#6]  ; spray_system_pressure_cali_para_2
00128a  4288              CMP      r0,r1
00128c  dc0e              BGT      |L1.4780|
;;;626    		    && spray_system_pressure_cali_para_2.throttle_value_min > DEFAULT_FOC_VALUE - 50
00128e  48f5              LDR      r0,|L1.5732|
001290  8840              LDRH     r0,[r0,#2]  ; spray_system_pressure_cali_para_2
001292  f5b06f91          CMP      r0,#0x488
001296  dd09              BLE      |L1.4780|
;;;627    		    && spray_system_pressure_cali_para_2.throttle_value_max < MAX_CNT - 200)
001298  48f2              LDR      r0,|L1.5732|
00129a  88c0              LDRH     r0,[r0,#6]  ; spray_system_pressure_cali_para_2
00129c  f5b06fe1          CMP      r0,#0x708
0012a0  da04              BGE      |L1.4780|
;;;628    		{
;;;629    		  uart_printf( 2 ,"spray_system_press2_para_init_check_pass \r\n");                     
0012a2  a1f1              ADR      r1,|L1.5736|
0012a4  2002              MOVS     r0,#2
0012a6  f7fffffe          BL       uart_printf
0012aa  e017              B        |L1.4828|
                  |L1.4780|
;;;630    		}
;;;631    		else
;;;632    		{	
;;;633    			spray_system_pressure_cali_para_2.save_flag = Data_Exists_Flag;//参数异常 恢复默认参数 重新校准
0012ac  2055              MOVS     r0,#0x55
0012ae  49ed              LDR      r1,|L1.5732|
0012b0  7008              STRB     r0,[r1,#0]
;;;634    			spray_system_pressure_cali_para_2.need_cali_flag = 1;
0012b2  2001              MOVS     r0,#1
0012b4  7048              STRB     r0,[r1,#1]
;;;635    		  spray_system_pressure_cali_para_2.throttle_value_min = DEFAULT_FOC_VALUE;
0012b6  f24040ba          MOV      r0,#0x4ba
0012ba  8048              STRH     r0,[r1,#2]
;;;636    			spray_system_pressure_cali_para_2.throttle_value_default = DEFAULT_FOC_VALUE + 30;
0012bc  f44f609b          MOV      r0,#0x4d8
0012c0  8088              STRH     r0,[r1,#4]
;;;637    			spray_system_pressure_cali_para_2.throttle_value_max = DEFAULT_FOC_VALUE + 60;
0012c2  f24040f6          MOV      r0,#0x4f6
0012c6  80c8              STRH     r0,[r1,#6]
;;;638    			spray_system_pressure_cali_para_2.pressure_user = 0xaa;
0012c8  20aa              MOVS     r0,#0xaa
0012ca  8108              STRH     r0,[r1,#8]
;;;639    			cali_pressure2_para_write_flash((uint8_t*)&spray_system_pressure_cali_para_2,sizeof(spray_system_pressure_cali_para_t));
0012cc  210a              MOVS     r1,#0xa
0012ce  48e5              LDR      r0,|L1.5732|
0012d0  f7fffffe          BL       cali_pressure2_para_write_flash
;;;640    			uart_printf( 2 ,"spray_system_press2_para_init_check_fail \r\n");
0012d4  a1ef              ADR      r1,|L1.5780|
0012d6  2002              MOVS     r0,#2
0012d8  f7fffffe          BL       uart_printf
                  |L1.4828|
;;;641    		}	
;;;642    		Set_Spary_Limit_Value(FOC_1,MAX_SPRAY_ID,spray_system_pressure_cali_para_1.throttle_value_max);	
0012dc  48ca              LDR      r0,|L1.5640|
0012de  88c2              LDRH     r2,[r0,#6]  ; spray_system_pressure_cali_para_1
0012e0  2101              MOVS     r1,#1
0012e2  4608              MOV      r0,r1
0012e4  f7fffffe          BL       Set_Spary_Limit_Value
;;;643    		Set_Spary_Limit_Value(FOC_1,MIN_SPRAY_ID,spray_system_pressure_cali_para_1.throttle_value_min);	
0012e8  48c7              LDR      r0,|L1.5640|
0012ea  8842              LDRH     r2,[r0,#2]  ; spray_system_pressure_cali_para_1
0012ec  2102              MOVS     r1,#2
0012ee  2001              MOVS     r0,#1
0012f0  f7fffffe          BL       Set_Spary_Limit_Value
;;;644    		
;;;645    		Set_Spary_Limit_Value(FOC_2,MAX_SPRAY_ID,spray_system_pressure_cali_para_2.throttle_value_max);	
0012f4  48db              LDR      r0,|L1.5732|
0012f6  88c2              LDRH     r2,[r0,#6]  ; spray_system_pressure_cali_para_2
0012f8  2101              MOVS     r1,#1
0012fa  2002              MOVS     r0,#2
0012fc  f7fffffe          BL       Set_Spary_Limit_Value
;;;646    		Set_Spary_Limit_Value(FOC_2,MIN_SPRAY_ID,spray_system_pressure_cali_para_2.throttle_value_min);	
001300  48d8              LDR      r0,|L1.5732|
001302  8842              LDRH     r2,[r0,#2]  ; spray_system_pressure_cali_para_2
001304  2102              MOVS     r1,#2
001306  4608              MOV      r0,r1
001308  f7fffffe          BL       Set_Spary_Limit_Value
;;;647    }
00130c  bd10              POP      {r4,pc}
;;;648    
                          ENDP

                  set_cali_capaciy PROC
;;;650    
;;;651    void set_cali_capaciy(uint16_t value)
00130e  f5a07116          SUB      r1,r0,#0x258
;;;652    {
;;;653      spray_system_flow_cali_para1.capacity = value - 600;// 600ml 默认触发液位开关
001312  4aeb              LDR      r2,|L1.5824|
001314  8051              STRH     r1,[r2,#2]
;;;654    }
001316  4770              BX       lr
;;;655    
                          ENDP

                  spray_sysem_flow_para_init_check PROC
;;;656    void spray_sysem_flow_para_init_check(void)
001318  b570              PUSH     {r4-r6,lr}
;;;657    {
;;;658      cali_flow_para1_read_flash((uint8_t*)&spray_system_flow_cali_para1,sizeof(spray_system_flow_cali_para_t));
00131a  210c              MOVS     r1,#0xc
00131c  48e8              LDR      r0,|L1.5824|
00131e  f7fffffe          BL       cali_flow_para1_read_flash
;;;659      if(spray_system_flow_cali_para1.save_flag == Data_Exists_Flag
001322  48e7              LDR      r0,|L1.5824|
001324  7800              LDRB     r0,[r0,#0]  ; spray_system_flow_cali_para1
001326  2855              CMP      r0,#0x55
001328  d12a              BNE      |L1.4992|
;;;660    	  &&spray_system_flow_cali_para1.capacity <= 10000
00132a  48e5              LDR      r0,|L1.5824|
00132c  8840              LDRH     r0,[r0,#2]  ; spray_system_flow_cali_para1
00132e  f2427110          MOV      r1,#0x2710
001332  4288              CMP      r0,r1
001334  dc24              BGT      |L1.4992|
;;;661    	  &&spray_system_flow_cali_para1.capacity >= 3000
001336  48e2              LDR      r0,|L1.5824|
001338  8840              LDRH     r0,[r0,#2]  ; spray_system_flow_cali_para1
00133a  f64031b8          MOV      r1,#0xbb8
00133e  4288              CMP      r0,r1
001340  db1e              BLT      |L1.4992|
;;;662    	  &&spray_system_flow_cali_para1.cali_pulses < 100000
001342  48df              LDR      r0,|L1.5824|
001344  6840              LDR      r0,[r0,#4]  ; spray_system_flow_cali_para1
001346  49df              LDR      r1,|L1.5828|
001348  4288              CMP      r0,r1
00134a  d219              BCS      |L1.4992|
;;;663        &&spray_system_flow_cali_para1.cali_pulses > 100  
00134c  48dc              LDR      r0,|L1.5824|
00134e  6840              LDR      r0,[r0,#4]  ; spray_system_flow_cali_para1
001350  2864              CMP      r0,#0x64
001352  d915              BLS      |L1.4992|
;;;664        &&spray_system_flow_cali_para1.cali_time < 1000*60*20 // 20 min
001354  48da              LDR      r0,|L1.5824|
001356  6880              LDR      r0,[r0,#8]  ; spray_system_flow_cali_para1
001358  49db              LDR      r1,|L1.5832|
00135a  4288              CMP      r0,r1
00135c  d210              BCS      |L1.4992|
;;;665        &&spray_system_flow_cali_para1.cali_time > 1000*60 )  //  1 min 
00135e  48d8              LDR      r0,|L1.5824|
001360  6880              LDR      r0,[r0,#8]  ; spray_system_flow_cali_para1
001362  f64e2160          MOV      r1,#0xea60
001366  4288              CMP      r0,r1
001368  d90a              BLS      |L1.4992|
;;;666      {
;;;667         uart_printf( 2 ,"*************flow1_spray_system_cali_para_check_pass \r\n");
00136a  a1d8              ADR      r1,|L1.5836|
00136c  2002              MOVS     r0,#2
00136e  f7fffffe          BL       uart_printf
;;;668    		 Cali_Freq =  spray_system_flow_cali_para1.cali_freq;//(float)spray_system_flow_cali_para1.cali_pulses*1000/(float)spray_system_flow_cali_para1.cali_time;
001372  49d3              LDR      r1,|L1.5824|
001374  7848              LDRB     r0,[r1,#1]  ; spray_system_flow_cali_para1
001376  f7fffffe          BL       __aeabi_ui2f
00137a  49e2              LDR      r1,|L1.5892|
00137c  6008              STR      r0,[r1,#0]  ; Cali_Freq
00137e  e00f              B        |L1.5024|
                  |L1.4992|
;;;669    	}
;;;670    	else
;;;671    	{
;;;672    	   spray_system_flow_cali_para1.save_flag = Data_Exists_Flag;
001380  2055              MOVS     r0,#0x55
001382  49cf              LDR      r1,|L1.5824|
001384  7008              STRB     r0,[r1,#0]
;;;673    		 spray_system_flow_cali_para1.cali_pulses = 14692;
001386  f6431064          MOV      r0,#0x3964
00138a  6048              STR      r0,[r1,#4]  ; spray_system_flow_cali_para1
;;;674    		 spray_system_flow_cali_para1.capacity = 7350;
00138c  f64140b6          MOV      r0,#0x1cb6
001390  8048              STRH     r0,[r1,#2]
;;;675    		 Cali_Freq = 60; // 默认是水的参数
001392  48dd              LDR      r0,|L1.5896|
001394  49db              LDR      r1,|L1.5892|
001396  6008              STR      r0,[r1,#0]  ; Cali_Freq
;;;676    	   uart_printf( 2 ,"*************flow1_spray_system_cali_para_check_fail \r\n");
001398  a1dc              ADR      r1,|L1.5900|
00139a  2002              MOVS     r0,#2
00139c  f7fffffe          BL       uart_printf
                  |L1.5024|
;;;677    	}
;;;678       user_volume =  (float)spray_system_flow_cali_para1.capacity/(float)(spray_system_flow_cali_para1.cali_pulses);
0013a0  49c7              LDR      r1,|L1.5824|
0013a2  6848              LDR      r0,[r1,#4]  ; spray_system_flow_cali_para1
0013a4  f7fffffe          BL       __aeabi_ui2f
0013a8  4604              MOV      r4,r0
0013aa  49c5              LDR      r1,|L1.5824|
0013ac  8848              LDRH     r0,[r1,#2]  ; spray_system_flow_cali_para1
0013ae  f7fffffe          BL       __aeabi_ui2f
0013b2  4605              MOV      r5,r0
0013b4  4621              MOV      r1,r4
0013b6  f7fffffe          BL       __aeabi_fdiv
0013ba  49e2              LDR      r1,|L1.5956|
0013bc  6008              STR      r0,[r1,#0]  ; user_volume
;;;679    	 Set_Volume_Each_Pulse(user_volume);
0013be  4608              MOV      r0,r1
0013c0  6800              LDR      r0,[r0,#0]  ; user_volume
0013c2  f7fffffe          BL       Set_Volume_Each_Pulse
;;;680    }
0013c6  bd70              POP      {r4-r6,pc}
;;;681    
                          ENDP

                  spray_residual_volume_init_check PROC
;;;682    
;;;683    void spray_residual_volume_init_check(void)
0013c8  b508              PUSH     {r3,lr}
;;;684    {
;;;685    	 uint8_t buf[1] = {0}; // 1 
0013ca  2000              MOVS     r0,#0
0013cc  9000              STR      r0,[sp,#0]
;;;686    	 cali_volume_para_read_flash(buf, 1); 
0013ce  2101              MOVS     r1,#1
0013d0  4668              MOV      r0,sp
0013d2  f7fffffe          BL       cali_volume_para_read_flash
;;;687    	 
;;;688    	 if(buf[0] == 0xff)
0013d6  f89d0000          LDRB     r0,[sp,#0]
0013da  28ff              CMP      r0,#0xff
0013dc  d103              BNE      |L1.5094|
;;;689         set_residual_volume_warning_mode(Small_Liquid); 
0013de  2001              MOVS     r0,#1
0013e0  f7fffffe          BL       set_residual_volume_warning_mode
0013e4  e003              B        |L1.5102|
                  |L1.5094|
;;;690    	 else
;;;691    		 set_residual_volume_warning_mode(buf[0]);
0013e6  f89d0000          LDRB     r0,[sp,#0]
0013ea  f7fffffe          BL       set_residual_volume_warning_mode
                  |L1.5102|
;;;692    }
0013ee  bd08              POP      {r3,pc}
;;;693    
                          ENDP

                  set_flow_cali_flag PROC
;;;701    uint8_t flow1_cali_compled_flag,flow2_cali_compled_flag;
;;;702    void set_flow_cali_flag(uint8_t state)
0013f0  49d5              LDR      r1,|L1.5960|
;;;703    {
;;;704    	flow_cali_enbale_flag = state;
0013f2  7008              STRB     r0,[r1,#0]
;;;705    }
0013f4  4770              BX       lr
;;;706    uint8_t debug_flow1_ss;
                          ENDP

                  get_press_value PROC
;;;1074   
;;;1075   uint16_t get_press_value(uint8_t id)
0013f6  4601              MOV      r1,r0
;;;1076   {
;;;1077     if(id == Press_Sensor_0)
0013f8  b911              CBNZ     r1,|L1.5120|
;;;1078      return press0_value_min;
0013fa  48d4              LDR      r0,|L1.5964|
0013fc  8800              LDRH     r0,[r0,#0]  ; press0_value_min
                  |L1.5118|
;;;1079   	if(id == Press_Sensor_1)
;;;1080   	 return press1_value_min;
;;;1081   	return 0;
;;;1082   }
0013fe  4770              BX       lr
                  |L1.5120|
001400  2901              CMP      r1,#1                 ;1079
001402  d102              BNE      |L1.5130|
001404  48d2              LDR      r0,|L1.5968|
001406  8800              LDRH     r0,[r0,#0]            ;1080  ; press1_value_min
001408  e7f9              B        |L1.5118|
                  |L1.5130|
00140a  2000              MOVS     r0,#0                 ;1081
00140c  e7f7              B        |L1.5118|
;;;1083   
                          ENDP

                  Set_FOC1_Value_By_Pressure0 PROC
;;;1133   
;;;1134   uint16_t Set_FOC1_Value_By_Pressure0(uint16_t start_foc_value ,uint16_t target_pressure_value) 
00140e  e92d47f0          PUSH     {r4-r10,lr}
;;;1135   {
001412  b086              SUB      sp,sp,#0x18
001414  4681              MOV      r9,r0
001416  460c              MOV      r4,r1
;;;1136   	static uint16_t target_pressure_value_last = 0,Last_Press_Sensor_0 = 0;
;;;1137   	static float step_value_1 = 0,step_value_last_1 = 0; 
;;;1138   	static uint16_t calibration_value = 0;
;;;1139   
;;;1140   	if(target_pressure_value != target_pressure_value_last)// for debug
001418  48ce              LDR      r0,|L1.5972|
00141a  8800              LDRH     r0,[r0,#0]  ; target_pressure_value_last
00141c  4284              CMP      r4,r0
00141e  d009              BEQ      |L1.5172|
;;;1141   	{
;;;1142   	  set_count_1 = 0;
001420  2000              MOVS     r0,#0
001422  49cd              LDR      r1,|L1.5976|
001424  8008              STRH     r0,[r1,#0]
;;;1143   		run_foc_count_1 = 0;
001426  49cd              LDR      r1,|L1.5980|
001428  7008              STRB     r0,[r1,#0]
;;;1144   		foc_value_1 = start_foc_value; //每次改变目标压力时，重新载入开始的油门值
00142a  4648              MOV      r0,r9
00142c  f7fffffe          BL       __aeabi_ui2f
001430  49cb              LDR      r1,|L1.5984|
001432  6008              STR      r0,[r1,#0]  ; foc_value_1
                  |L1.5172|
;;;1145   	}
;;;1146   	
;;;1147   	if(set_count_1 < 7) // 1s
001434  48c8              LDR      r0,|L1.5976|
001436  8800              LDRH     r0,[r0,#0]  ; set_count_1
001438  2807              CMP      r0,#7
00143a  da7d              BGE      |L1.5432|
;;;1148   	{
;;;1149   		if(get_press_value(Press_Sensor_0) >= target_pressure_value - DEAD_ZONE 
00143c  2000              MOVS     r0,#0
00143e  f7fffffe          BL       get_press_value
001442  f1a4011e          SUB      r1,r4,#0x1e
001446  4288              CMP      r0,r1
001448  db0c              BLT      |L1.5220|
;;;1150          && get_press_value(Press_Sensor_0) <= target_pressure_value + DEAD_ZONE )
00144a  2000              MOVS     r0,#0
00144c  f7fffffe          BL       get_press_value
001450  f104011e          ADD      r1,r4,#0x1e
001454  4288              CMP      r0,r1
001456  dc05              BGT      |L1.5220|
;;;1151   		{
;;;1152   			set_count_1++;			// 在此稳定1秒钟，则得到一个值就以此为准                     
001458  48bf              LDR      r0,|L1.5976|
00145a  8800              LDRH     r0,[r0,#0]  ; set_count_1
00145c  1c40              ADDS     r0,r0,#1
00145e  49be              LDR      r1,|L1.5976|
001460  8008              STRH     r0,[r1,#0]
001462  e05a              B        |L1.5402|
                  |L1.5220|
;;;1153   		}
;;;1154   		else
;;;1155   		{
;;;1156   		  run_foc_count_1++;
001464  48bd              LDR      r0,|L1.5980|
001466  7800              LDRB     r0,[r0,#0]  ; run_foc_count_1
001468  1c40              ADDS     r0,r0,#1
00146a  49bc              LDR      r1,|L1.5980|
00146c  7008              STRB     r0,[r1,#0]
;;;1157   			set_count_1 = 0;
00146e  2000              MOVS     r0,#0
001470  49b9              LDR      r1,|L1.5976|
001472  8008              STRH     r0,[r1,#0]
;;;1158   			step_value_1 = (target_pressure_value - get_press_value(Press_Sensor_0))*K_PRESSURE;
001474  f7fffffe          BL       get_press_value
001478  eba40a00          SUB      r10,r4,r0
00147c  4650              MOV      r0,r10
00147e  f7fffffe          BL       __aeabi_i2d
001482  4607              MOV      r7,r0
001484  4ab7              LDR      r2,|L1.5988|
001486  4bb8              LDR      r3,|L1.5992|
001488  f7fffffe          BL       __aeabi_dmul
00148c  4605              MOV      r5,r0
00148e  f7fffffe          BL       __aeabi_d2f
001492  49b6              LDR      r1,|L1.5996|
001494  6008              STR      r0,[r1,#0]  ; step_value_1
;;;1159   		  if( (Last_Press_Sensor_0 > get_press_value(Press_Sensor_0)) 
001496  2000              MOVS     r0,#0
001498  f7fffffe          BL       get_press_value
00149c  49b4              LDR      r1,|L1.6000|
00149e  8809              LDRH     r1,[r1,#0]  ; Last_Press_Sensor_0
0014a0  4288              CMP      r0,r1
0014a2  da09              BGE      |L1.5304|
;;;1160   		       &&(get_press_value(Press_Sensor_0)<= NORMAL_WROKING_ADC)) // 压力瞬间变小的异常处理
0014a4  2000              MOVS     r0,#0
0014a6  f7fffffe          BL       get_press_value
0014aa  f5b07f52          CMP      r0,#0x348
0014ae  dc03              BGT      |L1.5304|
;;;1161   				 step_value_1  = step_value_last_1;
0014b0  48b0              LDR      r0,|L1.6004|
0014b2  6800              LDR      r0,[r0,#0]  ; step_value_last_1
0014b4  49ad              LDR      r1,|L1.5996|
0014b6  6008              STR      r0,[r1,#0]  ; step_value_1
                  |L1.5304|
;;;1162   			
;;;1163   			if(step_value_1 < 1 && step_value_1 > 0)
0014b8  f04f517e          MOV      r1,#0x3f800000
0014bc  48ab              LDR      r0,|L1.5996|
0014be  6800              LDR      r0,[r0,#0]  ; step_value_1
0014c0  f7fffffe          BL       __aeabi_cfcmple
0014c4  d209              BCS      |L1.5338|
0014c6  2100              MOVS     r1,#0
0014c8  48a8              LDR      r0,|L1.5996|
0014ca  6800              LDR      r0,[r0,#0]  ; step_value_1
0014cc  f7fffffe          BL       __aeabi_cfrcmple
0014d0  d203              BCS      |L1.5338|
;;;1164   				step_value_1 = 1; 			
0014d2  f04f507e          MOV      r0,#0x3f800000
0014d6  49a5              LDR      r1,|L1.5996|
0014d8  6008              STR      r0,[r1,#0]  ; step_value_1
                  |L1.5338|
;;;1165   			if(step_value_1 < 0 && step_value_1 > -1)
0014da  2100              MOVS     r1,#0
0014dc  48a3              LDR      r0,|L1.5996|
0014de  6800              LDR      r0,[r0,#0]  ; step_value_1
0014e0  f7fffffe          BL       __aeabi_cfcmple
0014e4  d208              BCS      |L1.5368|
0014e6  49a4              LDR      r1,|L1.6008|
0014e8  48a0              LDR      r0,|L1.5996|
0014ea  6800              LDR      r0,[r0,#0]  ; step_value_1
0014ec  f7fffffe          BL       __aeabi_cfrcmple
0014f0  d202              BCS      |L1.5368|
;;;1166   				step_value_1 = -1; 		
0014f2  48a1              LDR      r0,|L1.6008|
0014f4  499d              LDR      r1,|L1.5996|
0014f6  6008              STR      r0,[r1,#0]  ; step_value_1
                  |L1.5368|
;;;1167   
;;;1168   			   if(step_value_1 > 15)// for debug 
0014f8  49a0              LDR      r1,|L1.6012|
0014fa  489c              LDR      r0,|L1.5996|
0014fc  6800              LDR      r0,[r0,#0]  ; step_value_1
0014fe  f7fffffe          BL       __aeabi_cfrcmple
001502  d202              BCS      |L1.5386|
;;;1169   					 step_value_1 = 15;
001504  489d              LDR      r0,|L1.6012|
001506  4999              LDR      r1,|L1.5996|
001508  6008              STR      r0,[r1,#0]  ; step_value_1
                  |L1.5386|
;;;1170   				 
;;;1171   			foc_value_1 += step_value_1;   // 控制频率需要降低 ，压力相应比较慢
00150a  4898              LDR      r0,|L1.5996|
00150c  6801              LDR      r1,[r0,#0]  ; step_value_1
00150e  4894              LDR      r0,|L1.5984|
001510  6800              LDR      r0,[r0,#0]  ; foc_value_1
001512  f7fffffe          BL       __aeabi_fadd
001516  4992              LDR      r1,|L1.5984|
001518  6008              STR      r0,[r1,#0]  ; foc_value_1
                  |L1.5402|
;;;1172   		}
;;;1173   		
;;;1174   		
;;;1175   		if(foc_value_1 >= User_Max_Throttle) // 大于这个值，还打不到目标值
00151a  4999              LDR      r1,|L1.6016|
00151c  4890              LDR      r0,|L1.5984|
00151e  6800              LDR      r0,[r0,#0]  ; foc_value_1
001520  f7fffffe          BL       __aeabi_cfrcmple
001524  d802              BHI      |L1.5420|
;;;1176   		{
;;;1177   			foc_value_1 = User_Max_Throttle - 400;
001526  4897              LDR      r0,|L1.6020|
001528  498d              LDR      r1,|L1.5984|
00152a  6008              STR      r0,[r1,#0]  ; foc_value_1
                  |L1.5420|
;;;1178   		}
;;;1179   		
;;;1180   		Set_Throttle_Value_1(foc_value_1); // 不需要实时控制 
00152c  488c              LDR      r0,|L1.5984|
00152e  6800              LDR      r0,[r0,#0]  ; foc_value_1
001530  f7fffffe          BL       __aeabi_f2uiz
001534  b285              UXTH     r5,r0
001536  e000              B        |L1.5434|
                  |L1.5432|
001538  e00e              B        |L1.5464|
                  |L1.5434|
00153a  4628              MOV      r0,r5
00153c  f7fffffe          BL       Set_Throttle_Value_1
;;;1181   		step_value_last_1 =  step_value_1;
001540  488a              LDR      r0,|L1.5996|
001542  6800              LDR      r0,[r0,#0]  ; step_value_1
001544  498b              LDR      r1,|L1.6004|
001546  6008              STR      r0,[r1,#0]  ; step_value_last_1
;;;1182   		target_pressure_value_last = target_pressure_value;
001548  4882              LDR      r0,|L1.5972|
00154a  8004              STRH     r4,[r0,#0]
;;;1183   		Last_Press_Sensor_0 = get_press_value(Press_Sensor_1);
00154c  2001              MOVS     r0,#1
00154e  f7fffffe          BL       get_press_value
001552  4987              LDR      r1,|L1.6000|
001554  8008              STRH     r0,[r1,#0]
001556  e009              B        |L1.5484|
                  |L1.5464|
;;;1184   	}
;;;1185   	else
;;;1186   	{
;;;1187   		calibration_value = get_foc_throttle_value(FOC_1);	
001558  2001              MOVS     r0,#1
00155a  f7fffffe          BL       get_foc_throttle_value
00155e  498a              LDR      r1,|L1.6024|
001560  8008              STRH     r0,[r1,#0]
;;;1188   		return calibration_value; //返回数值
001562  4608              MOV      r0,r1
001564  8800              LDRH     r0,[r0,#0]  ; calibration_value
                  |L1.5478|
;;;1189   	}
;;;1190   	uart_printf( 2 ,"target_pressure_value =%d \r\n", target_pressure_value);
;;;1191   	uart_printf( 2 ,"step_value = %.2f   run_foc_count = %d  set_count = %d   press0_value_min =  %d ,foc_value = %.2f \r\n",
;;;1192   	                 step_value_1,run_foc_count_1,set_count_1,press0_value_min,foc_value_1);
;;;1193   	uart_printf( 2, " \r\n");
;;;1194   	return MIN_CNT; // 返回最小值，表示正在标定
;;;1195   }
001566  b006              ADD      sp,sp,#0x18
001568  e8bd87f0          POP      {r4-r10,pc}
                  |L1.5484|
00156c  4622              MOV      r2,r4                 ;1190
00156e  a187              ADR      r1,|L1.6028|
001570  2002              MOVS     r0,#2                 ;1190
001572  f7fffffe          BL       uart_printf
001576  487a              LDR      r0,|L1.5984|
001578  6800              LDR      r0,[r0,#0]            ;1191  ; foc_value_1
00157a  f7fffffe          BL       __aeabi_f2d
00157e  4605              MOV      r5,r0                 ;1191
001580  460e              MOV      r6,r1                 ;1191
001582  487a              LDR      r0,|L1.5996|
001584  6800              LDR      r0,[r0,#0]            ;1191  ; step_value_1
001586  f7fffffe          BL       __aeabi_f2d
00158a  4607              MOV      r7,r0                 ;1191
00158c  460b              MOV      r3,r1                 ;1191
00158e  486f              LDR      r0,|L1.5964|
001590  e9cd5604          STRD     r5,r6,[sp,#0x10]      ;1191
001594  8800              LDRH     r0,[r0,#0]            ;1191  ; press0_value_min
001596  4970              LDR      r1,|L1.5976|
001598  8809              LDRH     r1,[r1,#0]            ;1191  ; set_count_1
00159a  4a70              LDR      r2,|L1.5980|
00159c  7812              LDRB     r2,[r2,#0]            ;1191  ; run_foc_count_1
00159e  e9cd2100          STRD     r2,r1,[sp,#0]         ;1191
0015a2  9002              STR      r0,[sp,#8]            ;1191
0015a4  463a              MOV      r2,r7                 ;1191
0015a6  4981              LDR      r1,|L1.6060|
0015a8  2002              MOVS     r0,#2                 ;1191
0015aa  f7fffffe          BL       uart_printf
0015ae  a121              ADR      r1,|L1.5684|
0015b0  2002              MOVS     r0,#2                 ;1193
0015b2  f7fffffe          BL       uart_printf
0015b6  f44f706b          MOV      r0,#0x3ac             ;1194
0015ba  e7d4              B        |L1.5478|
;;;1196   
                          ENDP

                  press0_cali_para_reset PROC
;;;1126   
;;;1127   void press0_cali_para_reset(void)
0015bc  2000              MOVS     r0,#0
;;;1128   {
;;;1129   	  set_count_1 = 0;
0015be  4966              LDR      r1,|L1.5976|
0015c0  8008              STRH     r0,[r1,#0]
;;;1130   		run_foc_count_1 = 0;
0015c2  4966              LDR      r1,|L1.5980|
0015c4  7008              STRB     r0,[r1,#0]
;;;1131       foc_value_1 = 1250;
0015c6  487a              LDR      r0,|L1.6064|
0015c8  4965              LDR      r1,|L1.5984|
0015ca  6008              STR      r0,[r1,#0]  ; foc_value_1
;;;1132   }
0015cc  4770              BX       lr
;;;1133   
                          ENDP

                  flow1_calibration_process PROC
;;;711    extern cmd_foc_ack_t  debug_stFOC_Value_1,debug_stFOC_Value_3;
;;;712    void flow1_calibration_process(void)
0015ce  b5fe              PUSH     {r1-r7,lr}
;;;713    {
;;;714    	 static uint8_t flow_cali_step = 0;
;;;715    	 static uint8_t freq_control_count = 0;
;;;716    	 static uint16_t switch_count = 0;
;;;717    	 static uint16_t flow_cali_value = MIN_CNT;
;;;718    	 freq_control_count++;
0015d0  4878              LDR      r0,|L1.6068|
0015d2  7800              LDRB     r0,[r0,#0]  ; freq_control_count
0015d4  1c40              ADDS     r0,r0,#1
0015d6  4977              LDR      r1,|L1.6068|
0015d8  7008              STRB     r0,[r1,#0]
;;;719    	// APP 触发进入校准流程
;;;720    	debug_flow1_ss  = flow_cali_step;
0015da  4877              LDR      r0,|L1.6072|
0015dc  7800              LDRB     r0,[r0,#0]  ; flow_cali_step
0015de  4977              LDR      r1,|L1.6076|
0015e0  7008              STRB     r0,[r1,#0]
;;;721       switch(flow_cali_step)
0015e2  4875              LDR      r0,|L1.6072|
0015e4  7800              LDRB     r0,[r0,#0]  ; flow_cali_step
0015e6  2806              CMP      r0,#6
0015e8  d20c              BCS      |L1.5636|
0015ea  e8dff000          TBB      [pc,r0]
0015ee  03fe              DCB      0x03,0xfe
0015f0  eeedeceb          DCB      0xee,0xed,0xec,0xeb
;;;722    	 {
;;;723    	   case 0:
;;;724    		      // if(飞控起飞，喷洒标志使能 ，则进行压力校准)	 
;;;725    		   if( flow_cali_enbale_flag == 1
0015f4  4854              LDR      r0,|L1.5960|
0015f6  7800              LDRB     r0,[r0,#0]  ; flow_cali_enbale_flag
0015f8  2801              CMP      r0,#1
0015fa  d104              BNE      |L1.5638|
;;;726    				   && FOC_1_STATUS.valid_spray == 1 
0015fc  4870              LDR      r0,|L1.6080|
0015fe  7840              LDRB     r0,[r0,#1]  ; FOC_1_STATUS
001600  2801              CMP      r0,#1
001602  e0e4              B        |L1.6094|
                  |L1.5636|
001604  e214              B        |L1.6704|
                  |L1.5638|
001606  e0ef              B        |L1.6120|
                  |L1.5640|
                          DCD      spray_system_pressure_cali_para_1
                  |L1.5644|
00160c  73707261          DCB      "spray_system_press1_para_init_check_pass"
001610  795f7379
001614  7374656d
001618  5f707265
00161c  7373315f
001620  70617261
001624  5f696e69
001628  745f6368
00162c  65636b5f
001630  70617373
                  |L1.5684|
001634  200d0a00          DCB      " \r\n",0
                  |L1.5688|
001638  73707261          DCB      "spray_system_press1_para_init_check_fail \r\n",0
00163c  795f7379
001640  7374656d
001644  5f707265
001648  7373315f
00164c  70617261
001650  5f696e69
001654  745f6368
001658  65636b5f
00165c  6661696c
001660  200d0a00
                  |L1.5732|
                          DCD      spray_system_pressure_cali_para_2
                  |L1.5736|
001668  73707261          DCB      "spray_system_press2_para_init_check_pass \r\n",0
00166c  795f7379
001670  7374656d
001674  5f707265
001678  7373325f
00167c  70617261
001680  5f696e69
001684  745f6368
001688  65636b5f
00168c  70617373
001690  200d0a00
                  |L1.5780|
001694  73707261          DCB      "spray_system_press2_para_init_check_fail \r\n",0
001698  795f7379
00169c  7374656d
0016a0  5f707265
0016a4  7373325f
0016a8  70617261
0016ac  5f696e69
0016b0  745f6368
0016b4  65636b5f
0016b8  6661696c
0016bc  200d0a00
                  |L1.5824|
                          DCD      spray_system_flow_cali_para1
                  |L1.5828|
                          DCD      0x000186a0
                  |L1.5832|
                          DCD      0x00124f80
                  |L1.5836|
0016cc  2a2a2a2a          DCB      "*************flow1_spray_system_cali_para_check_pass \r"
0016d0  2a2a2a2a
0016d4  2a2a2a2a
0016d8  2a666c6f
0016dc  77315f73
0016e0  70726179
0016e4  5f737973
0016e8  74656d5f
0016ec  63616c69
0016f0  5f706172
0016f4  615f6368
0016f8  65636b5f
0016fc  70617373
001700  200d    
001702  0a00              DCB      "\n",0
                  |L1.5892|
                          DCD      Cali_Freq
                  |L1.5896|
                          DCD      0x42700000
                  |L1.5900|
00170c  2a2a2a2a          DCB      "*************flow1_spray_system_cali_para_check_fail \r"
001710  2a2a2a2a
001714  2a2a2a2a
001718  2a666c6f
00171c  77315f73
001720  70726179
001724  5f737973
001728  74656d5f
00172c  63616c69
001730  5f706172
001734  615f6368
001738  65636b5f
00173c  6661696c
001740  200d    
001742  0a00              DCB      "\n",0
                  |L1.5956|
                          DCD      user_volume
                  |L1.5960|
                          DCD      flow_cali_enbale_flag
                  |L1.5964|
                          DCD      press0_value_min
                  |L1.5968|
                          DCD      press1_value_min
                  |L1.5972|
                          DCD      target_pressure_value_last
                  |L1.5976|
                          DCD      set_count_1
                  |L1.5980|
                          DCD      run_foc_count_1
                  |L1.5984|
                          DCD      foc_value_1
                  |L1.5988|
                          DCD      0xeb851eb8
                  |L1.5992|
                          DCD      0x3f9eb851
                  |L1.5996|
                          DCD      step_value_1
                  |L1.6000|
                          DCD      Last_Press_Sensor_0
                  |L1.6004|
                          DCD      step_value_last_1
                  |L1.6008|
                          DCD      0xbf800000
                  |L1.6012|
                          DCD      0x41700000
                  |L1.6016|
                          DCD      0x44d48000
                  |L1.6020|
                          DCD      0x44a28000
                  |L1.6024|
                          DCD      calibration_value
                  |L1.6028|
00178c  74617267          DCB      "target_pressure_value =%d \r\n",0
001790  65745f70
001794  72657373
001798  7572655f
00179c  76616c75
0017a0  65203d25
0017a4  64200d0a
0017a8  00      
0017a9  00                DCB      0
0017aa  00                DCB      0
0017ab  00                DCB      0
                  |L1.6060|
                          DCD      ||.conststring||+0x228
                  |L1.6064|
                          DCD      0x449c4000
                  |L1.6068|
                          DCD      freq_control_count
                  |L1.6072|
                          DCD      flow_cali_step
                  |L1.6076|
                          DCD      debug_flow1_ss
                  |L1.6080|
                          DCD      FOC_1_STATUS
0017c4  e124              B        |L1.6672|
0017c6  e109              B        |L1.6620|
0017c8  e0e0              B        |L1.6540|
0017ca  e05a              B        |L1.6274|
0017cc  e00d              B        |L1.6122|
                  |L1.6094|
0017ce  d10b              BNE      |L1.6120|
;;;727    				   && FOC_1_STATUS.enable_flag == START_SPARY)
0017d0  48fb              LDR      r0,|L1.7104|
0017d2  7800              LDRB     r0,[r0,#0]  ; FOC_1_STATUS
0017d4  f0000001          AND      r0,r0,#1
0017d8  b130              CBZ      r0,|L1.6120|
;;;728    			 {
;;;729    				 flow_cali_enble();
0017da  f7fffffe          BL       flow_cali_enble
;;;730    				 //SET_FOC1_MUTEX_FLAG(0); // 获取水泵控制权
;;;731    				 flow_cali_step = 1;
0017de  2001              MOVS     r0,#1
0017e0  49f8              LDR      r1,|L1.7108|
0017e2  7008              STRB     r0,[r1,#0]
;;;732    				 press0_cali_para_reset();
0017e4  f7fffffe          BL       press0_cali_para_reset
                  |L1.6120|
;;;733    				 //WORKING_PRESSURE_DEFAULT
;;;734    			 }	 
;;;735    		 break;
0017e8  e123              B        |L1.6706|
                  |L1.6122|
;;;736    			 
;;;737    		 case 1:
;;;738    			 
;;;739    			 if(FOC_1_STATUS.enable_flag == START_SPARY && flow_cali_value == MIN_CNT)
0017ea  48f5              LDR      r0,|L1.7104|
0017ec  7800              LDRB     r0,[r0,#0]  ; FOC_1_STATUS
0017ee  f0000001          AND      r0,r0,#1
0017f2  b180              CBZ      r0,|L1.6166|
0017f4  48f4              LDR      r0,|L1.7112|
0017f6  8800              LDRH     r0,[r0,#0]  ; flow_cali_value
0017f8  f5b07f6b          CMP      r0,#0x3ac
0017fc  d10b              BNE      |L1.6166|
;;;740    			 {
;;;741    				   SET_FOC1_MUTEX_FLAG(0); // 获取水泵控制权
0017fe  2000              MOVS     r0,#0
001800  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
;;;742    				   //SET_FOC2_MUTEX_FLAG(0); // 获取水泵控制权
;;;743    					 flow_cali_value = Set_FOC1_Value_By_Pressure0(spray_system_pressure_cali_para_1.throttle_value_default,WORKING_PRESSURE_DEFAULT);
001804  49f1              LDR      r1,|L1.7116|
001806  8888              LDRH     r0,[r1,#4]  ; spray_system_pressure_cali_para_1
001808  f240615e          MOV      r1,#0x65e
00180c  f7fffffe          BL       Set_FOC1_Value_By_Pressure0
001810  49ed              LDR      r1,|L1.7112|
001812  8008              STRH     r0,[r1,#0]
001814  e007              B        |L1.6182|
                  |L1.6166|
;;;744    			 }
;;;745    			 else if(FOC_1_STATUS.enable_flag == STOP_SPARY)
001816  48ea              LDR      r0,|L1.7104|
001818  7800              LDRB     r0,[r0,#0]  ; FOC_1_STATUS
00181a  f0000001          AND      r0,r0,#1
00181e  b910              CBNZ     r0,|L1.6182|
;;;746    			 {
;;;747    					SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权
001820  2001              MOVS     r0,#1
001822  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
                  |L1.6182|
;;;748    				  //SET_FOC2_MUTEX_FLAG(1);
;;;749    			 }
;;;750    			 
;;;751    		   if(flow_cali_value == MIN_CNT)
001826  48e8              LDR      r0,|L1.7112|
001828  8800              LDRH     r0,[r0,#0]  ; flow_cali_value
00182a  f5b07f6b          CMP      r0,#0x3ac
00182e  d01c              BEQ      |L1.6250|
;;;752    			 {
;;;753    			    //正在压力校准
;;;754    			 }
;;;755    			 else if(flow_cali_value > MIN_CNT)
001830  48e5              LDR      r0,|L1.7112|
001832  8800              LDRH     r0,[r0,#0]  ; flow_cali_value
001834  f5b07f6b          CMP      r0,#0x3ac
001838  dd17              BLE      |L1.6250|
;;;756    			 {
;;;757    				 switch_count++;
00183a  48e5              LDR      r0,|L1.7120|
00183c  8800              LDRH     r0,[r0,#0]  ; switch_count
00183e  1c40              ADDS     r0,r0,#1
001840  49e3              LDR      r1,|L1.7120|
001842  8008              STRH     r0,[r1,#0]
;;;758    				 Pressure1_check_completed = 1;
001844  2001              MOVS     r0,#1
001846  49e3              LDR      r1,|L1.7124|
001848  7008              STRB     r0,[r1,#0]
;;;759              // 取这个时候的脉冲数为目标频率一段时间
;;;760    				 if(switch_count >= 80) //稳定 保证流量计数稳定
00184a  48e1              LDR      r0,|L1.7120|
00184c  8800              LDRH     r0,[r0,#0]  ; switch_count
00184e  2850              CMP      r0,#0x50
001850  db0b              BLT      |L1.6250|
;;;761    				 {
;;;762    					 switch_count = 80;
001852  2050              MOVS     r0,#0x50
001854  49de              LDR      r1,|L1.7120|
001856  8008              STRH     r0,[r1,#0]
;;;763    					 if(Pressure2_check_completed == 1)
001858  48df              LDR      r0,|L1.7128|
00185a  7800              LDRB     r0,[r0,#0]  ; Pressure2_check_completed
00185c  2801              CMP      r0,#1
00185e  d104              BNE      |L1.6250|
;;;764    					 {
;;;765    						 switch_count = 0;
001860  2000              MOVS     r0,#0
001862  8008              STRH     r0,[r1,#0]
;;;766    				     flow_cali_step = 2;
001864  2002              MOVS     r0,#2
001866  49d7              LDR      r1,|L1.7108|
001868  7008              STRB     r0,[r1,#0]
                  |L1.6250|
;;;767    					 }
;;;768    				 }		
;;;769    			 }
;;;770    		   else // 压力校准失败
;;;771    			 {
;;;772    			   // 给APP 推动校准失败,跳出循环，取消APP 触发
;;;773    			 }
;;;774    			 			 
;;;775    			 if(flow_cali_enbale_flag == 0) // 取消校准
00186a  48dc              LDR      r0,|L1.7132|
00186c  7800              LDRB     r0,[r0,#0]  ; flow_cali_enbale_flag
00186e  b938              CBNZ     r0,|L1.6272|
;;;776    			 {
;;;777    			    SET_FOC1_MUTEX_FLAG(1); //释放水泵控制权
001870  2001              MOVS     r0,#1
001872  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
;;;778    				  flow_cali_clear();
001876  f7fffffe          BL       flow_cali_clear
;;;779    				  flow_cali_step = 5;
00187a  2005              MOVS     r0,#5
00187c  49d1              LDR      r1,|L1.7108|
00187e  7008              STRB     r0,[r1,#0]
                  |L1.6272|
;;;780    			 }
;;;781         break;			 
001880  e0d7              B        |L1.6706|
                  |L1.6274|
;;;782    			 
;;;783    		 
;;;784    		 case 2:	
;;;785    		   // if (压力差过大或者过小连续 5s 中， 则再次重新校准)
;;;786    		 	 if(flow_cali_enbale_flag == 0) // 取消校准
001882  48d6              LDR      r0,|L1.7132|
001884  7800              LDRB     r0,[r0,#0]  ; flow_cali_enbale_flag
001886  b938              CBNZ     r0,|L1.6296|
;;;787    			 {
;;;788    			    SET_FOC1_MUTEX_FLAG(1); //释放水泵控制权
001888  2001              MOVS     r0,#1
00188a  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
;;;789    				  flow_cali_clear();
00188e  f7fffffe          BL       flow_cali_clear
;;;790    				  flow_cali_step = 5;
001892  2005              MOVS     r0,#5
001894  49cb              LDR      r1,|L1.7108|
001896  7008              STRB     r0,[r1,#0]
                  |L1.6296|
;;;791    			 }
;;;792    			 {
;;;793    			   extern uint8_t start_flag;
;;;794    			   start_flag = 1;
001898  2001              MOVS     r0,#1
00189a  49d1              LDR      r1,|L1.7136|
00189c  7008              STRB     r0,[r1,#0]
;;;795    			 }
;;;796    		 
;;;797    		   // 如果使能喷洒执行这个
;;;798    				if(FOC_1_STATUS.enable_flag == START_SPARY && (FOC_1_STATUS.flow_speed != 0))
00189e  48c8              LDR      r0,|L1.7104|
0018a0  7800              LDRB     r0,[r0,#0]  ; FOC_1_STATUS
0018a2  f0000001          AND      r0,r0,#1
0018a6  2800              CMP      r0,#0
0018a8  d02d              BEQ      |L1.6406|
0018aa  48c5              LDR      r0,|L1.7104|
0018ac  7800              LDRB     r0,[r0,#0]  ; FOC_1_STATUS
0018ae  0840              LSRS     r0,r0,#1
0018b0  b348              CBZ      r0,|L1.6406|
;;;799    				{					 
;;;800    					 if(freq_control_count % 20 == 0)
0018b2  48cc              LDR      r0,|L1.7140|
0018b4  7800              LDRB     r0,[r0,#0]  ; freq_control_count
0018b6  2114              MOVS     r1,#0x14
0018b8  fb90f2f1          SDIV     r2,r0,r1
0018bc  fb010012          MLS      r0,r1,r2,r0
0018c0  b9e8              CBNZ     r0,|L1.6398|
;;;801    				   {
;;;802    					
;;;803    						  Control_The_Frequency_Pulse_1(flow_cali_value,Med_Frequency_Pulse);
0018c2  48c9              LDR      r0,|L1.7144|
0018c4  7801              LDRB     r1,[r0,#0]  ; Med_Frequency_Pulse
0018c6  48c0              LDR      r0,|L1.7112|
0018c8  8800              LDRH     r0,[r0,#0]  ; flow_cali_value
0018ca  f7fffffe          BL       Control_The_Frequency_Pulse_1
;;;804             			uart_printf( 2, "cali_pulses_1 = %d ***** cali_time_1 = %d  current_capacity_total = %d \r\n",
0018ce  48c7              LDR      r0,|L1.7148|
0018d0  8800              LDRH     r0,[r0,#0]  ; current_capacity_total
0018d2  9000              STR      r0,[sp,#0]
0018d4  48c6              LDR      r0,|L1.7152|
0018d6  6883              LDR      r3,[r0,#8]  ; spray_system_flow_cali_para1
0018d8  49c6              LDR      r1,|L1.7156|
0018da  6842              LDR      r2,[r0,#4]  ; spray_system_flow_cali_para1
0018dc  2002              MOVS     r0,#2
0018de  f7fffffe          BL       uart_printf
;;;805    						  spray_system_flow_cali_para1.cali_pulses,spray_system_flow_cali_para1.cali_time,current_capacity_total);		
;;;806                  uart_printf( 2, "acc_signal  = %d  debug_throttle_value_2 = %d \r\n", debug_stFOC_Value_3.acc_signal , debug_throttle_value_2);	
0018e2  48c5              LDR      r0,|L1.7160|
0018e4  f9b0200a          LDRSH    r2,[r0,#0xa]  ; debug_stFOC_Value_3
0018e8  48c4              LDR      r0,|L1.7164|
0018ea  8803              LDRH     r3,[r0,#0]  ; debug_throttle_value_2
0018ec  a1c4              ADR      r1,|L1.7168|
0018ee  2002              MOVS     r0,#2
0018f0  f7fffffe          BL       uart_printf
;;;807    	            uart_printf( 2, " \r\n");
0018f4  f2af21c4          ADR      r1,|L1.5684|
0018f8  2002              MOVS     r0,#2
0018fa  f7fffffe          BL       uart_printf
                  |L1.6398|
;;;808    					 }
;;;809    				   SET_FOC1_MUTEX_FLAG(0); // 获取水泵控制权
0018fe  2000              MOVS     r0,#0
001900  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
001904  e004              B        |L1.6416|
                  |L1.6406|
;;;810    				}
;;;811    				else
;;;812    				{
;;;813    					 freq_control_count = 1; // 重新喷洒两秒后锁定脉冲数
001906  2001              MOVS     r0,#1
001908  49b6              LDR      r1,|L1.7140|
00190a  7008              STRB     r0,[r1,#0]
;;;814    				   SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权
00190c  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
                  |L1.6416|
;;;815    				}
;;;816    				
;;;817    			 spray_system_flow_cali_para1.cali_pulses = get_cali_flow_pulses_total();
001910  f7fffffe          BL       get_cali_flow_pulses_total
001914  49b6              LDR      r1,|L1.7152|
001916  6048              STR      r0,[r1,#4]  ; spray_system_flow_cali_para1
;;;818    			 spray_system_flow_cali_para1.cali_time = get_cail_flow_time();
001918  f7fffffe          BL       get_cail_flow_time
00191c  49b4              LDR      r1,|L1.7152|
00191e  6088              STR      r0,[r1,#8]  ; spray_system_flow_cali_para1
;;;819    			 spray_system_flow_cali_para1.cali_freq = Med_Frequency_Pulse;
001920  48b1              LDR      r0,|L1.7144|
001922  7800              LDRB     r0,[r0,#0]  ; Med_Frequency_Pulse
001924  7048              STRB     r0,[r1,#1]
;;;820    				
;;;821    			
;;;822    		   if(capacity_flag_1L == 1 )
001926  48c3              LDR      r0,|L1.7220|
001928  7800              LDRB     r0,[r0,#0]  ; capacity_flag_1L
00192a  2801              CMP      r0,#1
00192c  d12d              BNE      |L1.6538|
;;;823    			 {
;;;824    				 //spray_system_flow_cali_para.capacity  = get_cali_capacity();
;;;825    				 user_pulses1 = 1000* ((float)spray_system_flow_cali_para1.cali_pulses /(float)spray_system_flow_cali_para1.cali_time);
00192e  6888              LDR      r0,[r1,#8]  ; spray_system_flow_cali_para1
001930  f7fffffe          BL       __aeabi_ui2f
001934  4605              MOV      r5,r0
001936  49ae              LDR      r1,|L1.7152|
001938  6848              LDR      r0,[r1,#4]  ; spray_system_flow_cali_para1
00193a  f7fffffe          BL       __aeabi_ui2f
00193e  4606              MOV      r6,r0
001940  4629              MOV      r1,r5
001942  f7fffffe          BL       __aeabi_fdiv
001946  4604              MOV      r4,r0
001948  49bb              LDR      r1,|L1.7224|
00194a  f7fffffe          BL       __aeabi_fmul
00194e  49bb              LDR      r1,|L1.7228|
001950  6008              STR      r0,[r1,#0]  ; user_pulses1
;;;826    		     user_flow1 = 60*(float)((float)spray_system_flow_cali_para1.capacity)/((float)spray_system_flow_cali_para1.cali_time);
001952  49a7              LDR      r1,|L1.7152|
001954  6888              LDR      r0,[r1,#8]  ; spray_system_flow_cali_para1
001956  f7fffffe          BL       __aeabi_ui2f
00195a  4605              MOV      r5,r0
00195c  49a4              LDR      r1,|L1.7152|
00195e  8848              LDRH     r0,[r1,#2]  ; spray_system_flow_cali_para1
001960  f7fffffe          BL       __aeabi_ui2f
001964  4606              MOV      r6,r0
001966  49b6              LDR      r1,|L1.7232|
001968  f7fffffe          BL       __aeabi_fmul
00196c  4604              MOV      r4,r0
00196e  4629              MOV      r1,r5
001970  f7fffffe          BL       __aeabi_fdiv
001974  49b3              LDR      r1,|L1.7236|
001976  6008              STR      r0,[r1,#0]  ; user_flow1
;;;827    				 SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制
001978  2001              MOVS     r0,#1
00197a  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
;;;828    				 flow1_cali_compled_flag = 1;
00197e  2001              MOVS     r0,#1
001980  49b1              LDR      r1,|L1.7240|
001982  7008              STRB     r0,[r1,#0]
;;;829    				 flow_cali_step = 3; 
001984  2003              MOVS     r0,#3
001986  498f              LDR      r1,|L1.7108|
001988  7008              STRB     r0,[r1,#0]
                  |L1.6538|
;;;830    			 }
;;;831    		 break;
00198a  e052              B        |L1.6706|
                  |L1.6540|
;;;832    		 
;;;833    		 case 3:
;;;834    		   cali_flow_para1_write_flash((uint8_t*)&spray_system_flow_cali_para1,sizeof(spray_system_flow_cali_para_t));
00198c  210c              MOVS     r1,#0xc
00198e  4898              LDR      r0,|L1.7152|
001990  f7fffffe          BL       cali_flow_para1_write_flash
;;;835    		   uart_printf( 2, "************************flow1_para_write_flash****************\r\n" );
001994  49ad              LDR      r1,|L1.7244|
001996  2002              MOVS     r0,#2
001998  f7fffffe          BL       uart_printf
;;;836    		   flow_cali_step = 4;	
00199c  2004              MOVS     r0,#4
00199e  4989              LDR      r1,|L1.7108|
0019a0  7008              STRB     r0,[r1,#0]
;;;837    		 	 if(flow2_cali_compled_flag  && flow1_cali_compled_flag)
0019a2  48ab              LDR      r0,|L1.7248|
0019a4  7800              LDRB     r0,[r0,#0]  ; flow2_cali_compled_flag
0019a6  b1c0              CBZ      r0,|L1.6618|
0019a8  48a7              LDR      r0,|L1.7240|
0019aa  7800              LDRB     r0,[r0,#0]  ; flow1_cali_compled_flag
0019ac  b1a8              CBZ      r0,|L1.6618|
;;;838    			 {
;;;839    		      user_volume =  (float)spray_system_flow_cali_para1.capacity/(float)(spray_system_flow_cali_para1.cali_pulses);
0019ae  4990              LDR      r1,|L1.7152|
0019b0  6848              LDR      r0,[r1,#4]  ; spray_system_flow_cali_para1
0019b2  f7fffffe          BL       __aeabi_ui2f
0019b6  4604              MOV      r4,r0
0019b8  498d              LDR      r1,|L1.7152|
0019ba  8848              LDRH     r0,[r1,#2]  ; spray_system_flow_cali_para1
0019bc  f7fffffe          BL       __aeabi_ui2f
0019c0  4605              MOV      r5,r0
0019c2  4621              MOV      r1,r4
0019c4  f7fffffe          BL       __aeabi_fdiv
0019c8  49a2              LDR      r1,|L1.7252|
0019ca  6008              STR      r0,[r1,#0]  ; user_volume
;;;840    	        Set_Volume_Each_Pulse(user_volume);
0019cc  4608              MOV      r0,r1
0019ce  6800              LDR      r0,[r0,#0]  ; user_volume
0019d0  f7fffffe          BL       Set_Volume_Each_Pulse
;;;841    			    set_flow_cali_result(flow_cali_complted);
0019d4  2001              MOVS     r0,#1
0019d6  f7fffffe          BL       set_flow_cali_result
                  |L1.6618|
;;;842    			 }
;;;843    		 break;
0019da  e02a              B        |L1.6706|
                  |L1.6620|
;;;844    		 
;;;845    		 case 4:
;;;846    		   if(freq_control_count % 10 == 0)
0019dc  4881              LDR      r0,|L1.7140|
0019de  7800              LDRB     r0,[r0,#0]  ; freq_control_count
0019e0  210a              MOVS     r1,#0xa
0019e2  fb90f2f1          SDIV     r2,r0,r1
0019e6  fb010012          MLS      r0,r1,r2,r0
0019ea  b980              CBNZ     r0,|L1.6670|
;;;847    			 {
;;;848    				 uart_printf( 2, "cali_pulses_1 =  %d   cali_time_1 = %d  user_volume = %.3f  current_capacity_total = %d \r\n",
0019ec  4899              LDR      r0,|L1.7252|
0019ee  6800              LDR      r0,[r0,#0]  ; user_volume
0019f0  f7fffffe          BL       __aeabi_f2d
0019f4  4604              MOV      r4,r0
0019f6  487d              LDR      r0,|L1.7148|
0019f8  8800              LDRH     r0,[r0,#0]  ; current_capacity_total
0019fa  e9cd4100          STRD     r4,r1,[sp,#0]
0019fe  9002              STR      r0,[sp,#8]
001a00  487b              LDR      r0,|L1.7152|
001a02  6883              LDR      r3,[r0,#8]  ; spray_system_flow_cali_para1
001a04  4994              LDR      r1,|L1.7256|
001a06  6842              LDR      r2,[r0,#4]  ; spray_system_flow_cali_para1
001a08  2002              MOVS     r0,#2
001a0a  f7fffffe          BL       uart_printf
                  |L1.6670|
;;;849    										 spray_system_flow_cali_para1.cali_pulses,spray_system_flow_cali_para1.cali_time,user_volume,current_capacity_total);
;;;850    				 //uart_printf( 2, "user_pulses_5L =  %.2f   user_flow_5L = %.2f  \r\n",user_pulses2,user_flow2 );
;;;851    			 }
;;;852          // 流量计校准完,等待后续处理
;;;853    		 break;
001a0e  e010              B        |L1.6706|
                  |L1.6672|
;;;854    			 
;;;855    		  case 5:  
;;;856    		  if( flow_cali_enbale_flag == 1) // 再次开始校准
001a10  4872              LDR      r0,|L1.7132|
001a12  7800              LDRB     r0,[r0,#0]  ; flow_cali_enbale_flag
001a14  2801              CMP      r0,#1
001a16  d10a              BNE      |L1.6702|
;;;857    			{
;;;858    				  flow_cali_step = 0;
001a18  2000              MOVS     r0,#0
001a1a  496a              LDR      r1,|L1.7108|
001a1c  7008              STRB     r0,[r1,#0]
;;;859    				  SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制
001a1e  2001              MOVS     r0,#1
001a20  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
;;;860    					flow1_cali_compled_flag = 0;
001a24  2000              MOVS     r0,#0
001a26  4988              LDR      r1,|L1.7240|
001a28  7008              STRB     r0,[r1,#0]
;;;861    			    flow2_cali_compled_flag = 0;
001a2a  4989              LDR      r1,|L1.7248|
001a2c  7008              STRB     r0,[r1,#0]
                  |L1.6702|
;;;862    			}
;;;863    		  break;
001a2e  e000              B        |L1.6706|
                  |L1.6704|
;;;864    		 
;;;865    		 default:
;;;866    		  
;;;867    		 break;
001a30  bf00              NOP      
                  |L1.6706|
001a32  bf00              NOP                            ;735
;;;868    	 }
;;;869    }
001a34  bdfe              POP      {r1-r7,pc}
;;;870    /*********************************************************************************************************
                          ENDP

                  Flow_Freq_MedFilter PROC
;;;877    uint8_t flow_temp[81];
;;;878    uint8_t Flow_Freq_MedFilter(uint8_t *Value_buf)
001a36  b530              PUSH     {r4,r5,lr}
;;;879    {
001a38  4601              MOV      r1,r0
;;;880    	uint16_t temp=0;
001a3a  2400              MOVS     r4,#0
;;;881    	uint8_t i,j; 
;;;882    	for (j=0;j<M-1;j++) 
001a3c  2300              MOVS     r3,#0
001a3e  e014              B        |L1.6762|
                  |L1.6720|
;;;883    	{ 
;;;884    		for (i=0;i<M-j;i++) 
001a40  2200              MOVS     r2,#0
001a42  e00c              B        |L1.6750|
                  |L1.6724|
;;;885    	  {    
;;;886    			if ( Value_buf[i]>Value_buf[i+1] )
001a44  5c8d              LDRB     r5,[r1,r2]
001a46  1c50              ADDS     r0,r2,#1
001a48  5c08              LDRB     r0,[r1,r0]
001a4a  4285              CMP      r5,r0
001a4c  dd05              BLE      |L1.6746|
;;;887    		  {        
;;;888    				temp = Value_buf[i]; 
001a4e  5c8c              LDRB     r4,[r1,r2]
;;;889    				Value_buf[i] = Value_buf[i+1]; 
001a50  1c50              ADDS     r0,r2,#1
001a52  5c08              LDRB     r0,[r1,r0]
001a54  5488              STRB     r0,[r1,r2]
;;;890    				Value_buf[i+1] = temp;   
001a56  1c50              ADDS     r0,r2,#1
001a58  540c              STRB     r4,[r1,r0]
                  |L1.6746|
001a5a  1c50              ADDS     r0,r2,#1              ;884
001a5c  b2c2              UXTB     r2,r0                 ;884
                  |L1.6750|
001a5e  f1c30051          RSB      r0,r3,#0x51           ;884
001a62  4290              CMP      r0,r2                 ;884
001a64  dcee              BGT      |L1.6724|
001a66  1c58              ADDS     r0,r3,#1              ;882
001a68  b2c3              UXTB     r3,r0                 ;882
                  |L1.6762|
001a6a  2b50              CMP      r3,#0x50              ;882
001a6c  dbe8              BLT      |L1.6720|
;;;891    		  } 
;;;892    	  } 
;;;893    	}  
;;;894    	return Value_buf[(M-1)/2];	
001a6e  f8910028          LDRB     r0,[r1,#0x28]
;;;895    }
001a72  bd30              POP      {r4,r5,pc}
;;;896    
                          ENDP

                  Set_FOC2_Value_By_Pressure1 PROC
;;;1206   }
;;;1207   uint16_t Set_FOC2_Value_By_Pressure1(uint16_t start_foc_value ,uint16_t target_pressure_value) // 10hz
001a74  e92d47f0          PUSH     {r4-r10,lr}
;;;1208   {
001a78  b086              SUB      sp,sp,#0x18
001a7a  4681              MOV      r9,r0
001a7c  460c              MOV      r4,r1
;;;1209   	static uint16_t target_pressure_value_last = 0,Last_Press_Sensor = 0;
;;;1210   	static float step_value_2 = 0,step_value_last_2 = 0; 
;;;1211   	static uint16_t calibration_value = 0;
;;;1212   
;;;1213   	if(target_pressure_value != target_pressure_value_last)// for debug
001a7e  4877              LDR      r0,|L1.7260|
001a80  8800              LDRH     r0,[r0,#0]  ; target_pressure_value_last
001a82  4284              CMP      r4,r0
001a84  d009              BEQ      |L1.6810|
;;;1214   	{
;;;1215   	  set_count_2 = 0;
001a86  2000              MOVS     r0,#0
001a88  4975              LDR      r1,|L1.7264|
001a8a  8008              STRH     r0,[r1,#0]
;;;1216   		run_foc_count_2 = 0;
001a8c  4975              LDR      r1,|L1.7268|
001a8e  7008              STRB     r0,[r1,#0]
;;;1217   		foc_value_2 = start_foc_value; //每次改变目标压力时，重新载入开始的油门值
001a90  4648              MOV      r0,r9
001a92  f7fffffe          BL       __aeabi_ui2f
001a96  4974              LDR      r1,|L1.7272|
001a98  6008              STR      r0,[r1,#0]  ; foc_value_2
                  |L1.6810|
;;;1218   	}
;;;1219   	
;;;1220   	if(set_count_2 < 7) // 1s
001a9a  4871              LDR      r0,|L1.7264|
001a9c  8800              LDRH     r0,[r0,#0]  ; set_count_2
001a9e  2807              CMP      r0,#7
001aa0  da7e              BGE      |L1.7072|
;;;1221   	{
;;;1222   		if(get_press_value(Press_Sensor_1) >= target_pressure_value - DEAD_ZONE 
001aa2  2001              MOVS     r0,#1
001aa4  f7fffffe          BL       get_press_value
001aa8  f1a4011e          SUB      r1,r4,#0x1e
001aac  4288              CMP      r0,r1
001aae  db0c              BLT      |L1.6858|
;;;1223          && get_press_value(Press_Sensor_1) <= target_pressure_value + DEAD_ZONE )
001ab0  2001              MOVS     r0,#1
001ab2  f7fffffe          BL       get_press_value
001ab6  f104011e          ADD      r1,r4,#0x1e
001aba  4288              CMP      r0,r1
001abc  dc05              BGT      |L1.6858|
;;;1224   		{
;;;1225   			set_count_2++;			// 在此稳定1秒钟，则得到一个值就以此为准                     
001abe  4868              LDR      r0,|L1.7264|
001ac0  8800              LDRH     r0,[r0,#0]  ; set_count_2
001ac2  1c40              ADDS     r0,r0,#1
001ac4  4966              LDR      r1,|L1.7264|
001ac6  8008              STRH     r0,[r1,#0]
001ac8  e05b              B        |L1.7042|
                  |L1.6858|
;;;1226   		}
;;;1227   		else
;;;1228   		{
;;;1229   		  run_foc_count_2++;// for debug
001aca  4866              LDR      r0,|L1.7268|
001acc  7800              LDRB     r0,[r0,#0]  ; run_foc_count_2
001ace  1c40              ADDS     r0,r0,#1
001ad0  4964              LDR      r1,|L1.7268|
001ad2  7008              STRB     r0,[r1,#0]
;;;1230   			set_count_2 = 0;
001ad4  2000              MOVS     r0,#0
001ad6  4962              LDR      r1,|L1.7264|
001ad8  8008              STRH     r0,[r1,#0]
;;;1231   			
;;;1232   			step_value_2 = (target_pressure_value - get_press_value(Press_Sensor_1))*K_PRESSURE;
001ada  2001              MOVS     r0,#1
001adc  f7fffffe          BL       get_press_value
001ae0  eba40a00          SUB      r10,r4,r0
001ae4  4650              MOV      r0,r10
001ae6  f7fffffe          BL       __aeabi_i2d
001aea  4607              MOV      r7,r0
001aec  4a5f              LDR      r2,|L1.7276|
001aee  4b60              LDR      r3,|L1.7280|
001af0  f7fffffe          BL       __aeabi_dmul
001af4  4605              MOV      r5,r0
001af6  f7fffffe          BL       __aeabi_d2f
001afa  495e              LDR      r1,|L1.7284|
001afc  6008              STR      r0,[r1,#0]  ; step_value_2
;;;1233   		  if( (Last_Press_Sensor > get_press_value(Press_Sensor_1)) 
001afe  2001              MOVS     r0,#1
001b00  f7fffffe          BL       get_press_value
001b04  495c              LDR      r1,|L1.7288|
001b06  8809              LDRH     r1,[r1,#0]  ; Last_Press_Sensor
001b08  4288              CMP      r0,r1
001b0a  da09              BGE      |L1.6944|
;;;1234   		       &&(get_press_value(Press_Sensor_1)<= NORMAL_WROKING_ADC)) // 压力瞬间变小的异常处理
001b0c  2001              MOVS     r0,#1
001b0e  f7fffffe          BL       get_press_value
001b12  f5b07f52          CMP      r0,#0x348
001b16  dc03              BGT      |L1.6944|
;;;1235   				 step_value_2  = step_value_last_2;
001b18  4858              LDR      r0,|L1.7292|
001b1a  6800              LDR      r0,[r0,#0]  ; step_value_last_2
001b1c  4955              LDR      r1,|L1.7284|
001b1e  6008              STR      r0,[r1,#0]  ; step_value_2
                  |L1.6944|
;;;1236   			
;;;1237   			if(step_value_2 < 1 && step_value_2 > 0)
001b20  f04f517e          MOV      r1,#0x3f800000
001b24  4853              LDR      r0,|L1.7284|
001b26  6800              LDR      r0,[r0,#0]  ; step_value_2
001b28  f7fffffe          BL       __aeabi_cfcmple
001b2c  d209              BCS      |L1.6978|
001b2e  2100              MOVS     r1,#0
001b30  4850              LDR      r0,|L1.7284|
001b32  6800              LDR      r0,[r0,#0]  ; step_value_2
001b34  f7fffffe          BL       __aeabi_cfrcmple
001b38  d203              BCS      |L1.6978|
;;;1238   				step_value_2 = 1; 			
001b3a  f04f507e          MOV      r0,#0x3f800000
001b3e  494d              LDR      r1,|L1.7284|
001b40  6008              STR      r0,[r1,#0]  ; step_value_2
                  |L1.6978|
;;;1239   			if(step_value_2 < 0 && step_value_2 > -1)
001b42  2100              MOVS     r1,#0
001b44  484b              LDR      r0,|L1.7284|
001b46  6800              LDR      r0,[r0,#0]  ; step_value_2
001b48  f7fffffe          BL       __aeabi_cfcmple
001b4c  d208              BCS      |L1.7008|
001b4e  494c              LDR      r1,|L1.7296|
001b50  4848              LDR      r0,|L1.7284|
001b52  6800              LDR      r0,[r0,#0]  ; step_value_2
001b54  f7fffffe          BL       __aeabi_cfrcmple
001b58  d202              BCS      |L1.7008|
;;;1240   				step_value_2 = -1; 		
001b5a  4849              LDR      r0,|L1.7296|
001b5c  4945              LDR      r1,|L1.7284|
001b5e  6008              STR      r0,[r1,#0]  ; step_value_2
                  |L1.7008|
;;;1241   			
;;;1242   		   if(step_value_2 > 15)// for debug 
001b60  4948              LDR      r1,|L1.7300|
001b62  4844              LDR      r0,|L1.7284|
001b64  6800              LDR      r0,[r0,#0]  ; step_value_2
001b66  f7fffffe          BL       __aeabi_cfrcmple
001b6a  d202              BCS      |L1.7026|
;;;1243   				 step_value_2 = 15;			
001b6c  4845              LDR      r0,|L1.7300|
001b6e  4941              LDR      r1,|L1.7284|
001b70  6008              STR      r0,[r1,#0]  ; step_value_2
                  |L1.7026|
;;;1244   			foc_value_2 += step_value_2;   // 控制频率需要降低 ，压力相应比较慢
001b72  4840              LDR      r0,|L1.7284|
001b74  6801              LDR      r1,[r0,#0]  ; step_value_2
001b76  483c              LDR      r0,|L1.7272|
001b78  6800              LDR      r0,[r0,#0]  ; foc_value_2
001b7a  f7fffffe          BL       __aeabi_fadd
001b7e  493a              LDR      r1,|L1.7272|
001b80  6008              STR      r0,[r1,#0]  ; foc_value_2
                  |L1.7042|
;;;1245   		}
;;;1246   		
;;;1247   		
;;;1248   		if(foc_value_2 >= User_Max_Throttle) // 大于这个值，还打不到目标值
001b82  4941              LDR      r1,|L1.7304|
001b84  4838              LDR      r0,|L1.7272|
001b86  6800              LDR      r0,[r0,#0]  ; foc_value_2
001b88  f7fffffe          BL       __aeabi_cfrcmple
001b8c  d802              BHI      |L1.7060|
;;;1249   		{
;;;1250   			foc_value_2 = User_Max_Throttle - 400;
001b8e  483f              LDR      r0,|L1.7308|
001b90  4935              LDR      r1,|L1.7272|
001b92  6008              STR      r0,[r1,#0]  ; foc_value_2
                  |L1.7060|
;;;1251   		}
;;;1252   		
;;;1253   		Set_Throttle_Value_2(foc_value_2); // 不需要实时控制 
001b94  4834              LDR      r0,|L1.7272|
001b96  6800              LDR      r0,[r0,#0]  ; foc_value_2
001b98  f7fffffe          BL       __aeabi_f2uiz
001b9c  b285              UXTH     r5,r0
001b9e  e000              B        |L1.7074|
                  |L1.7072|
001ba0  e076              B        |L1.7312|
                  |L1.7074|
001ba2  4628              MOV      r0,r5
001ba4  f7fffffe          BL       Set_Throttle_Value_2
;;;1254   		step_value_last_2 =  step_value_2;
001ba8  4832              LDR      r0,|L1.7284|
001baa  6800              LDR      r0,[r0,#0]  ; step_value_2
001bac  4933              LDR      r1,|L1.7292|
001bae  6008              STR      r0,[r1,#0]  ; step_value_last_2
;;;1255   		target_pressure_value_last = target_pressure_value;
001bb0  482a              LDR      r0,|L1.7260|
001bb2  8004              STRH     r4,[r0,#0]
;;;1256   		Last_Press_Sensor = get_press_value(Press_Sensor_1);
001bb4  2001              MOVS     r0,#1
001bb6  f7fffffe          BL       get_press_value
001bba  492f              LDR      r1,|L1.7288|
001bbc  8008              STRH     r0,[r1,#0]
001bbe  e071              B        |L1.7332|
                  |L1.7104|
                          DCD      FOC_1_STATUS
                  |L1.7108|
                          DCD      flow_cali_step
                  |L1.7112|
                          DCD      flow_cali_value
                  |L1.7116|
                          DCD      spray_system_pressure_cali_para_1
                  |L1.7120|
                          DCD      switch_count
                  |L1.7124|
                          DCD      Pressure1_check_completed
                  |L1.7128|
                          DCD      Pressure2_check_completed
                  |L1.7132|
                          DCD      flow_cali_enbale_flag
                  |L1.7136|
                          DCD      start_flag
                  |L1.7140|
                          DCD      freq_control_count
                  |L1.7144|
                          DCD      Med_Frequency_Pulse
                  |L1.7148|
                          DCD      current_capacity_total
                  |L1.7152|
                          DCD      spray_system_flow_cali_para1
                  |L1.7156|
                          DCD      ||.conststring||+0x290
                  |L1.7160|
                          DCD      debug_stFOC_Value_3
                  |L1.7164|
                          DCD      debug_throttle_value_2
                  |L1.7168|
001c00  6163635f          DCB      "acc_signal  = %d  debug_throttle_value_2 = %d \r\n",0
001c04  7369676e
001c08  616c2020
001c0c  3d202564
001c10  20206465
001c14  6275675f
001c18  7468726f
001c1c  74746c65
001c20  5f76616c
001c24  75655f32
001c28  203d2025
001c2c  64200d0a
001c30  00      
001c31  00                DCB      0
001c32  00                DCB      0
001c33  00                DCB      0
                  |L1.7220|
                          DCD      capacity_flag_1L
                  |L1.7224|
                          DCD      0x447a0000
                  |L1.7228|
                          DCD      user_pulses1
                  |L1.7232|
                          DCD      0x42700000
                  |L1.7236|
                          DCD      user_flow1
                  |L1.7240|
                          DCD      flow1_cali_compled_flag
                  |L1.7244|
                          DCD      ||.conststring||+0x2dc
                  |L1.7248|
                          DCD      flow2_cali_compled_flag
                  |L1.7252|
                          DCD      user_volume
                  |L1.7256|
                          DCD      ||.conststring||+0x320
                  |L1.7260|
                          DCD      |symbol_number.78|
                  |L1.7264|
                          DCD      set_count_2
                  |L1.7268|
                          DCD      run_foc_count_2
                  |L1.7272|
                          DCD      foc_value_2
                  |L1.7276|
                          DCD      0xeb851eb8
                  |L1.7280|
                          DCD      0x3f9eb851
                  |L1.7284|
                          DCD      step_value_2
                  |L1.7288|
                          DCD      Last_Press_Sensor
                  |L1.7292|
                          DCD      step_value_last_2
                  |L1.7296|
                          DCD      0xbf800000
                  |L1.7300|
                          DCD      0x41700000
                  |L1.7304|
                          DCD      0x44d48000
                  |L1.7308|
                          DCD      0x44a28000
                  |L1.7312|
;;;1257   	}
;;;1258   	else
;;;1259   	{
;;;1260   		calibration_value = get_foc_throttle_value(FOC_2);	
001c90  2002              MOVS     r0,#2
001c92  f7fffffe          BL       get_foc_throttle_value
001c96  49fe              LDR      r1,|L1.8336|
001c98  8008              STRH     r0,[r1,#0]
;;;1261   		return calibration_value; //返回数值
001c9a  4608              MOV      r0,r1
001c9c  8800              LDRH     r0,[r0,#0]  ; calibration_value
                  |L1.7326|
;;;1262   	}
;;;1263   	
;;;1264   	uart_printf( 2 ,"target_pressure_value =%d \r\n", target_pressure_value);
;;;1265   	uart_printf( 2 ,"$$$$$$  step_value_2 = %.2f   run_foc_count_2 = %d  set_count = %d   press1_value_min =  %d ,foc_value_2 = %.2f \r\n",
;;;1266   	                 step_value_2,run_foc_count_2,set_count_2,press1_value_min,foc_value_2);
;;;1267   	uart_printf( 2, " \r\n");
;;;1268   	return MIN_CNT; // 返回最小值，表示正在标定
;;;1269   }
001c9e  b006              ADD      sp,sp,#0x18
001ca0  e8bd87f0          POP      {r4-r10,pc}
                  |L1.7332|
001ca4  4622              MOV      r2,r4                 ;1264
001ca6  f2af511c          ADR      r1,|L1.6028|
001caa  2002              MOVS     r0,#2                 ;1264
001cac  f7fffffe          BL       uart_printf
001cb0  48f8              LDR      r0,|L1.8340|
001cb2  6800              LDR      r0,[r0,#0]            ;1265  ; foc_value_2
001cb4  f7fffffe          BL       __aeabi_f2d
001cb8  4605              MOV      r5,r0                 ;1265
001cba  460e              MOV      r6,r1                 ;1265
001cbc  48f6              LDR      r0,|L1.8344|
001cbe  6800              LDR      r0,[r0,#0]            ;1265  ; step_value_2
001cc0  f7fffffe          BL       __aeabi_f2d
001cc4  4607              MOV      r7,r0                 ;1265
001cc6  460b              MOV      r3,r1                 ;1265
001cc8  48f4              LDR      r0,|L1.8348|
001cca  e9cd5604          STRD     r5,r6,[sp,#0x10]      ;1265
001cce  8800              LDRH     r0,[r0,#0]            ;1265  ; press1_value_min
001cd0  49f3              LDR      r1,|L1.8352|
001cd2  8809              LDRH     r1,[r1,#0]            ;1265  ; set_count_2
001cd4  4af3              LDR      r2,|L1.8356|
001cd6  7812              LDRB     r2,[r2,#0]            ;1265  ; run_foc_count_2
001cd8  e9cd2100          STRD     r2,r1,[sp,#0]         ;1265
001cdc  9002              STR      r0,[sp,#8]            ;1265
001cde  463a              MOV      r2,r7                 ;1265
001ce0  49f1              LDR      r1,|L1.8360|
001ce2  2002              MOVS     r0,#2                 ;1265
001ce4  f7fffffe          BL       uart_printf
001ce8  f2af61b8          ADR      r1,|L1.5684|
001cec  2002              MOVS     r0,#2                 ;1267
001cee  f7fffffe          BL       uart_printf
001cf2  f44f706b          MOV      r0,#0x3ac             ;1268
001cf6  e7d2              B        |L1.7326|
;;;1270   
                          ENDP

                  press1_cali_para_reset PROC
;;;1200   static float foc_value_2 = 0;
;;;1201   void press1_cali_para_reset(void)
001cf8  2000              MOVS     r0,#0
;;;1202   {
;;;1203   	  set_count_2 = 0;
001cfa  49e9              LDR      r1,|L1.8352|
001cfc  8008              STRH     r0,[r1,#0]
;;;1204   		run_foc_count_2 = 0;
001cfe  49e9              LDR      r1,|L1.8356|
001d00  7008              STRB     r0,[r1,#0]
;;;1205       foc_value_2 = 1250;
001d02  48ea              LDR      r0,|L1.8364|
001d04  49e3              LDR      r1,|L1.8340|
001d06  6008              STR      r0,[r1,#0]  ; foc_value_2
;;;1206   }
001d08  4770              BX       lr
;;;1207   uint16_t Set_FOC2_Value_By_Pressure1(uint16_t start_foc_value ,uint16_t target_pressure_value) // 10hz
                          ENDP

                  flow2_calibration_process PROC
;;;897    
;;;898    void flow2_calibration_process(void)
001d0a  b53e              PUSH     {r1-r5,lr}
;;;899    {
;;;900    	 static uint8_t flow_cali_step = 0;
;;;901    	 static uint16_t freq_control_count = 0,switch_count = 0;
;;;902    	 static uint16_t flow_cali_value = MIN_CNT;
;;;903    	 freq_control_count++;
001d0c  48e8              LDR      r0,|L1.8368|
001d0e  8800              LDRH     r0,[r0,#0]  ; freq_control_count
001d10  1c40              ADDS     r0,r0,#1
001d12  49e7              LDR      r1,|L1.8368|
001d14  8008              STRH     r0,[r1,#0]
;;;904    	// APP 触发进入校准流程
;;;905    	 debug_flow2_ss  = flow_cali_step;
001d16  48e7              LDR      r0,|L1.8372|
001d18  7800              LDRB     r0,[r0,#0]  ; flow_cali_step
001d1a  49e7              LDR      r1,|L1.8376|
001d1c  7008              STRB     r0,[r1,#0]
;;;906       switch(flow_cali_step)
001d1e  48e5              LDR      r0,|L1.8372|
001d20  7800              LDRB     r0,[r0,#0]  ; flow_cali_step
001d22  2806              CMP      r0,#6
001d24  d279              BCS      |L1.7706|
001d26  e8dff000          TBB      [pc,r0]
001d2a  0318              DCB      0x03,0x18
001d2c  79cef4f2          DCB      0x79,0xce,0xf4,0xf2
;;;907    	 {
;;;908    	   case 0:
;;;909    		      // if(飞控起飞，喷洒标志使能 ，则进行压力校准)	 
;;;910    		   if( flow_cali_enbale_flag == 1
001d30  48e2              LDR      r0,|L1.8380|
001d32  7800              LDRB     r0,[r0,#0]  ; flow_cali_enbale_flag
001d34  2801              CMP      r0,#1
001d36  d10f              BNE      |L1.7512|
;;;911    				   && FOC_2_STATUS.valid_spray == 1 
001d38  48e1              LDR      r0,|L1.8384|
001d3a  7840              LDRB     r0,[r0,#1]  ; FOC_2_STATUS
001d3c  2801              CMP      r0,#1
001d3e  d10b              BNE      |L1.7512|
;;;912    				   && FOC_2_STATUS.enable_flag == START_SPARY)
001d40  48df              LDR      r0,|L1.8384|
001d42  7800              LDRB     r0,[r0,#0]  ; FOC_2_STATUS
001d44  f0000001          AND      r0,r0,#1
001d48  b130              CBZ      r0,|L1.7512|
;;;913    			 {
;;;914    				 flow_cali_enble();
001d4a  f7fffffe          BL       flow_cali_enble
;;;915    				 //SET_FOC2_MUTEX_FLAG(0); // 获取水泵控制权
;;;916    				 flow_cali_step = 1;
001d4e  2001              MOVS     r0,#1
001d50  49d8              LDR      r1,|L1.8372|
001d52  7008              STRB     r0,[r1,#0]
;;;917    				 press1_cali_para_reset();
001d54  f7fffffe          BL       press1_cali_para_reset
                  |L1.7512|
;;;918    			 }	 
;;;919    		 break;
001d58  e106              B        |L1.8040|
;;;920    			 
;;;921    		 case 1:
;;;922    		 	 if(FOC_2_STATUS.enable_flag == START_SPARY && flow_cali_value == MIN_CNT)
001d5a  48d9              LDR      r0,|L1.8384|
001d5c  7800              LDRB     r0,[r0,#0]  ; FOC_2_STATUS
001d5e  f0000001          AND      r0,r0,#1
001d62  b1c0              CBZ      r0,|L1.7574|
001d64  48d7              LDR      r0,|L1.8388|
001d66  8800              LDRH     r0,[r0,#0]  ; flow_cali_value
001d68  f5b07f6b          CMP      r0,#0x3ac
001d6c  d113              BNE      |L1.7574|
;;;923    			 {
;;;924    					if(Pressure1_check_completed == 1) // 在另外一个泵锁定完压力后再开始执行压力锁定
001d6e  48d6              LDR      r0,|L1.8392|
001d70  7800              LDRB     r0,[r0,#0]  ; Pressure1_check_completed
001d72  2801              CMP      r0,#1
001d74  d10b              BNE      |L1.7566|
;;;925    					{
;;;926    					  SET_FOC2_MUTEX_FLAG(0); // 获取水泵控制权
001d76  2000              MOVS     r0,#0
001d78  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
;;;927    						flow_cali_value = Set_FOC2_Value_By_Pressure1(spray_system_pressure_cali_para_2.throttle_value_default,WORKING_PRESSURE_DEFAULT);
001d7c  49d3              LDR      r1,|L1.8396|
001d7e  8888              LDRH     r0,[r1,#4]  ; spray_system_pressure_cali_para_2
001d80  f240615e          MOV      r1,#0x65e
001d84  f7fffffe          BL       Set_FOC2_Value_By_Pressure1
001d88  49ce              LDR      r1,|L1.8388|
001d8a  8008              STRH     r0,[r1,#0]
001d8c  e00b              B        |L1.7590|
                  |L1.7566|
;;;928    					}
;;;929    					else
;;;930    					{
;;;931    					  SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
001d8e  2001              MOVS     r0,#1
001d90  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
001d94  e007              B        |L1.7590|
                  |L1.7574|
;;;932    					}		
;;;933    		   }
;;;934    			 else if(FOC_2_STATUS.enable_flag == STOP_SPARY)
001d96  48ca              LDR      r0,|L1.8384|
001d98  7800              LDRB     r0,[r0,#0]  ; FOC_2_STATUS
001d9a  f0000001          AND      r0,r0,#1
001d9e  b910              CBNZ     r0,|L1.7590|
;;;935    			 {
;;;936    			    SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
001da0  2001              MOVS     r0,#1
001da2  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
                  |L1.7590|
;;;937    			 }
;;;938    			 
;;;939    		   if(flow_cali_value == MIN_CNT)
001da6  48c7              LDR      r0,|L1.8388|
001da8  8800              LDRH     r0,[r0,#0]  ; flow_cali_value
001daa  f5b07f6b          CMP      r0,#0x3ac
001dae  d028              BEQ      |L1.7682|
;;;940    			 {
;;;941    			    //正在压力校准
;;;942    			 }
;;;943    			 else if(flow_cali_value > MIN_CNT)
001db0  48c4              LDR      r0,|L1.8388|
001db2  8800              LDRH     r0,[r0,#0]  ; flow_cali_value
001db4  f5b07f6b          CMP      r0,#0x3ac
001db8  dd23              BLE      |L1.7682|
;;;944    			 {
;;;945    				 if(switch_count <  M)
001dba  48c5              LDR      r0,|L1.8400|
001dbc  8800              LDRH     r0,[r0,#0]  ; switch_count
001dbe  2851              CMP      r0,#0x51
001dc0  da0e              BGE      |L1.7648|
;;;946    				 {
;;;947    					 flow_temp[switch_count] = get_cali_flow_freq();
001dc2  f7fffffe          BL       get_cali_flow_freq
001dc6  49c3              LDR      r1,|L1.8404|
001dc8  4ac1              LDR      r2,|L1.8400|
001dca  8812              LDRH     r2,[r2,#0]  ; switch_count
001dcc  5488              STRB     r0,[r1,r2]
;;;948    				   switch_count++;
001dce  48c0              LDR      r0,|L1.8400|
001dd0  8800              LDRH     r0,[r0,#0]  ; switch_count
001dd2  1c40              ADDS     r0,r0,#1
001dd4  49be              LDR      r1,|L1.8400|
001dd6  8008              STRH     r0,[r1,#0]
;;;949    					 {
;;;950    						 extern uint8_t start_flag;
;;;951    						 start_flag = 0;
001dd8  2000              MOVS     r0,#0
001dda  49bf              LDR      r1,|L1.8408|
001ddc  7008              STRB     r0,[r1,#0]
001dde  e010              B        |L1.7682|
                  |L1.7648|
;;;952    				   }
;;;953    				 }
;;;954    				 else          // 取这个时候的脉冲数为目标频率  //稳定两秒 保证流量计数稳定
;;;955    				 {
;;;956    					 Med_Frequency_Pulse =  Flow_Freq_MedFilter(flow_temp);
001de0  48bc              LDR      r0,|L1.8404|
001de2  f7fffffe          BL       Flow_Freq_MedFilter
001de6  49bd              LDR      r1,|L1.8412|
001de8  7008              STRB     r0,[r1,#0]
;;;957    					 Pressure2_check_completed = 1;
001dea  2001              MOVS     r0,#1
001dec  49bc              LDR      r1,|L1.8416|
001dee  7008              STRB     r0,[r1,#0]
;;;958    					 switch_count = 0;
001df0  2000              MOVS     r0,#0
001df2  49b7              LDR      r1,|L1.8400|
001df4  8008              STRH     r0,[r1,#0]
;;;959    				   flow_cali_step = 2;
001df6  2002              MOVS     r0,#2
001df8  49ae              LDR      r1,|L1.8372|
001dfa  7008              STRB     r0,[r1,#0]
;;;960    					 {
;;;961    						 extern uint8_t start_flag;
;;;962    						 start_flag = 1;
001dfc  2001              MOVS     r0,#1
001dfe  49b6              LDR      r1,|L1.8408|
001e00  7008              STRB     r0,[r1,#0]
                  |L1.7682|
;;;963    				   }
;;;964    				 }		
;;;965    			 }
;;;966    		   else // 压力校准失败
;;;967    			 {
;;;968    			   // 给APP 推动校准失败,跳出循环，取消APP 触发
;;;969    			 }
;;;970    			 			 
;;;971    			 if(flow_cali_enbale_flag == 0) // 取消校准
001e02  48ae              LDR      r0,|L1.8380|
001e04  7800              LDRB     r0,[r0,#0]  ; flow_cali_enbale_flag
001e06  b938              CBNZ     r0,|L1.7704|
;;;972    			 {
;;;973    			    SET_FOC2_MUTEX_FLAG(1); //释放水泵控制权
001e08  2001              MOVS     r0,#1
001e0a  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
;;;974    				  flow_cali_clear();
001e0e  f7fffffe          BL       flow_cali_clear
;;;975    				  flow_cali_step = 5;
001e12  2005              MOVS     r0,#5
001e14  49a7              LDR      r1,|L1.8372|
001e16  7008              STRB     r0,[r1,#0]
                  |L1.7704|
;;;976    			 }
;;;977         break;			 
001e18  e0a6              B        |L1.8040|
                  |L1.7706|
001e1a  e0a4              B        |L1.8038|
;;;978    			 
;;;979    		 
;;;980    		 case 2:	
;;;981    		   // if (压力差过大或者过小连续 5s 中， 则再次重新校准)
;;;982    		 	 if(flow_cali_enbale_flag == 0) // 取消校准
001e1c  48a7              LDR      r0,|L1.8380|
001e1e  7800              LDRB     r0,[r0,#0]  ; flow_cali_enbale_flag
001e20  b938              CBNZ     r0,|L1.7730|
;;;983    			 {
;;;984    			    SET_FOC2_MUTEX_FLAG(1); //释放水泵控制权
001e22  2001              MOVS     r0,#1
001e24  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
;;;985    				  flow_cali_clear();
001e28  f7fffffe          BL       flow_cali_clear
;;;986    				  flow_cali_step = 5;
001e2c  2005              MOVS     r0,#5
001e2e  49a1              LDR      r1,|L1.8372|
001e30  7008              STRB     r0,[r1,#0]
                  |L1.7730|
;;;987    			 }
;;;988    			 
;;;989    			  {
;;;990    			   extern uint8_t start_flag;
;;;991    			   start_flag = 1;
001e32  2001              MOVS     r0,#1
001e34  49a8              LDR      r1,|L1.8408|
001e36  7008              STRB     r0,[r1,#0]
;;;992    			  }
;;;993    		 
;;;994    		   // 如果使能喷洒执行这
;;;995    				if(FOC_2_STATUS.enable_flag == START_SPARY && (FOC_2_STATUS.flow_speed != 0))
001e38  48a1              LDR      r0,|L1.8384|
001e3a  7800              LDRB     r0,[r0,#0]  ; FOC_2_STATUS
001e3c  f0000001          AND      r0,r0,#1
001e40  2800              CMP      r0,#0
001e42  d02e              BEQ      |L1.7842|
001e44  489e              LDR      r0,|L1.8384|
001e46  7800              LDRB     r0,[r0,#0]  ; FOC_2_STATUS
001e48  0840              LSRS     r0,r0,#1
001e4a  b350              CBZ      r0,|L1.7842|
;;;996    				{				
;;;997    			    if(freq_control_count % 20 == 0)
001e4c  4898              LDR      r0,|L1.8368|
001e4e  8800              LDRH     r0,[r0,#0]  ; freq_control_count
001e50  2114              MOVS     r1,#0x14
001e52  fb90f2f1          SDIV     r2,r0,r1
001e56  fb010012          MLS      r0,r1,r2,r0
001e5a  b9f0              CBNZ     r0,|L1.7834|
;;;998    				  {
;;;999    						  Control_The_Frequency_Pulse_2(flow_cali_value,Med_Frequency_Pulse);// 设置为脉冲数1的目标脉冲
001e5c  489f              LDR      r0,|L1.8412|
001e5e  7801              LDRB     r1,[r0,#0]  ; Med_Frequency_Pulse
001e60  4898              LDR      r0,|L1.8388|
001e62  8800              LDRH     r0,[r0,#0]  ; flow_cali_value
001e64  f7fffffe          BL       Control_The_Frequency_Pulse_2
;;;1000            			uart_printf( 2, "cali_pulses_2 = %d ***** cali_time_2 = %d  current_capacity_total = %d  \r\n",
001e68  489e              LDR      r0,|L1.8420|
001e6a  8800              LDRH     r0,[r0,#0]  ; current_capacity_total
001e6c  9000              STR      r0,[sp,#0]
001e6e  489e              LDR      r0,|L1.8424|
001e70  6883              LDR      r3,[r0,#8]  ; spray_system_flow_cali_para1
001e72  499e              LDR      r1,|L1.8428|
001e74  6842              LDR      r2,[r0,#4]  ; spray_system_flow_cali_para1
001e76  2002              MOVS     r0,#2
001e78  f7fffffe          BL       uart_printf
;;;1001   						  spray_system_flow_cali_para1.cali_pulses,spray_system_flow_cali_para1.cali_time,current_capacity_total);
;;;1002   						  uart_printf( 2, "acc_signal  = %d  debug_throttle_value_2 = %d \r\n",  debug_stFOC_Value_3.acc_signal , debug_throttle_value_2);		
001e7c  489c              LDR      r0,|L1.8432|
001e7e  f9b0200a          LDRSH    r2,[r0,#0xa]  ; debug_stFOC_Value_3
001e82  489c              LDR      r0,|L1.8436|
001e84  8803              LDRH     r3,[r0,#0]  ; debug_throttle_value_2
001e86  f2af2188          ADR      r1,|L1.7168|
001e8a  2002              MOVS     r0,#2
001e8c  f7fffffe          BL       uart_printf
;;;1003   	            uart_printf( 2, " \r\n");
001e90  f6af0160          ADR      r1,|L1.5684|
001e94  2002              MOVS     r0,#2
001e96  f7fffffe          BL       uart_printf
                  |L1.7834|
;;;1004   					}					
;;;1005   				  SET_FOC2_MUTEX_FLAG(0); // 获取水泵控制权
001e9a  2000              MOVS     r0,#0
001e9c  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
001ea0  e004              B        |L1.7852|
                  |L1.7842|
;;;1006   				}
;;;1007   				else
;;;1008   				{
;;;1009   					 freq_control_count = 1; // 重新喷洒两秒后锁定脉冲数
001ea2  2001              MOVS     r0,#1
001ea4  4982              LDR      r1,|L1.8368|
001ea6  8008              STRH     r0,[r1,#0]
;;;1010   				   SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
001ea8  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
                  |L1.7852|
;;;1011   				}
;;;1012   
;;;1013   		   if(capacity_flag_1L == 1 )
001eac  4892              LDR      r0,|L1.8440|
001eae  7800              LDRB     r0,[r0,#0]  ; capacity_flag_1L
001eb0  2801              CMP      r0,#1
001eb2  d107              BNE      |L1.7876|
;;;1014   			 {
;;;1015   				 SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
001eb4  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
;;;1016   				 flow2_cali_compled_flag = 1;
001eb8  2001              MOVS     r0,#1
001eba  4990              LDR      r1,|L1.8444|
001ebc  7008              STRB     r0,[r1,#0]
;;;1017   				 flow_cali_step = 3; 
001ebe  2003              MOVS     r0,#3
001ec0  497c              LDR      r1,|L1.8372|
001ec2  7008              STRB     r0,[r1,#0]
                  |L1.7876|
;;;1018   			 }
;;;1019   		 break;
001ec4  e050              B        |L1.8040|
;;;1020   		 
;;;1021   		 case 3:
;;;1022   		   uart_printf( 2, "************************flow_para_write_flash****************\r\n" );
001ec6  a18e              ADR      r1,|L1.8448|
001ec8  2002              MOVS     r0,#2
001eca  f7fffffe          BL       uart_printf
;;;1023   		   flow_cali_step = 4;	
001ece  2004              MOVS     r0,#4
001ed0  4978              LDR      r1,|L1.8372|
001ed2  7008              STRB     r0,[r1,#0]
;;;1024   		   if(flow2_cali_compled_flag  && flow1_cali_compled_flag)
001ed4  4889              LDR      r0,|L1.8444|
001ed6  7800              LDRB     r0,[r0,#0]  ; flow2_cali_compled_flag
001ed8  b1c0              CBZ      r0,|L1.7948|
001eda  4899              LDR      r0,|L1.8512|
001edc  7800              LDRB     r0,[r0,#0]  ; flow1_cali_compled_flag
001ede  b1a8              CBZ      r0,|L1.7948|
;;;1025   			 {
;;;1026             user_volume =  (float)spray_system_flow_cali_para1.capacity/(float)(spray_system_flow_cali_para1.cali_pulses);
001ee0  4981              LDR      r1,|L1.8424|
001ee2  6848              LDR      r0,[r1,#4]  ; spray_system_flow_cali_para1
001ee4  f7fffffe          BL       __aeabi_ui2f
001ee8  4604              MOV      r4,r0
001eea  497f              LDR      r1,|L1.8424|
001eec  8848              LDRH     r0,[r1,#2]  ; spray_system_flow_cali_para1
001eee  f7fffffe          BL       __aeabi_ui2f
001ef2  4605              MOV      r5,r0
001ef4  4621              MOV      r1,r4
001ef6  f7fffffe          BL       __aeabi_fdiv
001efa  4992              LDR      r1,|L1.8516|
001efc  6008              STR      r0,[r1,#0]  ; user_volume
;;;1027   	        Set_Volume_Each_Pulse(user_volume);
001efe  4608              MOV      r0,r1
001f00  6800              LDR      r0,[r0,#0]  ; user_volume
001f02  f7fffffe          BL       Set_Volume_Each_Pulse
;;;1028   			    set_flow_cali_result(flow_cali_complted);
001f06  2001              MOVS     r0,#1
001f08  f7fffffe          BL       set_flow_cali_result
                  |L1.7948|
;;;1029   			 }
;;;1030   		  
;;;1031   		 break;
001f0c  e02c              B        |L1.8040|
001f0e  e01a              B        |L1.8006|
001f10  e7ff              B        |L1.7954|
                  |L1.7954|
;;;1032   		 
;;;1033   		 case 4:
;;;1034   		   if(freq_control_count % 10 == 0)
001f12  4867              LDR      r0,|L1.8368|
001f14  8800              LDRH     r0,[r0,#0]  ; freq_control_count
001f16  210a              MOVS     r1,#0xa
001f18  fb90f2f1          SDIV     r2,r0,r1
001f1c  fb010012          MLS      r0,r1,r2,r0
001f20  b980              CBNZ     r0,|L1.8004|
;;;1035   			 {
;;;1036   				 uart_printf( 2, "cali_pulses_2 =  %d   cali_time_2 = %d  user_volume = %.3f current_capacity_total = %d\r\n",
001f22  4888              LDR      r0,|L1.8516|
001f24  6800              LDR      r0,[r0,#0]  ; user_volume
001f26  f7fffffe          BL       __aeabi_f2d
001f2a  4604              MOV      r4,r0
001f2c  486d              LDR      r0,|L1.8420|
001f2e  8800              LDRH     r0,[r0,#0]  ; current_capacity_total
001f30  e9cd4100          STRD     r4,r1,[sp,#0]
001f34  9002              STR      r0,[sp,#8]
001f36  486c              LDR      r0,|L1.8424|
001f38  6883              LDR      r3,[r0,#8]  ; spray_system_flow_cali_para1
001f3a  4983              LDR      r1,|L1.8520|
001f3c  6842              LDR      r2,[r0,#4]  ; spray_system_flow_cali_para1
001f3e  2002              MOVS     r0,#2
001f40  f7fffffe          BL       uart_printf
                  |L1.8004|
;;;1037   										 spray_system_flow_cali_para1.cali_pulses,spray_system_flow_cali_para1.cali_time,user_volume,current_capacity_total);
;;;1038   			 }
;;;1039         // 流量计校准完,等待后续处理
;;;1040   		 break;
001f44  e010              B        |L1.8040|
                  |L1.8006|
;;;1041   			 
;;;1042   		  case 5:  
;;;1043   		  if( flow_cali_enbale_flag == 1) // 再次开始校准
001f46  485d              LDR      r0,|L1.8380|
001f48  7800              LDRB     r0,[r0,#0]  ; flow_cali_enbale_flag
001f4a  2801              CMP      r0,#1
001f4c  d10a              BNE      |L1.8036|
;;;1044   			   {
;;;1045              flow_cali_step = 0;
001f4e  2000              MOVS     r0,#0
001f50  4958              LDR      r1,|L1.8372|
001f52  7008              STRB     r0,[r1,#0]
;;;1046   					 SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
001f54  2001              MOVS     r0,#1
001f56  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
;;;1047   					 flow1_cali_compled_flag = 0;
001f5a  2000              MOVS     r0,#0
001f5c  4978              LDR      r1,|L1.8512|
001f5e  7008              STRB     r0,[r1,#0]
;;;1048   			     flow2_cali_compled_flag = 0;
001f60  4966              LDR      r1,|L1.8444|
001f62  7008              STRB     r0,[r1,#0]
                  |L1.8036|
;;;1049   			   }
;;;1050   		  break;
001f64  e000              B        |L1.8040|
                  |L1.8038|
;;;1051   		 
;;;1052   		 default:
;;;1053   		  
;;;1054   		 break;
001f66  bf00              NOP      
                  |L1.8040|
001f68  bf00              NOP                            ;919
;;;1055   	 }
;;;1056   }
001f6a  bd3e              POP      {r1-r5,pc}
;;;1057   
                          ENDP

                  get_buf_min_value PROC
;;;1060   
;;;1061   uint16_t get_buf_min_value(uint16_t buf[],uint16_t data_num)
001f6c  b510              PUSH     {r4,lr}
;;;1062   {
001f6e  4602              MOV      r2,r0
001f70  460b              MOV      r3,r1
;;;1063     uint16_t i = 0,min_value = 0;
001f72  2100              MOVS     r1,#0
001f74  2000              MOVS     r0,#0
;;;1064   	min_value = buf[0];
001f76  8810              LDRH     r0,[r2,#0]
;;;1065   	for(i = 0; i < data_num;i++)
001f78  bf00              NOP      
001f7a  e00c              B        |L1.8086|
                  |L1.8060|
;;;1066   	{	
;;;1067   	  if(buf[i] < min_value && buf[i] > 350)// 350是静止时ADC的采样
001f7c  f8324011          LDRH     r4,[r2,r1,LSL #1]
001f80  4284              CMP      r4,r0
001f82  da06              BGE      |L1.8082|
001f84  f8324011          LDRH     r4,[r2,r1,LSL #1]
001f88  f5b47faf          CMP      r4,#0x15e
001f8c  dd01              BLE      |L1.8082|
;;;1068   		{
;;;1069   		  min_value = buf[i];
001f8e  f8320011          LDRH     r0,[r2,r1,LSL #1]
                  |L1.8082|
001f92  1c4c              ADDS     r4,r1,#1              ;1065
001f94  b2a1              UXTH     r1,r4                 ;1065
                  |L1.8086|
001f96  4299              CMP      r1,r3                 ;1065
001f98  dbf0              BLT      |L1.8060|
;;;1070   		}
;;;1071   	}
;;;1072     return min_value;
;;;1073   }
001f9a  bd10              POP      {r4,pc}
;;;1074   
                          ENDP

                  press_sensor_handle PROC
;;;1084   
;;;1085   void press_sensor_handle(void) // 500hz读取频率
001f9c  b510              PUSH     {r4,lr}
;;;1086   {
;;;1087   	  static uint16_t channel0_buf_count = 0,channel1_buf_count = 0;
;;;1088   	 	press0_value = press0_sensor_get();
001f9e  f7fffffe          BL       press0_sensor_get
001fa2  496a              LDR      r1,|L1.8524|
001fa4  8008              STRH     r0,[r1,#0]
;;;1089   	  press1_value = press1_sensor_get();
001fa6  f7fffffe          BL       press1_sensor_get
001faa  4969              LDR      r1,|L1.8528|
001fac  8008              STRH     r0,[r1,#0]
;;;1090   
;;;1091   		Voltage_Press_1 = (press1_value*1.2085f );// 2/3 分压，原始电压 * （3/2） (scope_debug/4096)*3300*1.5f
001fae  4608              MOV      r0,r1
001fb0  8800              LDRH     r0,[r0,#0]  ; press1_value
001fb2  f7fffffe          BL       __aeabi_ui2f
001fb6  4604              MOV      r4,r0
001fb8  4966              LDR      r1,|L1.8532|
001fba  f7fffffe          BL       __aeabi_fmul
001fbe  4966              LDR      r1,|L1.8536|
001fc0  6008              STR      r0,[r1,#0]  ; Voltage_Press_1
;;;1092   	  Voltage_Press_0 = press0_value*1.2085f;
001fc2  4862              LDR      r0,|L1.8524|
001fc4  8800              LDRH     r0,[r0,#0]  ; press0_value
001fc6  f7fffffe          BL       __aeabi_ui2f
001fca  4604              MOV      r4,r0
001fcc  4961              LDR      r1,|L1.8532|
001fce  f7fffffe          BL       __aeabi_fmul
001fd2  4962              LDR      r1,|L1.8540|
001fd4  6008              STR      r0,[r1,#0]  ; Voltage_Press_0
;;;1093   	
;;;1094   	  press0_value = Voltage_Press_0;
001fd6  4608              MOV      r0,r1
001fd8  6800              LDR      r0,[r0,#0]  ; Voltage_Press_0
001fda  f7fffffe          BL       __aeabi_f2uiz
001fde  495b              LDR      r1,|L1.8524|
001fe0  8008              STRH     r0,[r1,#0]
;;;1095   	  press1_value = Voltage_Press_1;
001fe2  485d              LDR      r0,|L1.8536|
001fe4  6800              LDR      r0,[r0,#0]  ; Voltage_Press_1
001fe6  f7fffffe          BL       __aeabi_f2uiz
001fea  4959              LDR      r1,|L1.8528|
001fec  8008              STRH     r0,[r1,#0]
;;;1096   	
;;;1097   		if(press0_value > 4000 || press0_value < 300 ) //  正常采样不会有这么大的电压
001fee  4857              LDR      r0,|L1.8524|
001ff0  8800              LDRH     r0,[r0,#0]  ; press0_value
001ff2  f5b06f7a          CMP      r0,#0xfa0
001ff6  dc04              BGT      |L1.8194|
001ff8  4854              LDR      r0,|L1.8524|
001ffa  8800              LDRH     r0,[r0,#0]  ; press0_value
001ffc  f5b07f96          CMP      r0,#0x12c
002000  da03              BGE      |L1.8202|
                  |L1.8194|
;;;1098   			press0_value = last_press0_value;
002002  4857              LDR      r0,|L1.8544|
002004  8800              LDRH     r0,[r0,#0]  ; last_press0_value
002006  4951              LDR      r1,|L1.8524|
002008  8008              STRH     r0,[r1,#0]
                  |L1.8202|
;;;1099   		if(press1_value > 4000 || press1_value < 300) //  正常采样不会有这么大的电压
00200a  4851              LDR      r0,|L1.8528|
00200c  8800              LDRH     r0,[r0,#0]  ; press1_value
00200e  f5b06f7a          CMP      r0,#0xfa0
002012  dc04              BGT      |L1.8222|
002014  484e              LDR      r0,|L1.8528|
002016  8800              LDRH     r0,[r0,#0]  ; press1_value
002018  f5b07f96          CMP      r0,#0x12c
00201c  da03              BGE      |L1.8230|
                  |L1.8222|
;;;1100   			press1_value = last_press1_value;
00201e  4851              LDR      r0,|L1.8548|
002020  8800              LDRH     r0,[r0,#0]  ; last_press1_value
002022  494b              LDR      r1,|L1.8528|
002024  8008              STRH     r0,[r1,#0]
                  |L1.8230|
;;;1101   		
;;;1102     	ADC_channel0_buf[channel0_buf_count++] = press0_value;
002026  4849              LDR      r0,|L1.8524|
002028  8801              LDRH     r1,[r0,#0]  ; press0_value
00202a  484f              LDR      r0,|L1.8552|
00202c  8802              LDRH     r2,[r0,#0]  ; channel0_buf_count
00202e  8800              LDRH     r0,[r0,#0]  ; channel0_buf_count
002030  1c40              ADDS     r0,r0,#1
002032  4b4d              LDR      r3,|L1.8552|
002034  8018              STRH     r0,[r3,#0]
002036  484d              LDR      r0,|L1.8556|
002038  f8201012          STRH     r1,[r0,r2,LSL #1]
;;;1103   		ADC_channel1_buf[channel1_buf_count++] = press1_value;
00203c  4844              LDR      r0,|L1.8528|
00203e  8801              LDRH     r1,[r0,#0]  ; press1_value
002040  484b              LDR      r0,|L1.8560|
002042  8802              LDRH     r2,[r0,#0]  ; channel1_buf_count
002044  8800              LDRH     r0,[r0,#0]  ; channel1_buf_count
002046  1c40              ADDS     r0,r0,#1
002048  4b49              LDR      r3,|L1.8560|
00204a  8018              STRH     r0,[r3,#0]
00204c  4849              LDR      r0,|L1.8564|
00204e  f8201012          STRH     r1,[r0,r2,LSL #1]
;;;1104    		last_press0_value  = last_press0_value;
002052  4843              LDR      r0,|L1.8544|
002054  8800              LDRH     r0,[r0,#0]  ; last_press0_value
002056  4942              LDR      r1,|L1.8544|
002058  8008              STRH     r0,[r1,#0]
;;;1105   		last_press1_value  = last_press1_value;
00205a  4842              LDR      r0,|L1.8548|
00205c  8800              LDRH     r0,[r0,#0]  ; last_press1_value
00205e  4941              LDR      r1,|L1.8548|
002060  8008              STRH     r0,[r1,#0]
;;;1106   		if(channel0_buf_count == 49)//  50个数据取最小值  //ADC_channel0_buf[channel0_buf_count++] 
002062  4841              LDR      r0,|L1.8552|
002064  8800              LDRH     r0,[r0,#0]  ; channel0_buf_count
002066  2831              CMP      r0,#0x31
002068  d110              BNE      |L1.8332|
;;;1107   		{
;;;1108   			channel0_buf_count = 0;
00206a  2000              MOVS     r0,#0
00206c  493e              LDR      r1,|L1.8552|
00206e  8008              STRH     r0,[r1,#0]
;;;1109   			channel1_buf_count = 0;
002070  4619              MOV      r1,r3
002072  8008              STRH     r0,[r1,#0]
;;;1110   			press0_value_min = get_buf_min_value(ADC_channel1_buf,50);
002074  2132              MOVS     r1,#0x32
002076  483f              LDR      r0,|L1.8564|
002078  f7fffffe          BL       get_buf_min_value
00207c  493e              LDR      r1,|L1.8568|
00207e  8008              STRH     r0,[r1,#0]
;;;1111   			press1_value_min = get_buf_min_value(ADC_channel0_buf,50);
002080  2132              MOVS     r1,#0x32
002082  483a              LDR      r0,|L1.8556|
002084  f7fffffe          BL       get_buf_min_value
002088  4904              LDR      r1,|L1.8348|
00208a  e077              B        |L1.8572|
                  |L1.8332|
00208c  e07f              B        |L1.8590|
00208e  0000              DCW      0x0000
                  |L1.8336|
                          DCD      |symbol_number.82|
                  |L1.8340|
                          DCD      foc_value_2
                  |L1.8344|
                          DCD      step_value_2
                  |L1.8348|
                          DCD      press1_value_min
                  |L1.8352|
                          DCD      set_count_2
                  |L1.8356|
                          DCD      run_foc_count_2
                  |L1.8360|
                          DCD      ||.conststring||+0x37c
                  |L1.8364|
                          DCD      0x449c4000
                  |L1.8368|
                          DCD      |symbol_number.68|
                  |L1.8372|
                          DCD      |symbol_number.67|
                  |L1.8376|
                          DCD      debug_flow2_ss
                  |L1.8380|
                          DCD      flow_cali_enbale_flag
                  |L1.8384|
                          DCD      FOC_2_STATUS
                  |L1.8388|
                          DCD      |symbol_number.70|
                  |L1.8392|
                          DCD      Pressure1_check_completed
                  |L1.8396|
                          DCD      spray_system_pressure_cali_para_2
                  |L1.8400|
                          DCD      |symbol_number.69|
                  |L1.8404|
                          DCD      flow_temp
                  |L1.8408|
                          DCD      start_flag
                  |L1.8412|
                          DCD      Med_Frequency_Pulse
                  |L1.8416|
                          DCD      Pressure2_check_completed
                  |L1.8420|
                          DCD      current_capacity_total
                  |L1.8424|
                          DCD      spray_system_flow_cali_para1
                  |L1.8428|
                          DCD      ||.conststring||+0x3f0
                  |L1.8432|
                          DCD      debug_stFOC_Value_3
                  |L1.8436|
                          DCD      debug_throttle_value_2
                  |L1.8440|
                          DCD      capacity_flag_1L
                  |L1.8444|
                          DCD      flow2_cali_compled_flag
                  |L1.8448|
002100  2a2a2a2a          DCB      "************************flow_para_write_flash**********"
002104  2a2a2a2a
002108  2a2a2a2a
00210c  2a2a2a2a
002110  2a2a2a2a
002114  2a2a2a2a
002118  666c6f77
00211c  5f706172
002120  615f7772
002124  6974655f
002128  666c6173
00212c  682a2a2a
002130  2a2a2a2a
002134  2a2a2a  
002137  2a2a2a2a          DCB      "******\r\n",0
00213b  2a2a0d0a
00213f  00      
                  |L1.8512|
                          DCD      flow1_cali_compled_flag
                  |L1.8516|
                          DCD      user_volume
                  |L1.8520|
                          DCD      ||.conststring||+0x43c
                  |L1.8524|
                          DCD      press0_value
                  |L1.8528|
                          DCD      press1_value
                  |L1.8532|
                          DCD      0x3f9ab021
                  |L1.8536|
                          DCD      Voltage_Press_1
                  |L1.8540|
                          DCD      Voltage_Press_0
                  |L1.8544|
                          DCD      last_press0_value
                  |L1.8548|
                          DCD      last_press1_value
                  |L1.8552|
                          DCD      channel0_buf_count
                  |L1.8556|
                          DCD      ADC_channel0_buf
                  |L1.8560|
                          DCD      channel1_buf_count
                  |L1.8564|
                          DCD      ADC_channel1_buf
                  |L1.8568|
                          DCD      press0_value_min
                  |L1.8572|
00217c  8008              STRH     r0,[r1,#0]
;;;1112   			memset(ADC_channel0_buf,0,50); // 数组清零
00217e  2132              MOVS     r1,#0x32
002180  48fe              LDR      r0,|L1.9596|
002182  f7fffffe          BL       __aeabi_memclr
;;;1113   			memset(ADC_channel1_buf,0,50); // 数组清零
002186  2132              MOVS     r1,#0x32
002188  48fd              LDR      r0,|L1.9600|
00218a  f7fffffe          BL       __aeabi_memclr
                  |L1.8590|
;;;1114   		}
;;;1115   }
00218e  bd10              POP      {r4,pc}
;;;1116   
                          ENDP

                  pressure2_check_process PROC
;;;1316   
;;;1317   uint8_t pressure2_check_process(void) // 10hz 运行
002190  b50e              PUSH     {r1-r3,lr}
;;;1318   {	
;;;1319   		#ifdef  DEBUG_FLOW_LEVEL
;;;1320   		static	 uint8_t check_state = pressure_check_unknow; 
;;;1321   	  #else
;;;1322   		static	 uint8_t check_state = pressure_check_min;
;;;1323   	  #endif
;;;1324   
;;;1325   	  static uint16_t check_count = 0,timeout_count = 0,test_value = 0;
;;;1326   	  test_value = get_press_value(Press_Sensor_1);
002192  2001              MOVS     r0,#1
002194  f7fffffe          BL       get_press_value
002198  49fa              LDR      r1,|L1.9604|
00219a  8008              STRH     r0,[r1,#0]
;;;1327       if(spray_system_pressure_cali_para_2.need_cali_flag == 1)
00219c  48fa              LDR      r0,|L1.9608|
00219e  7840              LDRB     r0,[r0,#1]  ; spray_system_pressure_cali_para_2
0021a0  2801              CMP      r0,#1
0021a2  d101              BNE      |L1.8616|
;;;1328   		{
;;;1329   		    return pressure_check_fail;//给APP应答需要重新校准 
0021a4  2004              MOVS     r0,#4
                  |L1.8614|
;;;1330   		}
;;;1331   		else
;;;1332   		{
;;;1333   				if(check_state != pressure_check_sucessfull && check_state != pressure_check_fail)
;;;1334   				{
;;;1335   					 #ifdef  DEBUG_FLOW_LEVEL	
;;;1336   					 if(FOC_2_STATUS.enable_flag == STOP_SPARY) // 根据sensor id 判断
;;;1337   					 {			 
;;;1338   						 SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
;;;1339   						 check_state = pressure_check_unknow;
;;;1340   					 }
;;;1341   					 if(check_state == pressure_check_unknow 
;;;1342   							&& FOC_2_STATUS.enable_flag == START_SPARY
;;;1343   					    && FOC_2_STATUS.valid_spray == 1
;;;1344   							)//
;;;1345   					 {
;;;1346   						 check_state = pressure_check_min;
;;;1347   						 SET_FOC2_MUTEX_FLAG(0); // 获取水泵控制权
;;;1348   					 }
;;;1349   					 #endif
;;;1350   				}
;;;1351   				
;;;1352   			switch(check_state)
;;;1353   			{
;;;1354   			  case pressure_check_min:
;;;1355   
;;;1356   				  Set_Throttle_Value_2(spray_system_pressure_cali_para_2.throttle_value_min);
;;;1357   				  if(get_press_value(Press_Sensor_1) >= WORKING_PRESSURE_MIN - 2*DEAD_ZONE
;;;1358   							&& get_press_value(Press_Sensor_1 ) <= WORKING_PRESSURE_MIN + 2*DEAD_ZONE )
;;;1359   						check_count++;
;;;1360   					else
;;;1361   					  timeout_count++;
;;;1362   					
;;;1363   					if(check_count > 5) // 1s
;;;1364   					{
;;;1365   					  check_count = 0;
;;;1366   						check_state = pressure_check_default;
;;;1367   						timeout_count = 0;
;;;1368   					}
;;;1369   			
;;;1370   					if(timeout_count > 30) //
;;;1371   					{
;;;1372   						check_count = 0;
;;;1373   						timeout_count = 0;
;;;1374   						check_state = pressure_check_fail;
;;;1375   						SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权 
;;;1376   					}
;;;1377   					
;;;1378   					
;;;1379   					
;;;1380   			  uart_printf( 2 ,"check_state =%d  check_count = %d  timeout_count = %d perssure = %d  Throttle_Value_2 = %d \r\n", 
;;;1381   			            check_state,check_count,timeout_count,test_value,Throttle_Value_2);
;;;1382   				break;
;;;1383   				
;;;1384   				case pressure_check_default:
;;;1385   	
;;;1386   					Set_Throttle_Value_2(spray_system_pressure_cali_para_2.throttle_value_default); 
;;;1387   				 
;;;1388   				  if(get_press_value(Press_Sensor_1) >= WORKING_PRESSURE_DEFAULT - 2*DEAD_ZONE 
;;;1389   							&& get_press_value(Press_Sensor_1) <= WORKING_PRESSURE_DEFAULT + 2*DEAD_ZONE )
;;;1390   						check_count++;
;;;1391   					else
;;;1392   					  timeout_count++;
;;;1393   					
;;;1394   					if(check_count > 5) // 1s
;;;1395   					{
;;;1396   					  check_count = 0;
;;;1397   						check_state = pressure_check_max;
;;;1398   						timeout_count = 0;
;;;1399   			
;;;1400   					}
;;;1401   			
;;;1402   					if(timeout_count > 30) // 
;;;1403   					{
;;;1404   						check_count = 0;
;;;1405   						timeout_count = 0;
;;;1406   						check_state = pressure_check_fail;
;;;1407   						SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
;;;1408   					}
;;;1409   				
;;;1410   			uart_printf( 2 ,"check_state =%d  check_count = %d  timeout_count = %d perssure = %d  Throttle_Value_2 = %d \r\n", 
;;;1411   			            check_state,check_count,timeout_count,test_value,Throttle_Value_2);
;;;1412   				break;
;;;1413   				
;;;1414   				case pressure_check_max:
;;;1415   						Set_Throttle_Value_2(spray_system_pressure_cali_para_2.throttle_value_max); 
;;;1416   				  if(get_press_value(Press_Sensor_1) >= WORKING_PRESSURE_MAX - 2*DEAD_ZONE 
;;;1417   							&& get_press_value(Press_Sensor_1) <= WORKING_PRESSURE_MAX + 2*DEAD_ZONE )
;;;1418   						check_count++;
;;;1419   					else
;;;1420   					  timeout_count++;
;;;1421   					
;;;1422   					if(check_count > 5) // 1s
;;;1423   					{
;;;1424   					  check_count = 0;
;;;1425   						check_state = pressure_check_sucessfull;
;;;1426   						SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
;;;1427   						timeout_count = 0;
;;;1428   						Set_Throttle_Value_2(MIN_CNT); 
;;;1429   					}
;;;1430   			
;;;1431   					if(timeout_count > 30) 
;;;1432   					{
;;;1433   						check_count = 0;
;;;1434   						timeout_count = 0;
;;;1435   						check_state = pressure_check_fail;
;;;1436   						SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
;;;1437   					}
;;;1438   					
;;;1439   					
;;;1440   			uart_printf( 2 ,"check_state =%d  check_count = %d  timeout_count = %d perssure = %d  Throttle_Value_2 = %d \r\n", 
;;;1441   			            check_state,check_count,timeout_count,test_value,Throttle_Value_2);
;;;1442   				break;
;;;1443   			
;;;1444   				case pressure_check_sucessfull:
;;;1445   				// 在这里不赋值也行，因为开始的赋值已经通过校验
;;;1446   				break;
;;;1447   					
;;;1448   				case pressure_check_fail:
;;;1449   					
;;;1450   				//spray_system_cali_para.need_cali_flag = 1; // 需要重新校准工作压力
;;;1451   				break;
;;;1452   				
;;;1453   				default:
;;;1454   					
;;;1455   				break;
;;;1456   			} 
;;;1457   		}
;;;1458   		if(check_state == pressure_check_sucessfull)
;;;1459   			return pressure_check_sucessfull;
;;;1460   		else if(check_state == pressure_check_fail)
;;;1461   			return pressure_check_fail;
;;;1462   		else
;;;1463   		{
;;;1464   			return 0;
;;;1465   		}
;;;1466   }
0021a6  bd0e              POP      {r1-r3,pc}
                  |L1.8616|
0021a8  48f8              LDR      r0,|L1.9612|
0021aa  7800              LDRB     r0,[r0,#0]            ;1333  ; check_state
0021ac  2803              CMP      r0,#3                 ;1333
0021ae  d020              BEQ      |L1.8690|
0021b0  48f6              LDR      r0,|L1.9612|
0021b2  7800              LDRB     r0,[r0,#0]            ;1333  ; check_state
0021b4  2804              CMP      r0,#4                 ;1333
0021b6  d01c              BEQ      |L1.8690|
0021b8  48f5              LDR      r0,|L1.9616|
0021ba  7800              LDRB     r0,[r0,#0]            ;1336  ; FOC_2_STATUS
0021bc  f0000001          AND      r0,r0,#1              ;1336
0021c0  b928              CBNZ     r0,|L1.8654|
0021c2  2001              MOVS     r0,#1                 ;1338
0021c4  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
0021c8  2005              MOVS     r0,#5                 ;1339
0021ca  49f0              LDR      r1,|L1.9612|
0021cc  7008              STRB     r0,[r1,#0]            ;1339
                  |L1.8654|
0021ce  48ef              LDR      r0,|L1.9612|
0021d0  7800              LDRB     r0,[r0,#0]            ;1341  ; check_state
0021d2  2805              CMP      r0,#5                 ;1341
0021d4  d10d              BNE      |L1.8690|
0021d6  48ee              LDR      r0,|L1.9616|
0021d8  7800              LDRB     r0,[r0,#0]            ;1342  ; FOC_2_STATUS
0021da  f0000001          AND      r0,r0,#1              ;1342
0021de  b140              CBZ      r0,|L1.8690|
0021e0  48eb              LDR      r0,|L1.9616|
0021e2  7840              LDRB     r0,[r0,#1]            ;1343  ; FOC_2_STATUS
0021e4  2801              CMP      r0,#1                 ;1343
0021e6  d104              BNE      |L1.8690|
0021e8  2000              MOVS     r0,#0                 ;1346
0021ea  49e8              LDR      r1,|L1.9612|
0021ec  7008              STRB     r0,[r1,#0]            ;1346
0021ee  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
                  |L1.8690|
0021f2  48e6              LDR      r0,|L1.9612|
0021f4  7800              LDRB     r0,[r0,#0]            ;1352  ; check_state
0021f6  2805              CMP      r0,#5                 ;1352
0021f8  d27e              BCS      |L1.8952|
0021fa  e8dff000          TBB      [pc,r0]               ;1352
0021fe  034c              DCB      0x03,0x4c
002200  99ebec00          DCB      0x99,0xeb,0xec,0x00
002204  49e0              LDR      r1,|L1.9608|
002206  8848              LDRH     r0,[r1,#2]            ;1356  ; spray_system_pressure_cali_para_2
002208  f7fffffe          BL       Set_Throttle_Value_2
00220c  2001              MOVS     r0,#1                 ;1357
00220e  f7fffffe          BL       get_press_value
002212  f5b06f96          CMP      r0,#0x4b0             ;1357
002216  db0b              BLT      |L1.8752|
002218  2001              MOVS     r0,#1                 ;1358
00221a  f7fffffe          BL       get_press_value
00221e  f5b06fa5          CMP      r0,#0x528             ;1358
002222  dc05              BGT      |L1.8752|
002224  48db              LDR      r0,|L1.9620|
002226  8800              LDRH     r0,[r0,#0]            ;1359  ; check_count
002228  1c40              ADDS     r0,r0,#1              ;1359
00222a  49da              LDR      r1,|L1.9620|
00222c  8008              STRH     r0,[r1,#0]            ;1359
00222e  e004              B        |L1.8762|
                  |L1.8752|
002230  48d9              LDR      r0,|L1.9624|
002232  8800              LDRH     r0,[r0,#0]            ;1361  ; timeout_count
002234  1c40              ADDS     r0,r0,#1              ;1361
002236  49d8              LDR      r1,|L1.9624|
002238  8008              STRH     r0,[r1,#0]            ;1361
                  |L1.8762|
00223a  48d6              LDR      r0,|L1.9620|
00223c  8800              LDRH     r0,[r0,#0]            ;1363  ; check_count
00223e  2805              CMP      r0,#5                 ;1363
002240  dd08              BLE      |L1.8788|
002242  2000              MOVS     r0,#0                 ;1365
002244  49d3              LDR      r1,|L1.9620|
002246  8008              STRH     r0,[r1,#0]            ;1365
002248  2001              MOVS     r0,#1                 ;1366
00224a  49d0              LDR      r1,|L1.9612|
00224c  7008              STRB     r0,[r1,#0]            ;1366
00224e  2000              MOVS     r0,#0                 ;1367
002250  49d1              LDR      r1,|L1.9624|
002252  8008              STRH     r0,[r1,#0]            ;1367
                  |L1.8788|
002254  48d0              LDR      r0,|L1.9624|
002256  8800              LDRH     r0,[r0,#0]            ;1370  ; timeout_count
002258  281e              CMP      r0,#0x1e              ;1370
00225a  dd0a              BLE      |L1.8818|
00225c  2000              MOVS     r0,#0                 ;1372
00225e  49cd              LDR      r1,|L1.9620|
002260  8008              STRH     r0,[r1,#0]            ;1372
002262  49cd              LDR      r1,|L1.9624|
002264  8008              STRH     r0,[r1,#0]            ;1373
002266  2004              MOVS     r0,#4                 ;1374
002268  49c8              LDR      r1,|L1.9612|
00226a  7008              STRB     r0,[r1,#0]            ;1374
00226c  2001              MOVS     r0,#1                 ;1375
00226e  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
                  |L1.8818|
002272  48ca              LDR      r0,|L1.9628|
002274  8800              LDRH     r0,[r0,#0]            ;1380  ; Throttle_Value_2
002276  49c3              LDR      r1,|L1.9604|
002278  8809              LDRH     r1,[r1,#0]            ;1380  ; test_value
00227a  4ac7              LDR      r2,|L1.9624|
00227c  8812              LDRH     r2,[r2,#0]            ;1380  ; timeout_count
00227e  e9cd2100          STRD     r2,r1,[sp,#0]         ;1380
002282  9002              STR      r0,[sp,#8]            ;1380
002284  48c3              LDR      r0,|L1.9620|
002286  8803              LDRH     r3,[r0,#0]            ;1380  ; check_count
002288  48c0              LDR      r0,|L1.9612|
00228a  7802              LDRB     r2,[r0,#0]            ;1380  ; check_state
00228c  49c4              LDR      r1,|L1.9632|
00228e  2002              MOVS     r0,#2                 ;1380
002290  f7fffffe          BL       uart_printf
002294  e0a1              B        |L1.9178|
002296  49bc              LDR      r1,|L1.9608|
002298  8888              LDRH     r0,[r1,#4]            ;1386  ; spray_system_pressure_cali_para_2
00229a  f7fffffe          BL       Set_Throttle_Value_2
00229e  2001              MOVS     r0,#1                 ;1388
0022a0  f7fffffe          BL       get_press_value
0022a4  f2406122          MOV      r1,#0x622             ;1388
0022a8  4288              CMP      r0,r1                 ;1388
0022aa  db0c              BLT      |L1.8902|
0022ac  2001              MOVS     r0,#1                 ;1389
0022ae  f7fffffe          BL       get_press_value
0022b2  f240619a          MOV      r1,#0x69a             ;1389
0022b6  4288              CMP      r0,r1                 ;1389
0022b8  dc05              BGT      |L1.8902|
0022ba  48b6              LDR      r0,|L1.9620|
0022bc  8800              LDRH     r0,[r0,#0]            ;1390  ; check_count
0022be  1c40              ADDS     r0,r0,#1              ;1390
0022c0  49b4              LDR      r1,|L1.9620|
0022c2  8008              STRH     r0,[r1,#0]            ;1390
0022c4  e004              B        |L1.8912|
                  |L1.8902|
0022c6  48b4              LDR      r0,|L1.9624|
0022c8  8800              LDRH     r0,[r0,#0]            ;1392  ; timeout_count
0022ca  1c40              ADDS     r0,r0,#1              ;1392
0022cc  49b2              LDR      r1,|L1.9624|
0022ce  8008              STRH     r0,[r1,#0]            ;1392
                  |L1.8912|
0022d0  48b0              LDR      r0,|L1.9620|
0022d2  8800              LDRH     r0,[r0,#0]            ;1394  ; check_count
0022d4  2805              CMP      r0,#5                 ;1394
0022d6  dd08              BLE      |L1.8938|
0022d8  2000              MOVS     r0,#0                 ;1396
0022da  49ae              LDR      r1,|L1.9620|
0022dc  8008              STRH     r0,[r1,#0]            ;1396
0022de  2002              MOVS     r0,#2                 ;1397
0022e0  49aa              LDR      r1,|L1.9612|
0022e2  7008              STRB     r0,[r1,#0]            ;1397
0022e4  2000              MOVS     r0,#0                 ;1398
0022e6  49ac              LDR      r1,|L1.9624|
0022e8  8008              STRH     r0,[r1,#0]            ;1398
                  |L1.8938|
0022ea  48ab              LDR      r0,|L1.9624|
0022ec  8800              LDRH     r0,[r0,#0]            ;1402  ; timeout_count
0022ee  281e              CMP      r0,#0x1e              ;1402
0022f0  dd0c              BLE      |L1.8972|
0022f2  2000              MOVS     r0,#0                 ;1404
0022f4  49a7              LDR      r1,|L1.9620|
0022f6  e000              B        |L1.8954|
                  |L1.8952|
0022f8  e06e              B        |L1.9176|
                  |L1.8954|
0022fa  8008              STRH     r0,[r1,#0]            ;1404
0022fc  49a6              LDR      r1,|L1.9624|
0022fe  8008              STRH     r0,[r1,#0]            ;1405
002300  2004              MOVS     r0,#4                 ;1406
002302  49a2              LDR      r1,|L1.9612|
002304  7008              STRB     r0,[r1,#0]            ;1406
002306  2001              MOVS     r0,#1                 ;1407
002308  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
                  |L1.8972|
00230c  48a3              LDR      r0,|L1.9628|
00230e  8800              LDRH     r0,[r0,#0]            ;1410  ; Throttle_Value_2
002310  499c              LDR      r1,|L1.9604|
002312  8809              LDRH     r1,[r1,#0]            ;1410  ; test_value
002314  4aa0              LDR      r2,|L1.9624|
002316  8812              LDRH     r2,[r2,#0]            ;1410  ; timeout_count
002318  e9cd2100          STRD     r2,r1,[sp,#0]         ;1410
00231c  9002              STR      r0,[sp,#8]            ;1410
00231e  489d              LDR      r0,|L1.9620|
002320  8803              LDRH     r3,[r0,#0]            ;1410  ; check_count
002322  489a              LDR      r0,|L1.9612|
002324  7802              LDRB     r2,[r0,#0]            ;1410  ; check_state
002326  499e              LDR      r1,|L1.9632|
002328  2002              MOVS     r0,#2                 ;1410
00232a  f7fffffe          BL       uart_printf
00232e  e054              B        |L1.9178|
002330  4995              LDR      r1,|L1.9608|
002332  88c8              LDRH     r0,[r1,#6]            ;1415  ; spray_system_pressure_cali_para_2
002334  f7fffffe          BL       Set_Throttle_Value_2
002338  2001              MOVS     r0,#1                 ;1416
00233a  f7fffffe          BL       get_press_value
00233e  f240619a          MOV      r1,#0x69a             ;1416
002342  4288              CMP      r0,r1                 ;1416
002344  db0c              BLT      |L1.9056|
002346  2001              MOVS     r0,#1                 ;1417
002348  f7fffffe          BL       get_press_value
00234c  f2407112          MOV      r1,#0x712             ;1417
002350  4288              CMP      r0,r1                 ;1417
002352  dc05              BGT      |L1.9056|
002354  488f              LDR      r0,|L1.9620|
002356  8800              LDRH     r0,[r0,#0]            ;1418  ; check_count
002358  1c40              ADDS     r0,r0,#1              ;1418
00235a  498e              LDR      r1,|L1.9620|
00235c  8008              STRH     r0,[r1,#0]            ;1418
00235e  e004              B        |L1.9066|
                  |L1.9056|
002360  488d              LDR      r0,|L1.9624|
002362  8800              LDRH     r0,[r0,#0]            ;1420  ; timeout_count
002364  1c40              ADDS     r0,r0,#1              ;1420
002366  498c              LDR      r1,|L1.9624|
002368  8008              STRH     r0,[r1,#0]            ;1420
                  |L1.9066|
00236a  488a              LDR      r0,|L1.9620|
00236c  8800              LDRH     r0,[r0,#0]            ;1422  ; check_count
00236e  2805              CMP      r0,#5                 ;1422
002370  dd0f              BLE      |L1.9106|
002372  2000              MOVS     r0,#0                 ;1424
002374  4987              LDR      r1,|L1.9620|
002376  8008              STRH     r0,[r1,#0]            ;1424
002378  2003              MOVS     r0,#3                 ;1425
00237a  4984              LDR      r1,|L1.9612|
00237c  7008              STRB     r0,[r1,#0]            ;1425
00237e  2001              MOVS     r0,#1                 ;1426
002380  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
002384  2000              MOVS     r0,#0                 ;1427
002386  4984              LDR      r1,|L1.9624|
002388  8008              STRH     r0,[r1,#0]            ;1427
00238a  f44f706b          MOV      r0,#0x3ac             ;1428
00238e  f7fffffe          BL       Set_Throttle_Value_2
                  |L1.9106|
002392  4881              LDR      r0,|L1.9624|
002394  8800              LDRH     r0,[r0,#0]            ;1431  ; timeout_count
002396  281e              CMP      r0,#0x1e              ;1431
002398  dd0a              BLE      |L1.9136|
00239a  2000              MOVS     r0,#0                 ;1433
00239c  497d              LDR      r1,|L1.9620|
00239e  8008              STRH     r0,[r1,#0]            ;1433
0023a0  497d              LDR      r1,|L1.9624|
0023a2  8008              STRH     r0,[r1,#0]            ;1434
0023a4  2004              MOVS     r0,#4                 ;1435
0023a6  4979              LDR      r1,|L1.9612|
0023a8  7008              STRB     r0,[r1,#0]            ;1435
0023aa  2001              MOVS     r0,#1                 ;1436
0023ac  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
                  |L1.9136|
0023b0  487a              LDR      r0,|L1.9628|
0023b2  8800              LDRH     r0,[r0,#0]            ;1440  ; Throttle_Value_2
0023b4  4973              LDR      r1,|L1.9604|
0023b6  8809              LDRH     r1,[r1,#0]            ;1440  ; test_value
0023b8  4a77              LDR      r2,|L1.9624|
0023ba  8812              LDRH     r2,[r2,#0]            ;1440  ; timeout_count
0023bc  e9cd2100          STRD     r2,r1,[sp,#0]         ;1440
0023c0  9002              STR      r0,[sp,#8]            ;1440
0023c2  4874              LDR      r0,|L1.9620|
0023c4  8803              LDRH     r3,[r0,#0]            ;1440  ; check_count
0023c6  4871              LDR      r0,|L1.9612|
0023c8  7802              LDRB     r2,[r0,#0]            ;1440  ; check_state
0023ca  4975              LDR      r1,|L1.9632|
0023cc  2002              MOVS     r0,#2                 ;1440
0023ce  f7fffffe          BL       uart_printf
0023d2  e002              B        |L1.9178|
0023d4  e001              B        |L1.9178|
0023d6  e000              B        |L1.9178|
                  |L1.9176|
0023d8  bf00              NOP                            ;1455
                  |L1.9178|
0023da  bf00              NOP                            ;1382
0023dc  486b              LDR      r0,|L1.9612|
0023de  7800              LDRB     r0,[r0,#0]            ;1458  ; check_state
0023e0  2803              CMP      r0,#3                 ;1458
0023e2  d100              BNE      |L1.9190|
0023e4  e6df              B        |L1.8614|
                  |L1.9190|
0023e6  4869              LDR      r0,|L1.9612|
0023e8  7800              LDRB     r0,[r0,#0]            ;1460  ; check_state
0023ea  2804              CMP      r0,#4                 ;1460
0023ec  d100              BNE      |L1.9200|
0023ee  e6da              B        |L1.8614|
                  |L1.9200|
0023f0  2000              MOVS     r0,#0                 ;1464
0023f2  e6d8              B        |L1.8614|
;;;1467   
                          ENDP

                  pressure1_check_process PROC
;;;1468   uint8_t pressure1_check_process(void) // 10hz 运行
0023f4  b53e              PUSH     {r1-r5,lr}
;;;1469   {	
;;;1470   		#ifdef  DEBUG_FLOW_LEVEL
;;;1471   			static	 uint8_t check_state = pressure_check_unknow; 
;;;1472   	  #else
;;;1473   			static	 uint8_t check_state = pressure_check_min;
;;;1474   	  #endif
;;;1475   	  static uint16_t check_count = 0,timeout_count = 0;// 
;;;1476   	  uint16_t  test_value = 
0023f6  2000              MOVS     r0,#0
0023f8  f7fffffe          BL       get_press_value
0023fc  4604              MOV      r4,r0
;;;1477   	  test_value = get_press_value(Press_Sensor_0);
;;;1478       if(spray_system_pressure_cali_para_1.need_cali_flag == 1)
0023fe  4869              LDR      r0,|L1.9636|
002400  7840              LDRB     r0,[r0,#1]  ; spray_system_pressure_cali_para_1
002402  2801              CMP      r0,#1
002404  d101              BNE      |L1.9226|
;;;1479   		{
;;;1480   		    return pressure_check_fail;//给APP应答需要重新校准 
002406  2004              MOVS     r0,#4
                  |L1.9224|
;;;1481   		}
;;;1482   		else
;;;1483   		{
;;;1484   				if(check_state != pressure_check_sucessfull && check_state != pressure_check_fail)
;;;1485   				{
;;;1486   					 #ifdef  DEBUG_FLOW_LEVEL	
;;;1487   					 if(FOC_1_STATUS.enable_flag == STOP_SPARY) // 根据sensor id 判断
;;;1488   					 {			 
;;;1489   						 SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权 , 需要两个泵单独控制
;;;1490   						 check_state = pressure_check_unknow;
;;;1491   					 }
;;;1492   					 if(check_state == pressure_check_unknow 
;;;1493   							&& FOC_1_STATUS.enable_flag == START_SPARY
;;;1494   					    && FOC_1_STATUS.valid_spray == 1
;;;1495   							)//
;;;1496   					 {
;;;1497   						 check_state = pressure_check_min;
;;;1498   						 SET_FOC1_MUTEX_FLAG(0); // 获取水泵控制权
;;;1499   					 }
;;;1500   					 #endif
;;;1501   				}
;;;1502   				
;;;1503   			switch(check_state)
;;;1504   			{
;;;1505   			  case pressure_check_min:
;;;1506   				  Set_Throttle_Value_1(spray_system_pressure_cali_para_1.throttle_value_min);
;;;1507   				  if(get_press_value(Press_Sensor_0) >= WORKING_PRESSURE_MIN - 2*DEAD_ZONE
;;;1508   							&& get_press_value(Press_Sensor_0 ) <= WORKING_PRESSURE_MIN + 2*DEAD_ZONE )
;;;1509   						check_count++;
;;;1510   					else
;;;1511   					  timeout_count++;
;;;1512   					
;;;1513   					if(check_count > 5) // 1s
;;;1514   					{
;;;1515   					  check_count = 0;
;;;1516   						check_state = pressure_check_default;
;;;1517   						timeout_count = 0;
;;;1518   					}
;;;1519   			
;;;1520   					if(timeout_count > 50) //
;;;1521   					{
;;;1522   						check_count = 0;
;;;1523   						timeout_count = 0;
;;;1524   						check_state = pressure_check_fail;
;;;1525   						SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权 
;;;1526   					}
;;;1527   					
;;;1528   
;;;1529   			uart_printf( 2 ,"check_state =%d  check_count = %d  timeout_count = %d perssure = %d  Throttle_Value_1 = %d \r\n", 
;;;1530   			            check_state,check_count,timeout_count,test_value,Throttle_Value_1);
;;;1531   				break;
;;;1532   				
;;;1533   				case pressure_check_default:
;;;1534   	
;;;1535   					Set_Throttle_Value_1(spray_system_pressure_cali_para_1.throttle_value_default); 
;;;1536   				 
;;;1537   				  if(get_press_value(Press_Sensor_0) >= WORKING_PRESSURE_DEFAULT - 2*DEAD_ZONE 
;;;1538   							&& get_press_value(Press_Sensor_0) <= WORKING_PRESSURE_DEFAULT + 2*DEAD_ZONE )
;;;1539   						check_count++;
;;;1540   					else
;;;1541   					  timeout_count++;
;;;1542   					
;;;1543   					if(check_count > 5) // 1s
;;;1544   					{
;;;1545   					  check_count = 0;
;;;1546   						check_state = pressure_check_max;
;;;1547   						timeout_count = 0;
;;;1548   					}
;;;1549   			
;;;1550   					if(timeout_count > 30) // 
;;;1551   					{
;;;1552   						check_count = 0;
;;;1553   						timeout_count = 0;
;;;1554   						check_state = pressure_check_fail;
;;;1555   						SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权
;;;1556   					}
;;;1557   
;;;1558   			uart_printf( 2 ,"check_state =%d  check_count = %d  timeout_count = %d perssure = %d  Throttle_Value_1 = %d \r\n", 
;;;1559   			            check_state,check_count,timeout_count,test_value,Throttle_Value_1);
;;;1560   				break;
;;;1561   				
;;;1562   				case pressure_check_max:
;;;1563   						Set_Throttle_Value_1(spray_system_pressure_cali_para_1.throttle_value_max); 
;;;1564   				  if(get_press_value(Press_Sensor_0) >= WORKING_PRESSURE_MAX - 2*DEAD_ZONE 
;;;1565   							&& get_press_value(Press_Sensor_0) <= WORKING_PRESSURE_MAX + 2*DEAD_ZONE )
;;;1566   						check_count++;
;;;1567   					else
;;;1568   					  timeout_count++;
;;;1569   					
;;;1570   					if(check_count > 5) // 1s
;;;1571   					{
;;;1572   					  check_count = 0;
;;;1573   						check_state = pressure_check_sucessfull;
;;;1574   						SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权
;;;1575   						timeout_count = 0;
;;;1576   						Set_Throttle_Value_1(MIN_CNT); 
;;;1577   					}
;;;1578   			
;;;1579   					if(timeout_count > 30) 
;;;1580   					{
;;;1581   						check_count = 0;
;;;1582   						timeout_count = 0;
;;;1583   						check_state = pressure_check_fail;
;;;1584   						SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权
;;;1585   					}
;;;1586   
;;;1587   			uart_printf( 2 ,"check_state =%d  check_count = %d  timeout_count = %d perssure = %d  Throttle_Value_1 = %d \r\n", 
;;;1588   			            check_state,check_count,timeout_count,test_value,Throttle_Value_1);
;;;1589   				break;
;;;1590   			
;;;1591   				case pressure_check_sucessfull:
;;;1592   					pressure1_check_complted = 1;
;;;1593   				// 在这里不赋值也行，因为开始的赋值已经通过校验
;;;1594   				break;
;;;1595   					
;;;1596   				case pressure_check_fail:
;;;1597   					
;;;1598   				//spray_system_cali_para.need_cali_flag = 1; // 需要重新校准工作压力
;;;1599   				break;
;;;1600   				
;;;1601   				default:
;;;1602   					
;;;1603   				break;
;;;1604   			} 
;;;1605   		}
;;;1606   		if(check_state == pressure_check_sucessfull)
;;;1607   			return pressure_check_sucessfull;
;;;1608   		else if(check_state == pressure_check_fail)
;;;1609   			return pressure_check_fail;
;;;1610   		else
;;;1611   		{
;;;1612   			return 0;
;;;1613   		}
;;;1614   }
002408  bd3e              POP      {r1-r5,pc}
                  |L1.9226|
00240a  4867              LDR      r0,|L1.9640|
00240c  7800              LDRB     r0,[r0,#0]            ;1484  ; check_state
00240e  2803              CMP      r0,#3                 ;1484
002410  d020              BEQ      |L1.9300|
002412  4865              LDR      r0,|L1.9640|
002414  7800              LDRB     r0,[r0,#0]            ;1484  ; check_state
002416  2804              CMP      r0,#4                 ;1484
002418  d01c              BEQ      |L1.9300|
00241a  4864              LDR      r0,|L1.9644|
00241c  7800              LDRB     r0,[r0,#0]            ;1487  ; FOC_1_STATUS
00241e  f0000001          AND      r0,r0,#1              ;1487
002422  b928              CBNZ     r0,|L1.9264|
002424  2001              MOVS     r0,#1                 ;1489
002426  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
00242a  2005              MOVS     r0,#5                 ;1490
00242c  495e              LDR      r1,|L1.9640|
00242e  7008              STRB     r0,[r1,#0]            ;1490
                  |L1.9264|
002430  485d              LDR      r0,|L1.9640|
002432  7800              LDRB     r0,[r0,#0]            ;1492  ; check_state
002434  2805              CMP      r0,#5                 ;1492
002436  d10d              BNE      |L1.9300|
002438  485c              LDR      r0,|L1.9644|
00243a  7800              LDRB     r0,[r0,#0]            ;1493  ; FOC_1_STATUS
00243c  f0000001          AND      r0,r0,#1              ;1493
002440  b140              CBZ      r0,|L1.9300|
002442  485a              LDR      r0,|L1.9644|
002444  7840              LDRB     r0,[r0,#1]            ;1494  ; FOC_1_STATUS
002446  2801              CMP      r0,#1                 ;1494
002448  d104              BNE      |L1.9300|
00244a  2000              MOVS     r0,#0                 ;1497
00244c  4956              LDR      r1,|L1.9640|
00244e  7008              STRB     r0,[r1,#0]            ;1497
002450  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
                  |L1.9300|
002454  4854              LDR      r0,|L1.9640|
002456  7800              LDRB     r0,[r0,#0]            ;1503  ; check_state
002458  2805              CMP      r0,#5                 ;1503
00245a  d27d              BCS      |L1.9560|
00245c  e8dff000          TBB      [pc,r0]               ;1503
002460  034ab8fd          DCB      0x03,0x4a,0xb8,0xfd
002464  fc00              DCB      0xfc,0x00
002466  494f              LDR      r1,|L1.9636|
002468  8848              LDRH     r0,[r1,#2]            ;1506  ; spray_system_pressure_cali_para_1
00246a  f7fffffe          BL       Set_Throttle_Value_1
00246e  2000              MOVS     r0,#0                 ;1507
002470  f7fffffe          BL       get_press_value
002474  f5b06f96          CMP      r0,#0x4b0             ;1507
002478  db0b              BLT      |L1.9362|
00247a  2000              MOVS     r0,#0                 ;1508
00247c  f7fffffe          BL       get_press_value
002480  f5b06fa5          CMP      r0,#0x528             ;1508
002484  dc05              BGT      |L1.9362|
002486  484a              LDR      r0,|L1.9648|
002488  8800              LDRH     r0,[r0,#0]            ;1509  ; check_count
00248a  1c40              ADDS     r0,r0,#1              ;1509
00248c  4948              LDR      r1,|L1.9648|
00248e  8008              STRH     r0,[r1,#0]            ;1509
002490  e004              B        |L1.9372|
                  |L1.9362|
002492  4848              LDR      r0,|L1.9652|
002494  8800              LDRH     r0,[r0,#0]            ;1511  ; timeout_count
002496  1c40              ADDS     r0,r0,#1              ;1511
002498  4946              LDR      r1,|L1.9652|
00249a  8008              STRH     r0,[r1,#0]            ;1511
                  |L1.9372|
00249c  4844              LDR      r0,|L1.9648|
00249e  8800              LDRH     r0,[r0,#0]            ;1513  ; check_count
0024a0  2805              CMP      r0,#5                 ;1513
0024a2  dd08              BLE      |L1.9398|
0024a4  2000              MOVS     r0,#0                 ;1515
0024a6  4942              LDR      r1,|L1.9648|
0024a8  8008              STRH     r0,[r1,#0]            ;1515
0024aa  2001              MOVS     r0,#1                 ;1516
0024ac  493e              LDR      r1,|L1.9640|
0024ae  7008              STRB     r0,[r1,#0]            ;1516
0024b0  2000              MOVS     r0,#0                 ;1517
0024b2  4940              LDR      r1,|L1.9652|
0024b4  8008              STRH     r0,[r1,#0]            ;1517
                  |L1.9398|
0024b6  483f              LDR      r0,|L1.9652|
0024b8  8800              LDRH     r0,[r0,#0]            ;1520  ; timeout_count
0024ba  2832              CMP      r0,#0x32              ;1520
0024bc  dd0a              BLE      |L1.9428|
0024be  2000              MOVS     r0,#0                 ;1522
0024c0  493b              LDR      r1,|L1.9648|
0024c2  8008              STRH     r0,[r1,#0]            ;1522
0024c4  493b              LDR      r1,|L1.9652|
0024c6  8008              STRH     r0,[r1,#0]            ;1523
0024c8  2004              MOVS     r0,#4                 ;1524
0024ca  4937              LDR      r1,|L1.9640|
0024cc  7008              STRB     r0,[r1,#0]            ;1524
0024ce  2001              MOVS     r0,#1                 ;1525
0024d0  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
                  |L1.9428|
0024d4  4838              LDR      r0,|L1.9656|
0024d6  8800              LDRH     r0,[r0,#0]            ;1529  ; Throttle_Value_1
0024d8  4936              LDR      r1,|L1.9652|
0024da  8809              LDRH     r1,[r1,#0]            ;1529  ; timeout_count
0024dc  e9cd1400          STRD     r1,r4,[sp,#0]         ;1529
0024e0  9002              STR      r0,[sp,#8]            ;1529
0024e2  4833              LDR      r0,|L1.9648|
0024e4  8803              LDRH     r3,[r0,#0]            ;1529  ; check_count
0024e6  4830              LDR      r0,|L1.9640|
0024e8  7802              LDRB     r2,[r0,#0]            ;1529  ; check_state
0024ea  4934              LDR      r1,|L1.9660|
0024ec  2002              MOVS     r0,#2                 ;1529
0024ee  f7fffffe          BL       uart_printf
0024f2  e0c6              B        |L1.9858|
0024f4  492b              LDR      r1,|L1.9636|
0024f6  8888              LDRH     r0,[r1,#4]            ;1535  ; spray_system_pressure_cali_para_1
0024f8  f7fffffe          BL       Set_Throttle_Value_1
0024fc  2000              MOVS     r0,#0                 ;1537
0024fe  f7fffffe          BL       get_press_value
002502  f2406122          MOV      r1,#0x622             ;1537
002506  4288              CMP      r0,r1                 ;1537
002508  db0c              BLT      |L1.9508|
00250a  2000              MOVS     r0,#0                 ;1538
00250c  f7fffffe          BL       get_press_value
002510  f240619a          MOV      r1,#0x69a             ;1538
002514  4288              CMP      r0,r1                 ;1538
002516  dc05              BGT      |L1.9508|
002518  4825              LDR      r0,|L1.9648|
00251a  8800              LDRH     r0,[r0,#0]            ;1539  ; check_count
00251c  1c40              ADDS     r0,r0,#1              ;1539
00251e  4924              LDR      r1,|L1.9648|
002520  8008              STRH     r0,[r1,#0]            ;1539
002522  e004              B        |L1.9518|
                  |L1.9508|
002524  4823              LDR      r0,|L1.9652|
002526  8800              LDRH     r0,[r0,#0]            ;1541  ; timeout_count
002528  1c40              ADDS     r0,r0,#1              ;1541
00252a  4922              LDR      r1,|L1.9652|
00252c  8008              STRH     r0,[r1,#0]            ;1541
                  |L1.9518|
00252e  4820              LDR      r0,|L1.9648|
002530  8800              LDRH     r0,[r0,#0]            ;1543  ; check_count
002532  2805              CMP      r0,#5                 ;1543
002534  dd08              BLE      |L1.9544|
002536  2000              MOVS     r0,#0                 ;1545
002538  491d              LDR      r1,|L1.9648|
00253a  8008              STRH     r0,[r1,#0]            ;1545
00253c  2002              MOVS     r0,#2                 ;1546
00253e  491a              LDR      r1,|L1.9640|
002540  7008              STRB     r0,[r1,#0]            ;1546
002542  2000              MOVS     r0,#0                 ;1547
002544  491b              LDR      r1,|L1.9652|
002546  8008              STRH     r0,[r1,#0]            ;1547
                  |L1.9544|
002548  481a              LDR      r0,|L1.9652|
00254a  8800              LDRH     r0,[r0,#0]            ;1550  ; timeout_count
00254c  281e              CMP      r0,#0x1e              ;1550
00254e  dd0c              BLE      |L1.9578|
002550  2000              MOVS     r0,#0                 ;1552
002552  4917              LDR      r1,|L1.9648|
002554  8008              STRH     r0,[r1,#0]            ;1552
002556  e000              B        |L1.9562|
                  |L1.9560|
002558  e092              B        |L1.9856|
                  |L1.9562|
00255a  4916              LDR      r1,|L1.9652|
00255c  8008              STRH     r0,[r1,#0]            ;1553
00255e  2004              MOVS     r0,#4                 ;1554
002560  4911              LDR      r1,|L1.9640|
002562  7008              STRB     r0,[r1,#0]            ;1554
002564  2001              MOVS     r0,#1                 ;1555
002566  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
                  |L1.9578|
00256a  4813              LDR      r0,|L1.9656|
00256c  8800              LDRH     r0,[r0,#0]            ;1558  ; Throttle_Value_1
00256e  4911              LDR      r1,|L1.9652|
002570  8809              LDRH     r1,[r1,#0]            ;1558  ; timeout_count
002572  e9cd1400          STRD     r1,r4,[sp,#0]         ;1558
002576  9002              STR      r0,[sp,#8]            ;1558
002578  480d              LDR      r0,|L1.9648|
00257a  e021              B        |L1.9664|
                  |L1.9596|
                          DCD      ADC_channel0_buf
                  |L1.9600|
                          DCD      ADC_channel1_buf
                  |L1.9604|
                          DCD      test_value
                  |L1.9608|
                          DCD      spray_system_pressure_cali_para_2
                  |L1.9612|
                          DCD      check_state
                  |L1.9616|
                          DCD      FOC_2_STATUS
                  |L1.9620|
                          DCD      check_count
                  |L1.9624|
                          DCD      timeout_count
                  |L1.9628|
                          DCD      Throttle_Value_2
                  |L1.9632|
                          DCD      ||.conststring||+0x498
                  |L1.9636|
                          DCD      spray_system_pressure_cali_para_1
                  |L1.9640|
                          DCD      |symbol_number.87|
                  |L1.9644|
                          DCD      FOC_1_STATUS
                  |L1.9648|
                          DCD      |symbol_number.88|
                  |L1.9652|
                          DCD      |symbol_number.89|
                  |L1.9656|
                          DCD      Throttle_Value_1
                  |L1.9660|
                          DCD      ||.conststring||+0x4f8
                  |L1.9664|
0025c0  8803              LDRH     r3,[r0,#0]            ;1558  ; check_count
0025c2  48f7              LDR      r0,|L1.10656|
0025c4  7802              LDRB     r2,[r0,#0]            ;1558  ; check_state
0025c6  49f7              LDR      r1,|L1.10660|
0025c8  2002              MOVS     r0,#2                 ;1558
0025ca  f7fffffe          BL       uart_printf
0025ce  e058              B        |L1.9858|
0025d0  49f5              LDR      r1,|L1.10664|
0025d2  88c8              LDRH     r0,[r1,#6]            ;1563  ; spray_system_pressure_cali_para_1
0025d4  f7fffffe          BL       Set_Throttle_Value_1
0025d8  2000              MOVS     r0,#0                 ;1564
0025da  f7fffffe          BL       get_press_value
0025de  f240619a          MOV      r1,#0x69a             ;1564
0025e2  4288              CMP      r0,r1                 ;1564
0025e4  db0c              BLT      |L1.9728|
0025e6  2000              MOVS     r0,#0                 ;1565
0025e8  f7fffffe          BL       get_press_value
0025ec  f2407112          MOV      r1,#0x712             ;1565
0025f0  4288              CMP      r0,r1                 ;1565
0025f2  dc05              BGT      |L1.9728|
0025f4  48ed              LDR      r0,|L1.10668|
0025f6  8800              LDRH     r0,[r0,#0]            ;1566  ; check_count
0025f8  1c40              ADDS     r0,r0,#1              ;1566
0025fa  49ec              LDR      r1,|L1.10668|
0025fc  8008              STRH     r0,[r1,#0]            ;1566
0025fe  e004              B        |L1.9738|
                  |L1.9728|
002600  48eb              LDR      r0,|L1.10672|
002602  8800              LDRH     r0,[r0,#0]            ;1568  ; timeout_count
002604  1c40              ADDS     r0,r0,#1              ;1568
002606  49ea              LDR      r1,|L1.10672|
002608  8008              STRH     r0,[r1,#0]            ;1568
                  |L1.9738|
00260a  48e8              LDR      r0,|L1.10668|
00260c  8800              LDRH     r0,[r0,#0]            ;1570  ; check_count
00260e  2805              CMP      r0,#5                 ;1570
002610  dd0f              BLE      |L1.9778|
002612  2000              MOVS     r0,#0                 ;1572
002614  49e5              LDR      r1,|L1.10668|
002616  8008              STRH     r0,[r1,#0]            ;1572
002618  2003              MOVS     r0,#3                 ;1573
00261a  49e1              LDR      r1,|L1.10656|
00261c  7008              STRB     r0,[r1,#0]            ;1573
00261e  2001              MOVS     r0,#1                 ;1574
002620  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
002624  2000              MOVS     r0,#0                 ;1575
002626  49e2              LDR      r1,|L1.10672|
002628  8008              STRH     r0,[r1,#0]            ;1575
00262a  f44f706b          MOV      r0,#0x3ac             ;1576
00262e  f7fffffe          BL       Set_Throttle_Value_1
                  |L1.9778|
002632  48df              LDR      r0,|L1.10672|
002634  8800              LDRH     r0,[r0,#0]            ;1579  ; timeout_count
002636  281e              CMP      r0,#0x1e              ;1579
002638  dd0a              BLE      |L1.9808|
00263a  2000              MOVS     r0,#0                 ;1581
00263c  49db              LDR      r1,|L1.10668|
00263e  8008              STRH     r0,[r1,#0]            ;1581
002640  49db              LDR      r1,|L1.10672|
002642  8008              STRH     r0,[r1,#0]            ;1582
002644  2004              MOVS     r0,#4                 ;1583
002646  49d6              LDR      r1,|L1.10656|
002648  7008              STRB     r0,[r1,#0]            ;1583
00264a  2001              MOVS     r0,#1                 ;1584
00264c  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
                  |L1.9808|
002650  48d8              LDR      r0,|L1.10676|
002652  8800              LDRH     r0,[r0,#0]            ;1587  ; Throttle_Value_1
002654  49d6              LDR      r1,|L1.10672|
002656  e001              B        |L1.9820|
002658  e011              B        |L1.9854|
00265a  e00c              B        |L1.9846|
                  |L1.9820|
00265c  8809              LDRH     r1,[r1,#0]            ;1587  ; timeout_count
00265e  e9cd1400          STRD     r1,r4,[sp,#0]         ;1587
002662  9002              STR      r0,[sp,#8]            ;1587
002664  48d1              LDR      r0,|L1.10668|
002666  8803              LDRH     r3,[r0,#0]            ;1587  ; check_count
002668  48cd              LDR      r0,|L1.10656|
00266a  7802              LDRB     r2,[r0,#0]            ;1587  ; check_state
00266c  49cd              LDR      r1,|L1.10660|
00266e  2002              MOVS     r0,#2                 ;1587
002670  f7fffffe          BL       uart_printf
002674  e005              B        |L1.9858|
                  |L1.9846|
002676  2001              MOVS     r0,#1                 ;1592
002678  49cf              LDR      r1,|L1.10680|
00267a  7008              STRB     r0,[r1,#0]            ;1592
00267c  e001              B        |L1.9858|
                  |L1.9854|
00267e  e000              B        |L1.9858|
                  |L1.9856|
002680  bf00              NOP                            ;1603
                  |L1.9858|
002682  bf00              NOP                            ;1531
002684  48c6              LDR      r0,|L1.10656|
002686  7800              LDRB     r0,[r0,#0]            ;1606  ; check_state
002688  2803              CMP      r0,#3                 ;1606
00268a  d100              BNE      |L1.9870|
00268c  e6bc              B        |L1.9224|
                  |L1.9870|
00268e  48c4              LDR      r0,|L1.10656|
002690  7800              LDRB     r0,[r0,#0]            ;1608  ; check_state
002692  2804              CMP      r0,#4                 ;1608
002694  d100              BNE      |L1.9880|
002696  e6b7              B        |L1.9224|
                  |L1.9880|
002698  2000              MOVS     r0,#0                 ;1612
00269a  e6b5              B        |L1.9224|
;;;1615   
                          ENDP

                  pressure2_calibration_process PROC
;;;1625   
;;;1626   void pressure2_calibration_process(void)// 压力计校准过程
00269c  b510              PUSH     {r4,lr}
;;;1627   {
;;;1628   	#ifdef  DEBUG_FLOW_LEVEL
;;;1629     static	uint8_t cali_step = pressure_cali_unknown; 
;;;1630   	#else
;;;1631   	static	uint8_t cali_step = pressure_cali_min;
;;;1632   	#endif
;;;1633   
;;;1634     uint16_t switch_value = 0;
00269e  2400              MOVS     r4,#0
;;;1635   	static uint8_t cali_fail_count = 0;
;;;1636   	if( cali_step != pressure_cali_sucessfull && flow_cali_enbale_flag == 0 
0026a0  48c6              LDR      r0,|L1.10684|
0026a2  7800              LDRB     r0,[r0,#0]  ; cali_step
0026a4  2804              CMP      r0,#4
0026a6  d070              BEQ      |L1.10122|
0026a8  48c5              LDR      r0,|L1.10688|
0026aa  7800              LDRB     r0,[r0,#0]  ; flow_cali_enbale_flag
0026ac  2800              CMP      r0,#0
                  |L1.9902|
0026ae  d16c              BNE      |L1.10122|
;;;1637   		  && pressure1_check_complted == 1) // 在不标定流量计的前提下,在另外一个泵自检完成后
0026b0  48c1              LDR      r0,|L1.10680|
0026b2  7800              LDRB     r0,[r0,#0]  ; pressure1_check_complted
0026b4  2801              CMP      r0,#1
0026b6  d1fa              BNE      |L1.9902|
;;;1638   	{
;;;1639   			if( pressure2_check_process() == pressure_check_fail)
0026b8  f7fffffe          BL       pressure2_check_process
0026bc  2804              CMP      r0,#4
0026be  d1f6              BNE      |L1.9902|
;;;1640   			{
;;;1641   					#ifdef  DEBUG_FLOW_LEVEL
;;;1642   					if(FOC_2_STATUS.enable_flag == STOP_SPARY) // 根据sensor id 判断	
0026c0  48c0              LDR      r0,|L1.10692|
0026c2  7800              LDRB     r0,[r0,#0]  ; FOC_2_STATUS
0026c4  f0000001          AND      r0,r0,#1
0026c8  b928              CBNZ     r0,|L1.9942|
;;;1643   					{
;;;1644   						cali_step = pressure_cali_unknown;
0026ca  2006              MOVS     r0,#6
0026cc  49bb              LDR      r1,|L1.10684|
0026ce  7008              STRB     r0,[r1,#0]
;;;1645   						SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
0026d0  2001              MOVS     r0,#1
0026d2  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
                  |L1.9942|
;;;1646   					}
;;;1647   					if(cali_step == pressure_cali_unknown
0026d6  48b9              LDR      r0,|L1.10684|
0026d8  7800              LDRB     r0,[r0,#0]  ; cali_step
0026da  2806              CMP      r0,#6
0026dc  d10d              BNE      |L1.9978|
;;;1648   						 && FOC_2_STATUS.enable_flag == START_SPARY
0026de  48b9              LDR      r0,|L1.10692|
0026e0  7800              LDRB     r0,[r0,#0]  ; FOC_2_STATUS
0026e2  f0000001          AND      r0,r0,#1
0026e6  b140              CBZ      r0,|L1.9978|
;;;1649   					   && FOC_2_STATUS.valid_spray == 1
0026e8  48b6              LDR      r0,|L1.10692|
0026ea  7840              LDRB     r0,[r0,#1]  ; FOC_2_STATUS
0026ec  2801              CMP      r0,#1
0026ee  d104              BNE      |L1.9978|
;;;1650   						) 
;;;1651   					{
;;;1652   						cali_step = pressure_cali_min;
0026f0  2000              MOVS     r0,#0
0026f2  49b2              LDR      r1,|L1.10684|
0026f4  7008              STRB     r0,[r1,#0]
;;;1653   						SET_FOC2_MUTEX_FLAG(0); // 获取水泵控制权
0026f6  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
                  |L1.9978|
;;;1654   					}
;;;1655   					#endif
;;;1656   
;;;1657   				switch(cali_step)
0026fa  48b0              LDR      r0,|L1.10684|
0026fc  7800              LDRB     r0,[r0,#0]  ; cali_step
0026fe  2806              CMP      r0,#6
002700  d273              BCS      |L1.10218|
002702  e8dff000          TBB      [pc,r0]
002706  031b              DCB      0x03,0x1b
002708  334c7374          DCB      0x33,0x4c,0x73,0x74
;;;1658   				{
;;;1659   					case pressure_cali_min:
;;;1660   						switch_value = Set_FOC2_Value_By_Pressure1(DEFAULT_FOC_VALUE,WORKING_PRESSURE_MIN);	  
00270c  f24041ec          MOV      r1,#0x4ec
002710  f24040ba          MOV      r0,#0x4ba
002714  f7fffffe          BL       Set_FOC2_Value_By_Pressure1
002718  4604              MOV      r4,r0
;;;1661   						if(switch_value == 0) // 校准失败
00271a  b934              CBNZ     r4,|L1.10026|
;;;1662   						{
;;;1663   							cali_step = pressure_cali_fail; 
00271c  2005              MOVS     r0,#5
00271e  49a7              LDR      r1,|L1.10684|
002720  7008              STRB     r0,[r1,#0]
;;;1664   							SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
002722  2001              MOVS     r0,#1
002724  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
002728  e007              B        |L1.10042|
                  |L1.10026|
;;;1665   						}
;;;1666   						else if (switch_value > MIN_CNT ) // 校准完成
00272a  f5b47f6b          CMP      r4,#0x3ac
00272e  dd04              BLE      |L1.10042|
;;;1667   						{
;;;1668   							spray_system_pressure_cali_para_2.throttle_value_min  = switch_value; 
002730  48a5              LDR      r0,|L1.10696|
002732  8044              STRH     r4,[r0,#2]
;;;1669   							cali_step = pressure_cali_default;
002734  2001              MOVS     r0,#1
002736  49a1              LDR      r1,|L1.10684|
002738  7008              STRB     r0,[r1,#0]
                  |L1.10042|
;;;1670   						}
;;;1671   						
;;;1672   
;;;1673   					break;
00273a  e06a              B        |L1.10258|
;;;1674   					
;;;1675   					case pressure_cali_default:
;;;1676   						switch_value = Set_FOC2_Value_By_Pressure1(spray_system_pressure_cali_para_2.throttle_value_min,WORKING_PRESSURE_DEFAULT);
00273c  49a2              LDR      r1,|L1.10696|
00273e  8848              LDRH     r0,[r1,#2]  ; spray_system_pressure_cali_para_2
002740  f240615e          MOV      r1,#0x65e
002744  f7fffffe          BL       Set_FOC2_Value_By_Pressure1
002748  4604              MOV      r4,r0
;;;1677   						if(switch_value == 0) // 校准失败
00274a  b934              CBNZ     r4,|L1.10074|
;;;1678   						{
;;;1679   							cali_step = pressure_cali_fail; 
00274c  2005              MOVS     r0,#5
00274e  499b              LDR      r1,|L1.10684|
002750  7008              STRB     r0,[r1,#0]
;;;1680   							SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
002752  2001              MOVS     r0,#1
002754  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
002758  e007              B        |L1.10090|
                  |L1.10074|
;;;1681   						}
;;;1682   						else if (switch_value > MIN_CNT ) // 校准完成
00275a  f5b47f6b          CMP      r4,#0x3ac
00275e  dd04              BLE      |L1.10090|
;;;1683   						{
;;;1684   							spray_system_pressure_cali_para_2.throttle_value_default  = switch_value; 
002760  4899              LDR      r0,|L1.10696|
002762  8084              STRH     r4,[r0,#4]
;;;1685   							cali_step = pressure_cali_max;
002764  2002              MOVS     r0,#2
002766  4995              LDR      r1,|L1.10684|
002768  7008              STRB     r0,[r1,#0]
                  |L1.10090|
;;;1686   						}
;;;1687   					break;
00276a  e052              B        |L1.10258|
;;;1688   
;;;1689   					case pressure_cali_max:	
;;;1690   						switch_value = Set_FOC2_Value_By_Pressure1(spray_system_pressure_cali_para_2.throttle_value_default,WORKING_PRESSURE_MAX);
00276c  4996              LDR      r1,|L1.10696|
00276e  8888              LDRH     r0,[r1,#4]  ; spray_system_pressure_cali_para_2
002770  f24061d6          MOV      r1,#0x6d6
002774  f7fffffe          BL       Set_FOC2_Value_By_Pressure1
002778  4604              MOV      r4,r0
;;;1691   						if(switch_value == 0) // 校准失败
00277a  b93c              CBNZ     r4,|L1.10124|
;;;1692   						{
;;;1693   							cali_step = pressure_cali_fail; 
00277c  2005              MOVS     r0,#5
00277e  498f              LDR      r1,|L1.10684|
002780  7008              STRB     r0,[r1,#0]
;;;1694   							SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
002782  2001              MOVS     r0,#1
002784  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
002788  e008              B        |L1.10140|
                  |L1.10122|
00278a  e043              B        |L1.10260|
                  |L1.10124|
;;;1695   						}
;;;1696   						else if (switch_value > MIN_CNT ) // 校准完成
00278c  f5b47f6b          CMP      r4,#0x3ac
002790  dd04              BLE      |L1.10140|
;;;1697   						{
;;;1698   							spray_system_pressure_cali_para_2.throttle_value_max  = switch_value; 
002792  488d              LDR      r0,|L1.10696|
002794  80c4              STRH     r4,[r0,#6]
;;;1699   							cali_step = pressure_para_write_flash;
002796  2003              MOVS     r0,#3
002798  4988              LDR      r1,|L1.10684|
00279a  7008              STRB     r0,[r1,#0]
                  |L1.10140|
;;;1700   						}
;;;1701   					break;	
00279c  e039              B        |L1.10258|
;;;1702   					
;;;1703   					case pressure_para_write_flash:		// 校准成功 发送命令给app 
;;;1704   					  Set_Throttle_Value_2(MIN_CNT);  // 校准成功 停止转动
00279e  f44f706b          MOV      r0,#0x3ac
0027a2  f7fffffe          BL       Set_Throttle_Value_2
;;;1705   						spray_system_pressure_cali_para_2.save_flag = Data_Exists_Flag;
0027a6  2055              MOVS     r0,#0x55
0027a8  4987              LDR      r1,|L1.10696|
0027aa  7008              STRB     r0,[r1,#0]
;;;1706   						spray_system_pressure_cali_para_2.need_cali_flag = 0;
0027ac  2000              MOVS     r0,#0
0027ae  7048              STRB     r0,[r1,#1]
;;;1707   						spray_system_pressure_cali_para_2.pressure_user = 0xAA;// for test
0027b0  20aa              MOVS     r0,#0xaa
0027b2  8108              STRH     r0,[r1,#8]
;;;1708   						cali_pressure2_para_write_flash((uint8_t*)&spray_system_pressure_cali_para_2,sizeof(spray_system_pressure_cali_para_t));
0027b4  210a              MOVS     r1,#0xa
0027b6  4884              LDR      r0,|L1.10696|
0027b8  f7fffffe          BL       cali_pressure2_para_write_flash
;;;1709   												
;;;1710   						Set_Spary_Limit_Value(FOC_2,MAX_SPRAY_ID,spray_system_pressure_cali_para_2.throttle_value_max);	
0027bc  4882              LDR      r0,|L1.10696|
0027be  88c2              LDRH     r2,[r0,#6]  ; spray_system_pressure_cali_para_2
0027c0  2101              MOVS     r1,#1
0027c2  2002              MOVS     r0,#2
0027c4  f7fffffe          BL       Set_Spary_Limit_Value
;;;1711   				    Set_Spary_Limit_Value(FOC_2,MIN_SPRAY_ID,spray_system_pressure_cali_para_2.throttle_value_min);		
0027c8  487f              LDR      r0,|L1.10696|
0027ca  8842              LDRH     r2,[r0,#2]  ; spray_system_pressure_cali_para_2
0027cc  2102              MOVS     r1,#2
0027ce  4608              MOV      r0,r1
0027d0  f7fffffe          BL       Set_Spary_Limit_Value
;;;1712   		
;;;1713   						cali_step = pressure_cali_sucessfull;
0027d4  2004              MOVS     r0,#4
0027d6  4979              LDR      r1,|L1.10684|
0027d8  7008              STRB     r0,[r1,#0]
;;;1714   						SET_FOC2_MUTEX_FLAG(1); // 释放水泵控制权
0027da  2001              MOVS     r0,#1
0027dc  f7fffffe          BL       SET_FOC2_MUTEX_FLAG
;;;1715   						uart_printf( 2, "************************pressure_para_write_flash****************\r\n" );
0027e0  497a              LDR      r1,|L1.10700|
0027e2  2002              MOVS     r0,#2
0027e4  f7fffffe          BL       uart_printf
;;;1716   						// 向参数区写参数
;;;1717   					break;
0027e8  e013              B        |L1.10258|
                  |L1.10218|
0027ea  e011              B        |L1.10256|
;;;1718   					
;;;1719   					case pressure_cali_sucessfull:		// 校准成功 发送命令给app 
;;;1720   						 // 执行不到
;;;1721   					break;
0027ec  e011              B        |L1.10258|
;;;1722   					
;;;1723   					case pressure_cali_fail:	// 校准失败 发送命令给app, 终止校准，给APP发命
;;;1724   						cali_fail_count++;
0027ee  4878              LDR      r0,|L1.10704|
0027f0  7800              LDRB     r0,[r0,#0]  ; cali_fail_count
0027f2  1c40              ADDS     r0,r0,#1
0027f4  4976              LDR      r1,|L1.10704|
0027f6  7008              STRB     r0,[r1,#0]
;;;1725   					 if(cali_fail_count<3)
0027f8  4608              MOV      r0,r1
0027fa  7800              LDRB     r0,[r0,#0]  ; cali_fail_count
0027fc  2803              CMP      r0,#3
0027fe  da03              BGE      |L1.10248|
;;;1726   					 {
;;;1727   							cali_step = pressure_cali_min;
002800  2000              MOVS     r0,#0
002802  496e              LDR      r1,|L1.10684|
002804  7008              STRB     r0,[r1,#0]
002806  e002              B        |L1.10254|
                  |L1.10248|
;;;1728   					 }
;;;1729   					 else
;;;1730   					 {
;;;1731   						 cali_fail_count = 3;
002808  2003              MOVS     r0,#3
00280a  4971              LDR      r1,|L1.10704|
00280c  7008              STRB     r0,[r1,#0]
                  |L1.10254|
;;;1732   						 // 发动检查水泵的指令
;;;1733   					 }
;;;1734   					break;
00280e  e000              B        |L1.10258|
                  |L1.10256|
;;;1735   					
;;;1736   					default:
;;;1737   						
;;;1738   					break;
002810  bf00              NOP      
                  |L1.10258|
002812  bf00              NOP                            ;1673
                  |L1.10260|
;;;1739   				}	
;;;1740   			}
;;;1741     }
;;;1742   }
002814  bd10              POP      {r4,pc}
;;;1743   
                          ENDP

                  pressure1_calibration_process PROC
;;;1744   void pressure1_calibration_process(void)// 压力计校准过程
002816  b510              PUSH     {r4,lr}
;;;1745   {
;;;1746   	#ifdef  DEBUG_FLOW_LEVEL
;;;1747     static	uint8_t cali_step = pressure_cali_unknown; 
;;;1748   	#else
;;;1749   	static	uint8_t cali_step = pressure_cali_min;
;;;1750   	#endif
;;;1751     uint16_t switch_value = 0;
002818  2400              MOVS     r4,#0
;;;1752   	static uint8_t cali_fail_count = 0;
;;;1753   	if( cali_step != pressure_cali_sucessfull && flow_cali_enbale_flag == 0) // 在不标定流量计的前提下
00281a  486e              LDR      r0,|L1.10708|
00281c  7800              LDRB     r0,[r0,#0]  ; cali_step
00281e  2804              CMP      r0,#4
002820  d075              BEQ      |L1.10510|
002822  4867              LDR      r0,|L1.10688|
002824  7800              LDRB     r0,[r0,#0]  ; flow_cali_enbale_flag
002826  2800              CMP      r0,#0
                  |L1.10280|
002828  d171              BNE      |L1.10510|
;;;1754   	{
;;;1755   			if( pressure1_check_process() == pressure_check_fail)
00282a  f7fffffe          BL       pressure1_check_process
00282e  2804              CMP      r0,#4
002830  d1fa              BNE      |L1.10280|
;;;1756   			{
;;;1757   					#ifdef  DEBUG_FLOW_LEVEL
;;;1758   					if(FOC_1_STATUS.enable_flag == STOP_SPARY) // 根据sensor id 判断	
002832  4869              LDR      r0,|L1.10712|
002834  7800              LDRB     r0,[r0,#0]  ; FOC_1_STATUS
002836  f0000001          AND      r0,r0,#1
00283a  b928              CBNZ     r0,|L1.10312|
;;;1759   					{
;;;1760   						cali_step = pressure_cali_unknown;
00283c  2006              MOVS     r0,#6
00283e  4965              LDR      r1,|L1.10708|
002840  7008              STRB     r0,[r1,#0]
;;;1761   						SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权
002842  2001              MOVS     r0,#1
002844  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
                  |L1.10312|
;;;1762   					}
;;;1763   					//FOC_1_STATUS.valid_spray  = 1;
;;;1764   					if(cali_step == pressure_cali_unknown
002848  4862              LDR      r0,|L1.10708|
00284a  7800              LDRB     r0,[r0,#0]  ; cali_step
00284c  2806              CMP      r0,#6
00284e  d10d              BNE      |L1.10348|
;;;1765   						 && FOC_1_STATUS.enable_flag == START_SPARY
002850  4861              LDR      r0,|L1.10712|
002852  7800              LDRB     r0,[r0,#0]  ; FOC_1_STATUS
002854  f0000001          AND      r0,r0,#1
002858  b140              CBZ      r0,|L1.10348|
;;;1766   					   && FOC_1_STATUS.valid_spray == 1
00285a  485f              LDR      r0,|L1.10712|
00285c  7840              LDRB     r0,[r0,#1]  ; FOC_1_STATUS
00285e  2801              CMP      r0,#1
002860  d104              BNE      |L1.10348|
;;;1767   				)		
;;;1768   					{
;;;1769   						cali_step = pressure_cali_min;
002862  2000              MOVS     r0,#0
002864  495b              LDR      r1,|L1.10708|
002866  7008              STRB     r0,[r1,#0]
;;;1770   						SET_FOC1_MUTEX_FLAG(0); // 获取水泵控制权
002868  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
                  |L1.10348|
;;;1771   					}
;;;1772   					#endif
;;;1773   			 
;;;1774   				
;;;1775   				switch(cali_step)
00286c  4859              LDR      r0,|L1.10708|
00286e  7800              LDRB     r0,[r0,#0]  ; cali_step
002870  2806              CMP      r0,#6
002872  d275              BCS      |L1.10592|
002874  e8dff000          TBB      [pc,r0]
002878  031b334c          DCB      0x03,0x1b,0x33,0x4c
00287c  7576              DCB      0x75,0x76
;;;1776   				{
;;;1777   					case pressure_cali_min:
;;;1778   						switch_value = Set_FOC1_Value_By_Pressure0(DEFAULT_FOC_VALUE,WORKING_PRESSURE_MIN);	  
00287e  f24041ec          MOV      r1,#0x4ec
002882  f24040ba          MOV      r0,#0x4ba
002886  f7fffffe          BL       Set_FOC1_Value_By_Pressure0
00288a  4604              MOV      r4,r0
;;;1779   						if(switch_value == 0) // 校准失败
00288c  b934              CBNZ     r4,|L1.10396|
;;;1780   						{
;;;1781   							cali_step = pressure_cali_fail; 
00288e  2005              MOVS     r0,#5
002890  4950              LDR      r1,|L1.10708|
002892  7008              STRB     r0,[r1,#0]
;;;1782   							SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权
002894  2001              MOVS     r0,#1
002896  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
00289a  e007              B        |L1.10412|
                  |L1.10396|
;;;1783   						}
;;;1784   						else if (switch_value > MIN_CNT ) // 校准完成
00289c  f5b47f6b          CMP      r4,#0x3ac
0028a0  dd04              BLE      |L1.10412|
;;;1785   						{
;;;1786   							spray_system_pressure_cali_para_1.throttle_value_min  = switch_value; 
0028a2  4841              LDR      r0,|L1.10664|
0028a4  8044              STRH     r4,[r0,#2]
;;;1787   							cali_step = pressure_cali_default;
0028a6  2001              MOVS     r0,#1
0028a8  494a              LDR      r1,|L1.10708|
0028aa  7008              STRB     r0,[r1,#0]
                  |L1.10412|
;;;1788   						}
;;;1789   					break;
0028ac  e06c              B        |L1.10632|
;;;1790   					
;;;1791   					case pressure_cali_default:
;;;1792   						switch_value = Set_FOC1_Value_By_Pressure0(spray_system_pressure_cali_para_1.throttle_value_min,WORKING_PRESSURE_DEFAULT);
0028ae  493e              LDR      r1,|L1.10664|
0028b0  8848              LDRH     r0,[r1,#2]  ; spray_system_pressure_cali_para_1
0028b2  f240615e          MOV      r1,#0x65e
0028b6  f7fffffe          BL       Set_FOC1_Value_By_Pressure0
0028ba  4604              MOV      r4,r0
;;;1793   						if(switch_value == 0) // 校准失败
0028bc  b934              CBNZ     r4,|L1.10444|
;;;1794   						{
;;;1795   							cali_step = pressure_cali_fail; 
0028be  2005              MOVS     r0,#5
0028c0  4944              LDR      r1,|L1.10708|
0028c2  7008              STRB     r0,[r1,#0]
;;;1796   							SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权
0028c4  2001              MOVS     r0,#1
0028c6  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
0028ca  e007              B        |L1.10460|
                  |L1.10444|
;;;1797   						}
;;;1798   						else if (switch_value > MIN_CNT ) // 校准完成
0028cc  f5b47f6b          CMP      r4,#0x3ac
0028d0  dd04              BLE      |L1.10460|
;;;1799   						{
;;;1800   							spray_system_pressure_cali_para_1.throttle_value_default  = switch_value; 
0028d2  4835              LDR      r0,|L1.10664|
0028d4  8084              STRH     r4,[r0,#4]
;;;1801   							cali_step = pressure_cali_max;
0028d6  2002              MOVS     r0,#2
0028d8  493e              LDR      r1,|L1.10708|
0028da  7008              STRB     r0,[r1,#0]
                  |L1.10460|
;;;1802   						}
;;;1803   					break;
0028dc  e054              B        |L1.10632|
;;;1804   
;;;1805   					case pressure_cali_max:	
;;;1806   						switch_value = Set_FOC1_Value_By_Pressure0(spray_system_pressure_cali_para_1.throttle_value_default,WORKING_PRESSURE_MAX);
0028de  4932              LDR      r1,|L1.10664|
0028e0  8888              LDRH     r0,[r1,#4]  ; spray_system_pressure_cali_para_1
0028e2  f24061d6          MOV      r1,#0x6d6
0028e6  f7fffffe          BL       Set_FOC1_Value_By_Pressure0
0028ea  4604              MOV      r4,r0
;;;1807   						if(switch_value == 0) // 校准失败
0028ec  b934              CBNZ     r4,|L1.10492|
;;;1808   						{
;;;1809   							cali_step = pressure_cali_fail; 
0028ee  2005              MOVS     r0,#5
0028f0  4938              LDR      r1,|L1.10708|
0028f2  7008              STRB     r0,[r1,#0]
;;;1810   							SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权
0028f4  2001              MOVS     r0,#1
0028f6  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
0028fa  e007              B        |L1.10508|
                  |L1.10492|
;;;1811   						}
;;;1812   						else if (switch_value > MIN_CNT ) // 校准完成
0028fc  f5b47f6b          CMP      r4,#0x3ac
002900  dd04              BLE      |L1.10508|
;;;1813   						{
;;;1814   							spray_system_pressure_cali_para_1.throttle_value_max  = switch_value; 
002902  4829              LDR      r0,|L1.10664|
002904  80c4              STRH     r4,[r0,#6]
;;;1815   							cali_step = pressure_para_write_flash;
002906  2003              MOVS     r0,#3
002908  4932              LDR      r1,|L1.10708|
00290a  7008              STRB     r0,[r1,#0]
                  |L1.10508|
;;;1816   						}
;;;1817   					break;	
00290c  e03c              B        |L1.10632|
                  |L1.10510|
00290e  e03c              B        |L1.10634|
;;;1818   					
;;;1819   					case pressure_para_write_flash:		// 校准成功 发送命令给app 
;;;1820   					
;;;1821   						Set_Throttle_Value_1(MIN_CNT); 
002910  f44f706b          MOV      r0,#0x3ac
002914  f7fffffe          BL       Set_Throttle_Value_1
;;;1822   						spray_system_pressure_cali_para_1.save_flag = Data_Exists_Flag;
002918  2055              MOVS     r0,#0x55
00291a  4923              LDR      r1,|L1.10664|
00291c  7008              STRB     r0,[r1,#0]
;;;1823   						spray_system_pressure_cali_para_1.need_cali_flag = 0;
00291e  2000              MOVS     r0,#0
002920  7048              STRB     r0,[r1,#1]
;;;1824   						spray_system_pressure_cali_para_1.pressure_user = 0xAA;// for test
002922  20aa              MOVS     r0,#0xaa
002924  8108              STRH     r0,[r1,#8]
;;;1825   						cali_pressure1_para_write_flash((uint8_t*)&spray_system_pressure_cali_para_1,sizeof(spray_system_pressure_cali_para_t));
002926  210a              MOVS     r1,#0xa
002928  481f              LDR      r0,|L1.10664|
00292a  f7fffffe          BL       cali_pressure1_para_write_flash
;;;1826   												
;;;1827   						Set_Spary_Limit_Value(FOC_1,MAX_SPRAY_ID,spray_system_pressure_cali_para_1.throttle_value_max);	
00292e  481e              LDR      r0,|L1.10664|
002930  88c2              LDRH     r2,[r0,#6]  ; spray_system_pressure_cali_para_1
002932  2101              MOVS     r1,#1
002934  4608              MOV      r0,r1
002936  f7fffffe          BL       Set_Spary_Limit_Value
;;;1828   				    Set_Spary_Limit_Value(FOC_1,MIN_SPRAY_ID,spray_system_pressure_cali_para_1.throttle_value_min);		
00293a  481b              LDR      r0,|L1.10664|
00293c  8842              LDRH     r2,[r0,#2]  ; spray_system_pressure_cali_para_1
00293e  2102              MOVS     r1,#2
002940  2001              MOVS     r0,#1
002942  f7fffffe          BL       Set_Spary_Limit_Value
;;;1829   							
;;;1830   						cali_step = pressure_cali_sucessfull;
002946  2004              MOVS     r0,#4
002948  4922              LDR      r1,|L1.10708|
00294a  7008              STRB     r0,[r1,#0]
;;;1831   					  pressure1_check_complted = 1;
00294c  2001              MOVS     r0,#1
00294e  491a              LDR      r1,|L1.10680|
002950  7008              STRB     r0,[r1,#0]
;;;1832   						SET_FOC1_MUTEX_FLAG(1); // 释放水泵控制权
002952  f7fffffe          BL       SET_FOC1_MUTEX_FLAG
;;;1833   						uart_printf( 2, "************************pressure_para_write_flash****************\r\n" );
002956  491d              LDR      r1,|L1.10700|
002958  2002              MOVS     r0,#2
00295a  f7fffffe          BL       uart_printf
;;;1834   						// 向参数区写参数
;;;1835   					break;
00295e  e013              B        |L1.10632|
                  |L1.10592|
002960  e011              B        |L1.10630|
;;;1836   					
;;;1837   					case pressure_cali_sucessfull:		// 校准成功 发送命令给app 
;;;1838   						 // 执行不到
;;;1839   					  
;;;1840   					break;
002962  e011              B        |L1.10632|
;;;1841   					
;;;1842   					case pressure_cali_fail:	// 校准失败 发送命令给app, 终止校准，给APP发命
;;;1843   						cali_fail_count++;
002964  481d              LDR      r0,|L1.10716|
002966  7800              LDRB     r0,[r0,#0]  ; cali_fail_count
002968  1c40              ADDS     r0,r0,#1
00296a  491c              LDR      r1,|L1.10716|
00296c  7008              STRB     r0,[r1,#0]
;;;1844   					 if(cali_fail_count<3)
00296e  4608              MOV      r0,r1
002970  7800              LDRB     r0,[r0,#0]  ; cali_fail_count
002972  2803              CMP      r0,#3
002974  da03              BGE      |L1.10622|
;;;1845   					 {
;;;1846   							cali_step = pressure_cali_min;
002976  2000              MOVS     r0,#0
002978  4916              LDR      r1,|L1.10708|
00297a  7008              STRB     r0,[r1,#0]
00297c  e002              B        |L1.10628|
                  |L1.10622|
;;;1847   					 }
;;;1848   					 else
;;;1849   					 {
;;;1850   						 cali_fail_count = 3;
00297e  2003              MOVS     r0,#3
002980  4916              LDR      r1,|L1.10716|
002982  7008              STRB     r0,[r1,#0]
                  |L1.10628|
;;;1851   						 //清除水泵压力标定的互斥标志位
;;;1852   						 
;;;1853   						 // 发动检查水泵的指令
;;;1854   					 }
;;;1855   					break;
002984  e000              B        |L1.10632|
                  |L1.10630|
;;;1856   					
;;;1857   					default:
;;;1858   						
;;;1859   					break;
002986  bf00              NOP      
                  |L1.10632|
002988  bf00              NOP                            ;1789
                  |L1.10634|
;;;1860   				}	
;;;1861   			}
;;;1862     }
;;;1863   }
00298a  bd10              POP      {r4,pc}
;;;1864   
                          ENDP

                  get_pump1_state PROC
;;;1870   uint8_t pump1_state = Air_In_The_Pipe,pump2_state = Air_In_The_Pipe;
;;;1871   uint8_t get_pump1_state(void)
00298c  4814              LDR      r0,|L1.10720|
;;;1872   {
;;;1873     return pump1_state;
00298e  7800              LDRB     r0,[r0,#0]  ; pump1_state
;;;1874   }
002990  4770              BX       lr
;;;1875   
                          ENDP

                  get_pump2_state PROC
;;;1876   uint8_t get_pump2_state(void)
002992  4814              LDR      r0,|L1.10724|
;;;1877   {
;;;1878     return pump2_state;
002994  7800              LDRB     r0,[r0,#0]  ; pump2_state
;;;1879   }
002996  4770              BX       lr
;;;1880   
                          ENDP

                  set_MedeRunoutFlag PROC
;;;1968    
;;;1969   void set_MedeRunoutFlag(uint8_t state)
002998  4913              LDR      r1,|L1.10728|
;;;1970   {
;;;1971       MedeRunoutFlag = state;
00299a  7008              STRB     r0,[r1,#0]
;;;1972   }
00299c  4770              BX       lr
00299e  0000              DCW      0x0000
                  |L1.10656|
                          DCD      |symbol_number.87|
                  |L1.10660|
                          DCD      ||.conststring||+0x4f8
                  |L1.10664|
                          DCD      spray_system_pressure_cali_para_1
                  |L1.10668|
                          DCD      |symbol_number.88|
                  |L1.10672|
                          DCD      |symbol_number.89|
                  |L1.10676|
                          DCD      Throttle_Value_1
                  |L1.10680|
                          DCD      pressure1_check_complted
                  |L1.10684|
                          DCD      cali_step
                  |L1.10688|
                          DCD      flow_cali_enbale_flag
                  |L1.10692|
                          DCD      FOC_2_STATUS
                  |L1.10696|
                          DCD      spray_system_pressure_cali_para_2
                  |L1.10700|
                          DCD      ||.conststring||+0x558
                  |L1.10704|
                          DCD      cali_fail_count
                  |L1.10708|
                          DCD      |symbol_number.92|
                  |L1.10712|
                          DCD      FOC_1_STATUS
                  |L1.10716|
                          DCD      |symbol_number.93|
                  |L1.10720|
                          DCD      pump1_state
                  |L1.10724|
                          DCD      pump2_state
                  |L1.10728|
                          DCD      MedeRunoutFlag
                          ENDP

                  remaining_capacity_detection PROC
;;;1881   uint8_t MedeRunoutFlag = 0; // 初始化为有药
;;;1882   uint8_t remaining_capacity_detection( void )// 100HZ 
0029ec  b510              PUSH     {r4,lr}
;;;1883   {
;;;1884   	uint8_t res = 0; 
0029ee  2400              MOVS     r4,#0
;;;1885   	static uint16_t count_detect_1 = 0; 
;;;1886   	static uint16_t count_detect_2 = 0; 
;;;1887   	static uint16_t count_detect_3 = 0; 
;;;1888   	static uint16_t count_detect_4 = 0; 
;;;1889   	if( (get_foc_throttle_value(FOC_1) >= (Get_Spary_Limit_Value(FOC_1,MIN_SPRAY_ID) ) && get_cali_flow_freq() <= 1)
0029f0  2001              MOVS     r0,#1
0029f2  f7fffffe          BL       get_foc_throttle_value
0029f6  4603              MOV      r3,r0
0029f8  2102              MOVS     r1,#2
0029fa  2001              MOVS     r0,#1
0029fc  f7fffffe          BL       Get_Spary_Limit_Value
002a00  4283              CMP      r3,r0
002a02  db03              BLT      |L1.10764|
002a04  f7fffffe          BL       get_cali_flow_freq
002a08  2801              CMP      r0,#1
002a0a  dd0d              BLE      |L1.10792|
                  |L1.10764|
;;;1890   			 || (get_foc_throttle_value(FOC_2) >= (Get_Spary_Limit_Value(FOC_2,MIN_SPRAY_ID) ) && get_cali_flow_freq() <= 1))
002a0c  2002              MOVS     r0,#2
002a0e  f7fffffe          BL       get_foc_throttle_value
002a12  4603              MOV      r3,r0
002a14  2102              MOVS     r1,#2
002a16  4608              MOV      r0,r1
002a18  f7fffffe          BL       Get_Spary_Limit_Value
002a1c  4283              CMP      r3,r0
002a1e  db20              BLT      |L1.10850|
002a20  f7fffffe          BL       get_cali_flow_freq
002a24  2801              CMP      r0,#1
002a26  dc1c              BGT      |L1.10850|
                  |L1.10792|
;;;1891   	{
;;;1892   		count_detect_1++;
002a28  4866              LDR      r0,|L1.11204|
002a2a  8800              LDRH     r0,[r0,#0]  ; count_detect_1
002a2c  1c40              ADDS     r0,r0,#1
002a2e  4965              LDR      r1,|L1.11204|
002a30  8008              STRH     r0,[r1,#0]
;;;1893   		count_detect_2 = 0;
002a32  2000              MOVS     r0,#0
002a34  4964              LDR      r1,|L1.11208|
002a36  8008              STRH     r0,[r1,#0]
;;;1894   		if(count_detect_1 >= 500)
002a38  4862              LDR      r0,|L1.11204|
002a3a  8800              LDRH     r0,[r0,#0]  ; count_detect_1
002a3c  f5b07ffa          CMP      r0,#0x1f4
002a40  db0e              BLT      |L1.10848|
;;;1895   		{
;;;1896   			count_detect_1 = 500;
002a42  f44f70fa          MOV      r0,#0x1f4
002a46  495f              LDR      r1,|L1.11204|
002a48  8008              STRH     r0,[r1,#0]
;;;1897   		  if(get_capacity_flag_1L() == 1)//浮子触发后再用此方法判断无药
002a4a  f7fffffe          BL       get_capacity_flag_1L
002a4e  2801              CMP      r0,#1
002a50  d101              BNE      |L1.10838|
;;;1898   			{
;;;1899   				set_MedeRunoutFlag(1);
002a52  f7fffffe          BL       set_MedeRunoutFlag
                  |L1.10838|
;;;1900   			}
;;;1901   			pump1_state = Air_In_The_Pipe;
002a56  2002              MOVS     r0,#2
002a58  495c              LDR      r1,|L1.11212|
002a5a  7008              STRB     r0,[r1,#0]
;;;1902   			pump2_state = Air_In_The_Pipe;
002a5c  495c              LDR      r1,|L1.11216|
002a5e  7008              STRB     r0,[r1,#0]
                  |L1.10848|
002a60  e0ab              B        |L1.11194|
                  |L1.10850|
;;;1903   		}
;;;1904   	}
;;;1905     else if((get_foc_throttle_value(FOC_1) >= (Get_Spary_Limit_Value(FOC_1,MIN_SPRAY_ID)) && get_cali_flow_freq() > 5)
002a62  2001              MOVS     r0,#1
002a64  f7fffffe          BL       get_foc_throttle_value
002a68  4603              MOV      r3,r0
002a6a  2102              MOVS     r1,#2
002a6c  2001              MOVS     r0,#1
002a6e  f7fffffe          BL       Get_Spary_Limit_Value
002a72  4283              CMP      r3,r0
002a74  db03              BLT      |L1.10878|
002a76  f7fffffe          BL       get_cali_flow_freq
002a7a  2805              CMP      r0,#5
002a7c  dc0d              BGT      |L1.10906|
                  |L1.10878|
;;;1906   	     || (get_foc_throttle_value(FOC_2) >= (Get_Spary_Limit_Value(FOC_2,MIN_SPRAY_ID)) && get_cali_flow_freq() > 5))
002a7e  2002              MOVS     r0,#2
002a80  f7fffffe          BL       get_foc_throttle_value
002a84  4603              MOV      r3,r0
002a86  2102              MOVS     r1,#2
002a88  4608              MOV      r0,r1
002a8a  f7fffffe          BL       Get_Spary_Limit_Value
002a8e  4283              CMP      r3,r0
002a90  dbe6              BLT      |L1.10848|
002a92  f7fffffe          BL       get_cali_flow_freq
002a96  2805              CMP      r0,#5
002a98  dde2              BLE      |L1.10848|
                  |L1.10906|
;;;1907   	{
;;;1908   		 count_detect_1 = 0;
002a9a  2000              MOVS     r0,#0
002a9c  4949              LDR      r1,|L1.11204|
002a9e  8008              STRH     r0,[r1,#0]
;;;1909   		 if(FOC_1_STATUS.valid_spray == 1)// 飞机起飞后压力判断
002aa0  484c              LDR      r0,|L1.11220|
002aa2  7840              LDRB     r0,[r0,#1]  ; FOC_1_STATUS
002aa4  2801              CMP      r0,#1
002aa6  d172              BNE      |L1.11150|
;;;1910   		 {
;;;1911   				if( (get_foc_throttle_value(FOC_1) > (Get_Spary_Limit_Value(FOC_1,MIN_SPRAY_ID)) && get_press_value(Press_Sensor_0) < 840)//adc  mv
002aa8  f7fffffe          BL       get_foc_throttle_value
002aac  4603              MOV      r3,r0
002aae  2102              MOVS     r1,#2
002ab0  2001              MOVS     r0,#1
002ab2  f7fffffe          BL       Get_Spary_Limit_Value
002ab6  4283              CMP      r3,r0
002ab8  dd05              BLE      |L1.10950|
002aba  2000              MOVS     r0,#0
002abc  f7fffffe          BL       get_press_value
002ac0  f5b07f52          CMP      r0,#0x348
002ac4  db0f              BLT      |L1.10982|
                  |L1.10950|
;;;1912   		          || (get_foc_throttle_value(FOC_2) > (Get_Spary_Limit_Value(FOC_2,MIN_SPRAY_ID) ) && get_press_value(Press_Sensor_1) < 840))
002ac6  2002              MOVS     r0,#2
002ac8  f7fffffe          BL       get_foc_throttle_value
002acc  4603              MOV      r3,r0
002ace  2102              MOVS     r1,#2
002ad0  4608              MOV      r0,r1
002ad2  f7fffffe          BL       Get_Spary_Limit_Value
002ad6  4283              CMP      r3,r0
002ad8  dd1c              BLE      |L1.11028|
002ada  2001              MOVS     r0,#1
002adc  f7fffffe          BL       get_press_value
002ae0  f5b07f52          CMP      r0,#0x348
002ae4  da16              BGE      |L1.11028|
                  |L1.10982|
;;;1913   				{
;;;1914   					count_detect_3++;
002ae6  483c              LDR      r0,|L1.11224|
002ae8  8800              LDRH     r0,[r0,#0]  ; count_detect_3
002aea  1c40              ADDS     r0,r0,#1
002aec  493a              LDR      r1,|L1.11224|
002aee  8008              STRH     r0,[r1,#0]
;;;1915   					count_detect_4 = 0;
002af0  2000              MOVS     r0,#0
002af2  493a              LDR      r1,|L1.11228|
002af4  8008              STRH     r0,[r1,#0]
;;;1916   					if(count_detect_3 >= 500)
002af6  4838              LDR      r0,|L1.11224|
002af8  8800              LDRH     r0,[r0,#0]  ; count_detect_3
002afa  f5b07ffa          CMP      r0,#0x1f4
002afe  db5c              BLT      |L1.11194|
;;;1917   					{
;;;1918   						count_detect_3 = 500;
002b00  f44f70fa          MOV      r0,#0x1f4
002b04  4934              LDR      r1,|L1.11224|
002b06  8008              STRH     r0,[r1,#0]
;;;1919   						pump1_state = Air_In_The_Pipe;
002b08  2002              MOVS     r0,#2
002b0a  4930              LDR      r1,|L1.11212|
002b0c  7008              STRB     r0,[r1,#0]
;;;1920   			      pump2_state = Air_In_The_Pipe;
002b0e  4930              LDR      r1,|L1.11216|
002b10  7008              STRB     r0,[r1,#0]
002b12  e052              B        |L1.11194|
                  |L1.11028|
;;;1921   					}
;;;1922   				}
;;;1923   				else if((get_foc_throttle_value(FOC_1) > (Get_Spary_Limit_Value(FOC_1,MIN_SPRAY_ID)) && get_press_value(Press_Sensor_0) > 940)// adc :mv
002b14  2001              MOVS     r0,#1
002b16  f7fffffe          BL       get_foc_throttle_value
002b1a  4603              MOV      r3,r0
002b1c  2102              MOVS     r1,#2
002b1e  2001              MOVS     r0,#1
002b20  f7fffffe          BL       Get_Spary_Limit_Value
002b24  4283              CMP      r3,r0
002b26  dd05              BLE      |L1.11060|
002b28  2000              MOVS     r0,#0
002b2a  f7fffffe          BL       get_press_value
002b2e  f5b07f6b          CMP      r0,#0x3ac
002b32  dc0f              BGT      |L1.11092|
                  |L1.11060|
;;;1924   						 || (get_foc_throttle_value(FOC_2) > (Get_Spary_Limit_Value(FOC_2,MIN_SPRAY_ID)) && get_press_value(Press_Sensor_1) > 940))
002b34  2002              MOVS     r0,#2
002b36  f7fffffe          BL       get_foc_throttle_value
002b3a  4603              MOV      r3,r0
002b3c  2102              MOVS     r1,#2
002b3e  4608              MOV      r0,r1
002b40  f7fffffe          BL       Get_Spary_Limit_Value
002b44  4283              CMP      r3,r0
002b46  dd1b              BLE      |L1.11136|
002b48  2001              MOVS     r0,#1
002b4a  f7fffffe          BL       get_press_value
002b4e  f5b07f6b          CMP      r0,#0x3ac
002b52  dd15              BLE      |L1.11136|
                  |L1.11092|
;;;1925   				{
;;;1926   					count_detect_3 = 0;
002b54  2000              MOVS     r0,#0
002b56  4920              LDR      r1,|L1.11224|
002b58  8008              STRH     r0,[r1,#0]
;;;1927   					count_detect_4++;
002b5a  4820              LDR      r0,|L1.11228|
002b5c  8800              LDRH     r0,[r0,#0]  ; count_detect_4
002b5e  1c40              ADDS     r0,r0,#1
002b60  491e              LDR      r1,|L1.11228|
002b62  8008              STRH     r0,[r1,#0]
;;;1928   					if(count_detect_4 > 300)
002b64  4608              MOV      r0,r1
002b66  8800              LDRH     r0,[r0,#0]  ; count_detect_4
002b68  f5b07f96          CMP      r0,#0x12c
002b6c  dd25              BLE      |L1.11194|
;;;1929   					{	
;;;1930   						count_detect_4 = 300;
002b6e  f44f7096          MOV      r0,#0x12c
002b72  8008              STRH     r0,[r1,#0]
;;;1931   						pump1_state = Pump_Normal;
002b74  2000              MOVS     r0,#0
002b76  4915              LDR      r1,|L1.11212|
002b78  7008              STRB     r0,[r1,#0]
;;;1932   						pump2_state = Pump_Normal;
002b7a  4915              LDR      r1,|L1.11216|
002b7c  7008              STRB     r0,[r1,#0]
002b7e  e01c              B        |L1.11194|
                  |L1.11136|
;;;1933   					}
;;;1934   				}
;;;1935   				else
;;;1936   				{
;;;1937   				  count_detect_3 = 0;
002b80  2000              MOVS     r0,#0
002b82  4915              LDR      r1,|L1.11224|
002b84  8008              STRH     r0,[r1,#0]
;;;1938   					count_detect_4 = 0;
002b86  4915              LDR      r1,|L1.11228|
002b88  8008              STRH     r0,[r1,#0]
002b8a  e016              B        |L1.11194|
002b8c  e7ff              B        |L1.11150|
                  |L1.11150|
;;;1939   				}
;;;1940   		  //uart_printf( 2, "count_detect_3  = %d  count_detect_4 = %d \r\n", count_detect_3, count_detect_4);	
;;;1941   			}
;;;1942   			else// 落地后流量计判断
;;;1943   			{
;;;1944   					count_detect_2++;
002b8e  480e              LDR      r0,|L1.11208|
002b90  8800              LDRH     r0,[r0,#0]  ; count_detect_2
002b92  1c40              ADDS     r0,r0,#1
002b94  490c              LDR      r1,|L1.11208|
002b96  8008              STRH     r0,[r1,#0]
;;;1945   				  count_detect_3 = 0;
002b98  2000              MOVS     r0,#0
002b9a  490f              LDR      r1,|L1.11224|
002b9c  8008              STRH     r0,[r1,#0]
;;;1946   				  count_detect_4 = 0;
002b9e  490f              LDR      r1,|L1.11228|
002ba0  8008              STRH     r0,[r1,#0]
;;;1947   					if(count_detect_2 > 200)
002ba2  4809              LDR      r0,|L1.11208|
002ba4  8800              LDRH     r0,[r0,#0]  ; count_detect_2
002ba6  28c8              CMP      r0,#0xc8
002ba8  dd07              BLE      |L1.11194|
;;;1948   					{	
;;;1949   						count_detect_2 = 200;
002baa  20c8              MOVS     r0,#0xc8
002bac  4906              LDR      r1,|L1.11208|
002bae  8008              STRH     r0,[r1,#0]
;;;1950   						pump1_state = Pump_Normal;
002bb0  2000              MOVS     r0,#0
002bb2  4906              LDR      r1,|L1.11212|
002bb4  7008              STRB     r0,[r1,#0]
;;;1951   						pump2_state = Pump_Normal;
002bb6  4906              LDR      r1,|L1.11216|
002bb8  7008              STRB     r0,[r1,#0]
                  |L1.11194|
;;;1952   					}	
;;;1953   			}		
;;;1954   			//uart_printf( 2, "count_detect_1  = %d  count_detect_2 = %d \r\n", count_detect_1, count_detect_2);	
;;;1955   			//uart_printf( 2, "pump1_state  = %d  pump2_state = %d \r\n", pump1_state, pump2_state);
;;;1956   	}
;;;1957   	
;;;1958   	return res;
002bba  4620              MOV      r0,r4
;;;1959   }
002bbc  bd10              POP      {r4,pc}
;;;1960   
                          ENDP

                  get_MedeRunoutFlag PROC
;;;1963   
;;;1964   uint8_t get_MedeRunoutFlag(void)
002bbe  4808              LDR      r0,|L1.11232|
;;;1965   {
;;;1966      return MedeRunoutFlag;
002bc0  7800              LDRB     r0,[r0,#0]  ; MedeRunoutFlag
;;;1967   }
002bc2  4770              BX       lr
;;;1968    
                          ENDP

                  |L1.11204|
                          DCD      count_detect_1
                  |L1.11208|
                          DCD      count_detect_2
                  |L1.11212|
                          DCD      pump1_state
                  |L1.11216|
                          DCD      pump2_state
                  |L1.11220|
                          DCD      FOC_1_STATUS
                  |L1.11224|
                          DCD      count_detect_3
                  |L1.11228|
                          DCD      count_detect_4
                  |L1.11232|
                          DCD      MedeRunoutFlag

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  ADC_channel0_buf
                          %        100
                  ADC_channel1_buf
                          %        100
                  spray_system_flow_cali_para1
                          %        12
                  spray_system_pressure_cali_para_1
                          %        12
                  spray_system_pressure_cali_para_2
                          %        10
                  temp0
                          %        102
                  temp1
                          %        102
                  flow_temp
                          %        81

                          AREA ||.conststring||, DATA, READONLY, MERGE=1, STRINGS, ALIGN=2

000000  76655f31          DCB      "ve_1 = %.2f ve_2 = %.2f step_p = %.2f idx_7 = %d  tart_"
000004  203d2025
000008  2e326620
00000c  76655f32
000010  203d2025
000014  2e326620
000018  73746570
00001c  5f70203d
000020  20252e32
000024  66206964
000028  785f3720
00002c  3d202564
000030  20207461
000034  72745f  
000037  70203d20          DCB      "p = %.2f tar_f = %.2f current_t = %d tar_c_d = %.2f\r\n"
00003b  252e3266
00003f  20746172
000043  5f66203d
000047  20252e32
00004b  66206375
00004f  7272656e
000053  745f7420
000057  3d202564
00005b  20746172
00005f  5f635f64
000063  203d2025
000067  2e32660d
00006b  0a      
00006c  00                DCB      0
00006d  00                DCB      0
00006e  00                DCB      0
00006f  00                DCB      0
000070  20312d2d          DCB      " 1--v_1 = %.2f step_p = %.2f idx_7 = %d  tar_p_1 = %.2f"
000074  765f3120
000078  3d20252e
00007c  32662073
000080  7465705f
000084  70203d20
000088  252e3266
00008c  20696478
000090  5f37203d
000094  20256420
000098  20746172
00009c  5f705f31
0000a0  203d2025
0000a4  2e3266  
0000a7  20746172          DCB      " tar_flow = %.2f cur_total = %d tar_capa = %.2f \r\n",0
0000ab  5f666c6f
0000af  77203d20
0000b3  252e3266
0000b7  20637572
0000bb  5f746f74
0000bf  616c203d
0000c3  20256420
0000c7  7461725f
0000cb  63617061
0000cf  203d2025
0000d3  2e326620
0000d7  0d0a00  
0000da  00                DCB      0
0000db  00                DCB      0
0000dc  20322d2d          DCB      " 2--v2 = %.2f step_p_2 = %.2f idx_7 = %d tar_p_2 = %.2f"
0000e0  7632203d
0000e4  20252e32
0000e8  66207374
0000ec  65705f70
0000f0  5f32203d
0000f4  20252e32
0000f8  66206964
0000fc  785f3720
000100  3d202564
000104  20746172
000108  5f705f32
00010c  203d2025
000110  2e3266  
000113  20746172          DCB      " tar_f = %.2f curr_c = %d tar_c = %.2f \r\n",0
000117  5f66203d
00011b  20252e32
00011f  66206375
000123  72725f63
000127  203d2025
00012b  64207461
00012f  725f6320
000133  3d20252e
000137  3266200d
00013b  0a00    
00013d  00                DCB      0
00013e  00                DCB      0
00013f  00                DCB      0
000140  636f6e74          DCB      "control_value_1 = %.2f  step_value_pulse_1 = %.2f idx_7"
000144  726f6c5f
000148  76616c75
00014c  655f3120
000150  3d20252e
000154  32662020
000158  73746570
00015c  5f76616c
000160  75655f70
000164  756c7365
000168  5f31203d
00016c  20252e32
000170  66206964
000174  785f37  
000177  5f667265          DCB      "_freq = %d  target_value_1 = %d  press0_value_min = %d "
00017b  71203d20
00017f  25642020
000183  74617267
000187  65745f76
00018b  616c7565
00018f  5f31203d
000193  20256420
000197  20707265
00019b  7373305f
00019f  76616c75
0001a3  655f6d69
0001a7  6e203d20
0001ab  256420  
0001ae  200d0a00          DCB      " \r\n",0
0001b2  00                DCB      0
0001b3  00                DCB      0
0001b4  636f6e74          DCB      "control_value_2 = %.2f  step_value_pulse_2 = %.2f idx_7"
0001b8  726f6c5f
0001bc  76616c75
0001c0  655f3220
0001c4  3d20252e
0001c8  32662020
0001cc  73746570
0001d0  5f76616c
0001d4  75655f70
0001d8  756c7365
0001dc  5f32203d
0001e0  20252e32
0001e4  66206964
0001e8  785f37  
0001eb  5f667265          DCB      "_freq = %d  target_value_2 = %d  press1_value_min_2 = %"
0001ef  71203d20
0001f3  25642020
0001f7  74617267
0001fb  65745f76
0001ff  616c7565
000203  5f32203d
000207  20256420
00020b  20707265
00020f  7373315f
000213  76616c75
000217  655f6d69
00021b  6e5f3220
00021f  3d2025  
000222  6420200d          DCB      "d  \r\n",0
000226  0a00    
000228  73746570          DCB      "step_value = %.2f   run_foc_count = %d  set_count = %d "
00022c  5f76616c
000230  7565203d
000234  20252e32
000238  66202020
00023c  72756e5f
000240  666f635f
000244  636f756e
000248  74203d20
00024c  25642020
000250  7365745f
000254  636f756e
000258  74203d20
00025c  256420  
00025f  20207072          DCB      "  press0_value_min =  %d ,foc_value = %.2f \r\n",0
000263  65737330
000267  5f76616c
00026b  75655f6d
00026f  696e203d
000273  20202564
000277  202c666f
00027b  635f7661
00027f  6c756520
000283  3d20252e
000287  3266200d
00028b  0a00    
00028d  00                DCB      0
00028e  00                DCB      0
00028f  00                DCB      0
000290  63616c69          DCB      "cali_pulses_1 = %d ***** cali_time_1 = %d  current_capa"
000294  5f70756c
000298  7365735f
00029c  31203d20
0002a0  2564202a
0002a4  2a2a2a2a
0002a8  2063616c
0002ac  695f7469
0002b0  6d655f31
0002b4  203d2025
0002b8  64202063
0002bc  75727265
0002c0  6e745f63
0002c4  617061  
0002c7  63697479          DCB      "city_total = %d \r\n",0
0002cb  5f746f74
0002cf  616c203d
0002d3  20256420
0002d7  0d0a00  
0002da  00                DCB      0
0002db  00                DCB      0
0002dc  2a2a2a2a          DCB      "************************flow1_para_write_flash*********"
0002e0  2a2a2a2a
0002e4  2a2a2a2a
0002e8  2a2a2a2a
0002ec  2a2a2a2a
0002f0  2a2a2a2a
0002f4  666c6f77
0002f8  315f7061
0002fc  72615f77
000300  72697465
000304  5f666c61
000308  73682a2a
00030c  2a2a2a2a
000310  2a2a2a  
000313  2a2a2a2a          DCB      "*******\r\n",0
000317  2a2a2a0d
00031b  0a00    
00031d  00                DCB      0
00031e  00                DCB      0
00031f  00                DCB      0
000320  63616c69          DCB      "cali_pulses_1 =  %d   cali_time_1 = %d  user_volume = %"
000324  5f70756c
000328  7365735f
00032c  31203d20
000330  20256420
000334  20206361
000338  6c695f74
00033c  696d655f
000340  31203d20
000344  25642020
000348  75736572
00034c  5f766f6c
000350  756d6520
000354  3d2025  
000357  2e336620          DCB      ".3f  current_capacity_total = %d \r\n",0
00035b  20637572
00035f  72656e74
000363  5f636170
000367  61636974
00036b  795f746f
00036f  74616c20
000373  3d202564
000377  200d0a00
00037b  00                DCB      0
00037c  24242424          DCB      "$$$$$$$$$$$$  step_value_2 = %.2f   run_foc_count_2 = %"
000380  24242020
000384  73746570
000388  5f76616c
00038c  75655f32
000390  203d2025
000394  2e326620
000398  20207275
00039c  6e5f666f
0003a0  635f636f
0003a4  756e745f
0003a8  32203d20
0003ac  25      
0003ad  64202073          DCB      "d  set_count = %d   press1_value_min =  %d ,foc_value_2"
0003b1  65745f63
0003b5  6f756e74
0003b9  203d2025
0003bd  64202020
0003c1  70726573
0003c5  73315f76
0003c9  616c7565
0003cd  5f6d696e
0003d1  203d2020
0003d5  2564202c
0003d9  666f635f
0003dd  76616c75
0003e1  655f32  
0003e4  203d2025          DCB      " = %.2f \r\n",0
0003e8  2e326620
0003ec  0d0a00  
0003ef  00                DCB      0
0003f0  63616c69          DCB      "cali_pulses_2 = %d ***** cali_time_2 = %d  current_capa"
0003f4  5f70756c
0003f8  7365735f
0003fc  32203d20
000400  2564202a
000404  2a2a2a2a
000408  2063616c
00040c  695f7469
000410  6d655f32
000414  203d2025
000418  64202063
00041c  75727265
000420  6e745f63
000424  617061  
000427  63697479          DCB      "city_total = %d  \r\n",0
00042b  5f746f74
00042f  616c203d
000433  20256420
000437  200d0a00
00043b  00                DCB      0
00043c  63616c69          DCB      "cali_pulses_2 =  %d   cali_time_2 = %d  user_volume = %"
000440  5f70756c
000444  7365735f
000448  32203d20
00044c  20256420
000450  20206361
000454  6c695f74
000458  696d655f
00045c  32203d20
000460  25642020
000464  75736572
000468  5f766f6c
00046c  756d6520
000470  3d2025  
000473  2e336620          DCB      ".3f current_capacity_total = %d\r\n",0
000477  63757272
00047b  656e745f
00047f  63617061
000483  63697479
000487  5f746f74
00048b  616c203d
00048f  2025640d
000493  0a00    
000495  00                DCB      0
000496  00                DCB      0
000497  00                DCB      0
000498  63686563          DCB      "check_state =%d  check_count = %d  timeout_count = %d p"
00049c  6b5f7374
0004a0  61746520
0004a4  3d256420
0004a8  20636865
0004ac  636b5f63
0004b0  6f756e74
0004b4  203d2025
0004b8  64202074
0004bc  696d656f
0004c0  75745f63
0004c4  6f756e74
0004c8  203d2025
0004cc  642070  
0004cf  65727373          DCB      "erssure = %d  Throttle_Value_2 = %d \r\n",0
0004d3  75726520
0004d7  3d202564
0004db  20205468
0004df  726f7474
0004e3  6c655f56
0004e7  616c7565
0004eb  5f32203d
0004ef  20256420
0004f3  0d0a00  
0004f6  00                DCB      0
0004f7  00                DCB      0
0004f8  63686563          DCB      "check_state =%d  check_count = %d  timeout_count = %d p"
0004fc  6b5f7374
000500  61746520
000504  3d256420
000508  20636865
00050c  636b5f63
000510  6f756e74
000514  203d2025
000518  64202074
00051c  696d656f
000520  75745f63
000524  6f756e74
000528  203d2025
00052c  642070  
00052f  65727373          DCB      "erssure = %d  Throttle_Value_1 = %d \r\n",0
000533  75726520
000537  3d202564
00053b  20205468
00053f  726f7474
000543  6c655f56
000547  616c7565
00054b  5f31203d
00054f  20256420
000553  0d0a00  
000556  00                DCB      0
000557  00                DCB      0
000558  2a2a2a2a          DCB      "************************pressure_para_write_flash******"
00055c  2a2a2a2a
000560  2a2a2a2a
000564  2a2a2a2a
000568  2a2a2a2a
00056c  2a2a2a2a
000570  70726573
000574  73757265
000578  5f706172
00057c  615f7772
000580  6974655f
000584  666c6173
000588  682a2a2a
00058c  2a2a2a  
00058f  2a2a2a2a          DCB      "**********\r\n",0
000593  2a2a2a2a
000597  2a2a0d0a
00059b  00      

                          AREA ||.data||, DATA, ALIGN=2

                  Debug_Voltage_Press
000000  0000              DCB      0x00,0x00
                  pipe_status
000002  0000              DCB      0x00,0x00
                  press0_value
000004  0000              DCB      0x00,0x00
                  press1_value
000006  0000              DCB      0x00,0x00
                  last_press0_value
000008  0000              DCB      0x00,0x00
                  last_press1_value
00000a  0000              DCB      0x00,0x00
                  press0_value_min
00000c  0000              DCW      0x0000
                  press1_value_min
00000e  0000              DCW      0x0000
                  Voltage_Press_0
000010  00000000          DCFS     0x00000000 ; 0
                  Voltage_Press_1
000014  00000000          DCFS     0x00000000 ; 0
                  capacity_flag_1L
000018  01                DCB      0x01
                  level_stauts
000019  00                DCB      0x00
                  level_count
00001a  0000              DCB      0x00,0x00
                  Volume_Each_Pulse
00001c  00000000          DCFS     0x00000000 ; 0
                  user_volume
000020  00000000          DCFS     0x00000000 ; 0
                  flow_compute
000024  00000000          DCFS     0x00000000 ; 0
                  current_capacity_part
000028  00000000          DCFS     0x00000000 ; 0
                  Med_Frequency_Pulse
00002c  0000              DCB      0x00,0x00
                  current_capacity_total
00002e  0000              DCW      0x0000
                  Cali_Freq
                          DCD      0x00000000
                  debug_watch_k_value
000034  00000000          DCFS     0x00000000 ; 0
                  Viscosity_Offset_Coeff
000038  3d4ccccd          DCFS     0x3d4ccccd ; 0.05000000074505806
                  Viscosity_Offset
00003c  00000000          DCFS     0x00000000 ; 0
                  K_offset
000040  00000000          DCFS     0x00000000 ; 0
                  temperature0_value
000044  0000              DCB      0x00,0x00
                  temperature1_value
000046  0000              DCB      0x00,0x00
                  temperature0_voltage
                          DCD      0x00000000
                  temperature1_voltage
                          DCD      0x00000000
                  temperature0_interface_battery
                          DCD      0x00000000
                  temperature1_interface_battery
                          DCD      0x00000000
                  XT100_battery_temp_state
000058  00                DCB      0x00
                  XT90_battery_temp_state
000059  00                DCB      0x00
                  control_freq
00005a  0000              DCB      0x00,0x00
                  target_capa_debug
00005c  00000000          DCFS     0x00000000 ; 0
                  debug_target_pules
000060  00                DCB      0x00
                  flow_cali_enbale_flag
000061  000000            DCB      0x00,0x00,0x00
                  user_pulses2
                          DCD      0x00000000
                  user_flow2
                          DCD      0x00000000
                  user_pulses1
                          DCD      0x00000000
                  user_flow1
                          DCD      0x00000000
                  flow1_cali_compled_flag
000074  00                DCB      0x00
                  flow2_cali_compled_flag
000075  00                DCB      0x00
                  debug_flow1_ss
000076  00                DCB      0x00
                  debug_flow2_ss
000077  00                DCB      0x00
                  Pressure1_check_completed
000078  00                DCB      0x00
                  Pressure2_check_completed
000079  00                DCB      0x00
                  set_count_1
00007a  0000              DCW      0x0000
                  run_foc_count_1
00007c  00000000          DCB      0x00,0x00,0x00,0x00
                  foc_value_1
000080  00000000          DCFS     0x00000000 ; 0
                  set_count_2
000084  0000              DCW      0x0000
                  run_foc_count_2
000086  0000              DCB      0x00,0x00
                  foc_value_2
000088  00000000          DCFS     0x00000000 ; 0
                  FOC1_MAX_SPRAY_Speed
00008c  0000              DCB      0x00,0x00
                  FOC1_MIN_SPRAY_Speed
00008e  0000              DCB      0x00,0x00
                  FOC2_MAX_SPRAY_Speed
000090  0000              DCB      0x00,0x00
                  FOC2_MIN_SPRAY_Speed
000092  0000              DCB      0x00,0x00
                  pressure1_check_complted
000094  00                DCB      0x00
                  pump1_state
000095  02                DCB      0x02
                  pump2_state
000096  02                DCB      0x02
                  MedeRunoutFlag
000097  00                DCB      0x00
                  cont
000098  00                DCB      0x00
                  check_temp0_count_warning
000099  00                DCB      0x00
                  check_temp1_count_warning
00009a  00                DCB      0x00
                  check_temp0_count_err
00009b  00                DCB      0x00
                  check_temp1_count_err
00009c  00000000          DCB      0x00,0x00,0x00,0x00
                  value_1
0000a0  00000000          DCFS     0x00000000 ; 0
                  value_2
0000a4  00000000          DCFS     0x00000000 ; 0
                  last_flow
0000a8  00                DCB      0x00
                  last_status
0000a9  00                DCB      0x00
                  state
0000aa  00                DCB      0x00
                  control_freq_1
0000ab  00                DCB      0x00
                  control_freq_2
0000ac  00000000          DCB      0x00,0x00,0x00,0x00
                  |symbol_number.53|
0000b0  00000000          DCFS     0x00000000 ; 0
                  |symbol_number.54|
0000b4  00000000          DCFS     0x00000000 ; 0
                  last_flow_1
0000b8  00                DCB      0x00
                  last_status_1
0000b9  00                DCB      0x00
                  last_flow_2
0000ba  00                DCB      0x00
                  last_status_2
0000bb  00                DCB      0x00
                  control_value
0000bc  00000000          DCFS     0x00000000 ; 0
                  last_target_value
0000c0  00000000          DCB      0x00,0x00,0x00,0x00
                  |symbol_number.61|
0000c4  00000000          DCFS     0x00000000 ; 0
                  |symbol_number.62|
0000c8  00                DCB      0x00
                  flow_cali_step
0000c9  00                DCB      0x00
                  freq_control_count
0000ca  0000              DCB      0x00,0x00
                  switch_count
0000cc  0000              DCW      0x0000
                  flow_cali_value
0000ce  03ac              DCW      0x03ac
                  |symbol_number.67|
0000d0  0000              DCB      0x00,0x00
                  |symbol_number.68|
0000d2  0000              DCW      0x0000
                  |symbol_number.69|
0000d4  0000              DCW      0x0000
                  |symbol_number.70|
0000d6  03ac              DCW      0x03ac
                  channel0_buf_count
0000d8  0000              DCW      0x0000
                  channel1_buf_count
0000da  0000              DCW      0x0000
                  target_pressure_value_last
0000dc  0000              DCW      0x0000
                  Last_Press_Sensor_0
0000de  0000              DCW      0x0000
                  step_value_1
0000e0  00000000          DCFS     0x00000000 ; 0
                  step_value_last_1
0000e4  00000000          DCFS     0x00000000 ; 0
                  calibration_value
0000e8  0000              DCW      0x0000
                  |symbol_number.78|
0000ea  0000              DCW      0x0000
                  Last_Press_Sensor
0000ec  0000              DCW      0x0000
0000ee  0000              DCB      0x00,0x00
                  step_value_2
0000f0  00000000          DCFS     0x00000000 ; 0
                  step_value_last_2
0000f4  00000000          DCFS     0x00000000 ; 0
                  |symbol_number.82|
0000f8  0000              DCW      0x0000
                  check_state
0000fa  0500              DCB      0x05,0x00
                  check_count
0000fc  0000              DCW      0x0000
                  timeout_count
0000fe  0000              DCW      0x0000
                  test_value
000100  0000              DCW      0x0000
                  |symbol_number.87|
000102  0500              DCB      0x05,0x00
                  |symbol_number.88|
000104  0000              DCW      0x0000
                  |symbol_number.89|
000106  0000              DCW      0x0000
                  cali_step
000108  06                DCB      0x06
                  cali_fail_count
000109  00                DCB      0x00
                  |symbol_number.92|
00010a  06                DCB      0x06
                  |symbol_number.93|
00010b  00                DCB      0x00
                  count_detect_1
00010c  0000              DCW      0x0000
                  count_detect_2
00010e  0000              DCW      0x0000
                  count_detect_3
000110  0000              DCW      0x0000
                  count_detect_4
000112  0000              DCW      0x0000
