; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\output\can_af.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\output\can_af.d --cpu=Cortex-M3 --apcs=interwork -O0 --diag_suppress=9931 -I.\cstartup -I.\drivers\uart -I.\app\cfg -I.\iap -I.\drivers -I.\usb -I.\drivers\adc -I.\drivers\gpio -I.\drivers -I.\RTE\_lpc17xx_can_loader_debug -IC:\Keil_v5\ARM\PACK\Keil\LPC1700_DFP\2.3.0\Device\Include -IC:\Keil_v5\ARM\CMSIS\Include -D__UVISION_VERSION=523 -DLPC175x_6x -D__DEBUG_UART2_PRINTF__ -D__UART0__ -D__UART1__ -D__UART2__ -D__UART3__ -D__UART2_ENABLE__ -D__UART3_ENABLE__ -D__UART0_ENABLE__ -D__UART1_ENABLE__ --omf_browse=.\output\can_af.crf can\can_af.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CAN_SetupAFLUT PROC
;;;101    
;;;102    CAN_ERROR CAN_SetupAFLUT(LPC_CANAF_TypeDef* CANAFx, AF_SectionDef* AFSection)
000000  e92d4ff3          PUSH     {r0,r1,r4-r11,lr}
;;;103    {
000004  b085              SUB      sp,sp,#0x14
;;;104    	uint8_t ctrl1,ctrl2;
;;;105    	uint8_t dis1, dis2;
;;;106    	uint16_t SID, SID_temp,i, count = 0;
000006  2200              MOVS     r2,#0
;;;107    	uint32_t EID, entry, buf;//EID_temp,
;;;108    	uint16_t lowerSID, upperSID;
;;;109    	uint32_t lowerEID, upperEID;
;;;110    
;;;111    	CANAFx->AFMR = 0x01;
000008  f04f0b01          MOV      r11,#1
00000c  9805              LDR      r0,[sp,#0x14]
00000e  f8c0b000          STR      r11,[r0,#0]
;;;112    
;;;113    /***** setup FullCAN Table *****/
;;;114    	if(AFSection->FullCAN_Sec == NULL)
000012  6808              LDR      r0,[r1,#0]
000014  b928              CBNZ     r0,|L1.34|
;;;115    	{
;;;116    		FULLCAN_ENABLE = DISABLE;
000016  2000              MOVS     r0,#0
000018  f8dfb428          LDR      r11,|L1.1092|
00001c  f88b0000          STRB     r0,[r11,#0]
000020  e081              B        |L1.294|
                  |L1.34|
;;;117    	}
;;;118    	else
;;;119    	{
;;;120    		FULLCAN_ENABLE = ENABLE;
000022  2001              MOVS     r0,#1
000024  f8dfb41c          LDR      r11,|L1.1092|
000028  f88b0000          STRB     r0,[r11,#0]
;;;121    		for(i=0;i<(AFSection->FC_NumEntry);i++)
00002c  2400              MOVS     r4,#0
00002e  e077              B        |L1.288|
                  |L1.48|
;;;122    		{
;;;123    			if((count+1) > 64)
000030  1c50              ADDS     r0,r2,#1
000032  2840              CMP      r0,#0x40
000034  dd03              BLE      |L1.62|
;;;124    			{
;;;125    				return CAN_OBJECTS_FULL_ERROR;
000036  2002              MOVS     r0,#2
                  |L1.56|
;;;126    			}
;;;127    			ctrl1 = AFSection->FullCAN_Sec->controller;
;;;128    			SID = AFSection->FullCAN_Sec->id_11;
;;;129    			dis1 = AFSection->FullCAN_Sec->disable;
;;;130    
;;;131    			entry = 0x00; //reset entry value
;;;132    			if((CANAF_FullCAN_cnt & 0x00000001)==0)
;;;133    			{
;;;134    				if(count!=0x00)
;;;135    				{
;;;136    					buf = LPC_CANAF_RAM->mask[count-1];
;;;137    					SID_temp = (buf & 0xE7FF); //mask controller & identifier bits
;;;138    					if(SID_temp > ((ctrl1<<13)|SID))
;;;139    					{
;;;140    						return CAN_AF_ENTRY_ERROR;
;;;141    					}
;;;142    				}
;;;143    				entry = (ctrl1<<29)|(dis1<<28)|(SID<<16)|(1<<27);
;;;144    				LPC_CANAF_RAM->mask[count] &= 0x0000FFFF;
;;;145    				LPC_CANAF_RAM->mask[count] |= entry;
;;;146    				CANAF_FullCAN_cnt++;
;;;147    				if(CANAF_FullCAN_cnt == AFSection->FC_NumEntry) //this is the lastest FullCAN entry
;;;148    					count++;
;;;149    			}
;;;150    			else
;;;151    			{
;;;152    				buf = LPC_CANAF_RAM->mask[count];
;;;153    				SID_temp = (buf >>16) & 0xE7FF;
;;;154    				if(SID_temp > ((ctrl1<<13)|SID))
;;;155    				{
;;;156    					return CAN_AF_ENTRY_ERROR;
;;;157    				}
;;;158    				entry = (ctrl1<<13)|(dis1<<12)|(SID<<0)|(1<<11);
;;;159    				LPC_CANAF_RAM->mask[count] &= 0xFFFF0000;
;;;160    				LPC_CANAF_RAM->mask[count]|= entry;
;;;161    				count++;
;;;162    				CANAF_FullCAN_cnt++;
;;;163    			}
;;;164    			AFSection->FullCAN_Sec = (FullCAN_Entry *)((uint32_t)(AFSection->FullCAN_Sec)+ sizeof(FullCAN_Entry));
;;;165    		}
;;;166    	}
;;;167    
;;;168    /***** Setup Explicit Standard Frame Format Section *****/
;;;169    	if(AFSection->SFF_Sec != NULL)
;;;170    	{
;;;171    		for(i=0;i<(AFSection->SFF_NumEntry);i++)
;;;172    		{
;;;173    			if(count + 1 > 512)
;;;174    			{
;;;175    				return CAN_OBJECTS_FULL_ERROR;
;;;176    			}
;;;177    			ctrl1 = AFSection->SFF_Sec->controller;
;;;178    			SID = AFSection->SFF_Sec->id_11;
;;;179    			dis1 = AFSection->SFF_Sec->disable;
;;;180    
;;;181    			entry = 0x00; //reset entry value
;;;182    			if((CANAF_std_cnt & 0x00000001)==0)
;;;183    			{
;;;184    				if(CANAF_std_cnt !=0 )
;;;185    				{
;;;186    					buf = LPC_CANAF_RAM->mask[count-1];
;;;187    					SID_temp = (buf & 0xE7FF); //mask controller & identifier bits
;;;188    					if(SID_temp > ((ctrl1<<13)|SID))
;;;189    					{
;;;190    						return CAN_AF_ENTRY_ERROR;
;;;191    					}
;;;192    				}
;;;193    				entry = (ctrl1<<29)|(dis1<<28)|(SID<<16);
;;;194    				LPC_CANAF_RAM->mask[count] &= 0x0000FFFF;
;;;195    				LPC_CANAF_RAM->mask[count] |= entry;
;;;196    				CANAF_std_cnt++;
;;;197    				if(CANAF_std_cnt == AFSection->SFF_NumEntry)//if this is the last SFF entry
;;;198    					count++;
;;;199    			}
;;;200    			else
;;;201    			{
;;;202    				buf = LPC_CANAF_RAM->mask[count];
;;;203    				SID_temp = (buf >>16) & 0xE7FF;
;;;204    				if(SID_temp > ((ctrl1<<13)|SID))
;;;205    				{
;;;206    					return CAN_AF_ENTRY_ERROR;
;;;207    				}
;;;208    				entry = (ctrl1<<13)|(dis1<<12)|(SID<<0);
;;;209    				LPC_CANAF_RAM->mask[count] &= 0xFFFF0000;
;;;210    				LPC_CANAF_RAM->mask[count] |= entry;
;;;211    				count++;
;;;212    				CANAF_std_cnt++;
;;;213    			}
;;;214    			AFSection->SFF_Sec = (SFF_Entry *)((uint32_t)(AFSection->SFF_Sec)+ sizeof(SFF_Entry));
;;;215    		}
;;;216    	}
;;;217    
;;;218    /***** Setup Group of Standard Frame Format Identifier Section *****/
;;;219    	if(AFSection->SFF_GPR_Sec != NULL)
;;;220    	{
;;;221    		for(i=0;i<(AFSection->SFF_GPR_NumEntry);i++)
;;;222    		{
;;;223    			if(count + 1 > 512)
;;;224    			{
;;;225    				return CAN_OBJECTS_FULL_ERROR;
;;;226    			}
;;;227    			ctrl1 = AFSection->SFF_GPR_Sec->controller1;
;;;228    			ctrl2 = AFSection->SFF_GPR_Sec->controller2;
;;;229    			dis1 = AFSection->SFF_GPR_Sec->disable1;
;;;230    			dis2 = AFSection->SFF_GPR_Sec->disable2;
;;;231    			lowerSID = AFSection->SFF_GPR_Sec->lowerID;
;;;232    			upperSID = AFSection->SFF_GPR_Sec->upperID;
;;;233    
;;;234    			entry = 0x00;
;;;235    			if(CANAF_gstd_cnt!=0)
;;;236    			{
;;;237    				buf = LPC_CANAF_RAM->mask[count-1];
;;;238    				SID_temp = buf & 0xE7FF;
;;;239    				if((ctrl1 != ctrl2)||(lowerSID > upperSID)||(SID_temp > ((ctrl1<<13)|lowerSID)))
;;;240    				{
;;;241    					return CAN_AF_ENTRY_ERROR;
;;;242    				}
;;;243    			}
;;;244    			entry = (ctrl1 << 29)|(dis1 << 28)|(lowerSID << 16)|  \
;;;245    					(ctrl2 << 13)|(dis2 << 12)|(upperSID << 0);
;;;246    			LPC_CANAF_RAM->mask[count] = entry;
;;;247    			CANAF_gstd_cnt++;
;;;248    			count++;
;;;249    			AFSection->SFF_GPR_Sec = (SFF_GPR_Entry *)((uint32_t)(AFSection->SFF_GPR_Sec)+ sizeof(SFF_GPR_Entry));
;;;250    		}
;;;251    	}
;;;252    
;;;253    /***** Setup Explicit Extend Frame Format Identifier Section *****/
;;;254    	if(AFSection->EFF_Sec != NULL)
;;;255    	{
;;;256    		for(i=0;i<(AFSection->EFF_NumEntry);i++)
;;;257    		{
;;;258    			if(count + 1 > 512)
;;;259    			{
;;;260    				return CAN_OBJECTS_FULL_ERROR;
;;;261    			}
;;;262    			EID = AFSection->EFF_Sec->ID_29;
;;;263    			ctrl1 = AFSection->EFF_Sec->controller;
;;;264    
;;;265    			entry = (ctrl1 << 29)|(EID << 0);
;;;266    			if(CANAF_ext_cnt != 0)
;;;267    			{
;;;268    				buf = LPC_CANAF_RAM->mask[count-1];
;;;269    //				EID_temp = buf & 0x0FFFFFFF;
;;;270    				if(buf > entry)
;;;271    				{
;;;272    					return CAN_AF_ENTRY_ERROR;
;;;273    				}
;;;274    			}
;;;275    			LPC_CANAF_RAM->mask[count] = entry;
;;;276    			CANAF_ext_cnt ++;
;;;277    			count++;
;;;278    			AFSection->EFF_Sec = (EFF_Entry *)((uint32_t)(AFSection->EFF_Sec)+ sizeof(EFF_Entry));
;;;279    		}
;;;280    	}
;;;281    
;;;282    /***** Setup Group of Extended Frame Format Identifier Section *****/
;;;283    	if(AFSection->EFF_GPR_Sec != NULL)
;;;284    	{
;;;285    		for(i=0;i<(AFSection->EFF_GPR_NumEntry);i++)
;;;286    		{
;;;287    			if(count + 2 > 512)
;;;288    			{
;;;289    				return CAN_OBJECTS_FULL_ERROR;
;;;290    			}
;;;291    			ctrl1 = AFSection->EFF_GPR_Sec->controller1;
;;;292    			ctrl2 = AFSection->EFF_GPR_Sec->controller2;
;;;293    			lowerEID = AFSection->EFF_GPR_Sec->lowerEID;
;;;294    			upperEID = AFSection->EFF_GPR_Sec->upperEID;
;;;295    
;;;296    			entry = 0x00;
;;;297    			if(CANAF_gext_cnt != 0)
;;;298    			{
;;;299    				buf = LPC_CANAF_RAM->mask[count-1];
;;;300    //				EID_temp = buf & 0x0FFFFFFF;
;;;301    				if((ctrl1 != ctrl2) || (lowerEID > upperEID) || (buf > ((ctrl1 << 29)|(lowerEID << 0))))
;;;302    				{
;;;303    					return CAN_AF_ENTRY_ERROR;
;;;304    				}
;;;305    			}
;;;306    			entry = (ctrl1 << 29)|(lowerEID << 0);
;;;307    			LPC_CANAF_RAM->mask[count++] = entry;
;;;308    			entry = (ctrl2 << 29)|(upperEID << 0);
;;;309    			LPC_CANAF_RAM->mask[count++] = entry;
;;;310    			CANAF_gext_cnt++;
;;;311    			AFSection->EFF_GPR_Sec = (EFF_GPR_Entry *)((uint32_t)(AFSection->EFF_GPR_Sec)+ sizeof(EFF_GPR_Entry));
;;;312    		}
;;;313    	}
;;;314    	//update address values
;;;315    	LPC_CANAF->SFF_sa = ((CANAF_FullCAN_cnt + 1)>>1)<<2;
;;;316    	LPC_CANAF->SFF_GRP_sa = LPC_CANAF->SFF_sa + (((CANAF_std_cnt+1)>>1)<< 2);
;;;317    	LPC_CANAF->EFF_sa = LPC_CANAF->SFF_GRP_sa + (CANAF_gstd_cnt << 2);
;;;318    	LPC_CANAF->EFF_GRP_sa = LPC_CANAF->EFF_sa + (CANAF_ext_cnt << 2);
;;;319    	LPC_CANAF->ENDofTable = LPC_CANAF->EFF_GRP_sa + (CANAF_gext_cnt << 3);
;;;320    
;;;321    
;;;322    	if(FULLCAN_ENABLE == DISABLE)
;;;323    	{
;;;324    		LPC_CANAF->AFMR = 0x00; // Normal mode
;;;325    	}
;;;326    	else
;;;327    	{
;;;328    		LPC_CANAF->AFMR = 0x04;
;;;329    	}
;;;330    	return CAN_OK;
;;;331    }
000038  b007              ADD      sp,sp,#0x1c
00003a  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.62|
00003e  6808              LDR      r0,[r1,#0]            ;127
000040  7803              LDRB     r3,[r0,#0]            ;127
000042  6808              LDR      r0,[r1,#0]            ;128
000044  8845              LDRH     r5,[r0,#2]            ;128
000046  6808              LDR      r0,[r1,#0]            ;129
000048  f890c001          LDRB     r12,[r0,#1]           ;129
00004c  2600              MOVS     r6,#0                 ;131
00004e  48fe              LDR      r0,|L1.1096|
000050  7800              LDRB     r0,[r0,#0]            ;132  ; CANAF_FullCAN_cnt
000052  f0000001          AND      r0,r0,#1              ;132
000056  bb90              CBNZ     r0,|L1.190|
000058  b172              CBZ      r2,|L1.120|
00005a  1e50              SUBS     r0,r2,#1              ;136
00005c  f8dfb3ec          LDR      r11,|L1.1100|
000060  f85b7020          LDR      r7,[r11,r0,LSL #2]    ;136
000064  f24e70ff          MOV      r0,#0xe7ff            ;137
000068  ea070900          AND      r9,r7,r0              ;137
00006c  ea453043          ORR      r0,r5,r3,LSL #13      ;138
000070  4548              CMP      r0,r9                 ;138
000072  da01              BGE      |L1.120|
000074  2005              MOVS     r0,#5                 ;140
000076  e7df              B        |L1.56|
                  |L1.120|
000078  0758              LSLS     r0,r3,#29             ;143
00007a  ea40700c          ORR      r0,r0,r12,LSL #28     ;143
00007e  ea404005          ORR      r0,r0,r5,LSL #16      ;143
000082  f0406600          ORR      r6,r0,#0x8000000      ;143
000086  f8dfb3c4          LDR      r11,|L1.1100|
00008a  f85b0022          LDR      r0,[r11,r2,LSL #2]    ;144
00008e  b280              UXTH     r0,r0                 ;144
000090  46de              MOV      lr,r11                ;144
000092  f84e0022          STR      r0,[lr,r2,LSL #2]     ;144
000096  f85b0022          LDR      r0,[r11,r2,LSL #2]    ;145
00009a  4330              ORRS     r0,r0,r6              ;145
00009c  f84e0022          STR      r0,[lr,r2,LSL #2]     ;145
0000a0  48e9              LDR      r0,|L1.1096|
0000a2  8800              LDRH     r0,[r0,#0]            ;146  ; CANAF_FullCAN_cnt
0000a4  1c40              ADDS     r0,r0,#1              ;146
0000a6  f8dfb3a0          LDR      r11,|L1.1096|
0000aa  f8ab0000          STRH     r0,[r11,#0]           ;146
0000ae  7908              LDRB     r0,[r1,#4]            ;147
0000b0  f8bbb000          LDRH     r11,[r11,#0]          ;147  ; CANAF_FullCAN_cnt
0000b4  4558              CMP      r0,r11                ;147
0000b6  d12e              BNE      |L1.278|
0000b8  1c50              ADDS     r0,r2,#1              ;148
0000ba  b282              UXTH     r2,r0                 ;148
0000bc  e02b              B        |L1.278|
                  |L1.190|
0000be  e7ff              B        |L1.192|
                  |L1.192|
0000c0  f8dfb388          LDR      r11,|L1.1100|
0000c4  f85b7022          LDR      r7,[r11,r2,LSL #2]    ;152
0000c8  f24e70ff          MOV      r0,#0xe7ff            ;153
0000cc  ea004917          AND      r9,r0,r7,LSR #16      ;153
0000d0  ea453043          ORR      r0,r5,r3,LSL #13      ;154
0000d4  4548              CMP      r0,r9                 ;154
0000d6  da01              BGE      |L1.220|
0000d8  2005              MOVS     r0,#5                 ;156
0000da  e7ad              B        |L1.56|
                  |L1.220|
0000dc  0358              LSLS     r0,r3,#13             ;158
0000de  ea40300c          ORR      r0,r0,r12,LSL #12     ;158
0000e2  4328              ORRS     r0,r0,r5              ;158
0000e4  f4406600          ORR      r6,r0,#0x800          ;158
0000e8  f8dfb360          LDR      r11,|L1.1100|
0000ec  f85b0022          LDR      r0,[r11,r2,LSL #2]    ;159
0000f0  f36f000f          BFC      r0,#0,#16             ;159
0000f4  46de              MOV      lr,r11                ;159
0000f6  f84e0022          STR      r0,[lr,r2,LSL #2]     ;159
0000fa  f85b0022          LDR      r0,[r11,r2,LSL #2]    ;160
0000fe  4330              ORRS     r0,r0,r6              ;160
000100  f84e0022          STR      r0,[lr,r2,LSL #2]     ;160
000104  1c50              ADDS     r0,r2,#1              ;161
000106  b282              UXTH     r2,r0                 ;161
000108  48cf              LDR      r0,|L1.1096|
00010a  8800              LDRH     r0,[r0,#0]            ;162  ; CANAF_FullCAN_cnt
00010c  1c40              ADDS     r0,r0,#1              ;162
00010e  f8dfb338          LDR      r11,|L1.1096|
000112  f8ab0000          STRH     r0,[r11,#0]           ;162
                  |L1.278|
000116  6808              LDR      r0,[r1,#0]            ;164
000118  1d00              ADDS     r0,r0,#4              ;164
00011a  6008              STR      r0,[r1,#0]            ;164
00011c  1c60              ADDS     r0,r4,#1              ;121
00011e  b284              UXTH     r4,r0                 ;121
                  |L1.288|
000120  7908              LDRB     r0,[r1,#4]            ;121
000122  42a0              CMP      r0,r4                 ;121
000124  dc84              BGT      |L1.48|
                  |L1.294|
000126  6888              LDR      r0,[r1,#8]            ;169
000128  2800              CMP      r0,#0                 ;169
00012a  d07a              BEQ      |L1.546|
00012c  2400              MOVS     r4,#0                 ;171
00012e  e075              B        |L1.540|
                  |L1.304|
000130  1c50              ADDS     r0,r2,#1              ;173
000132  f5b07f00          CMP      r0,#0x200             ;173
000136  dd01              BLE      |L1.316|
000138  2002              MOVS     r0,#2                 ;175
00013a  e77d              B        |L1.56|
                  |L1.316|
00013c  6888              LDR      r0,[r1,#8]            ;177
00013e  7803              LDRB     r3,[r0,#0]            ;177
000140  6888              LDR      r0,[r1,#8]            ;178
000142  8845              LDRH     r5,[r0,#2]            ;178
000144  6888              LDR      r0,[r1,#8]            ;179
000146  f890c001          LDRB     r12,[r0,#1]           ;179
00014a  2600              MOVS     r6,#0                 ;181
00014c  48c0              LDR      r0,|L1.1104|
00014e  7800              LDRB     r0,[r0,#0]            ;182  ; CANAF_std_cnt
000150  f0000001          AND      r0,r0,#1              ;182
000154  bb90              CBNZ     r0,|L1.444|
000156  48be              LDR      r0,|L1.1104|
000158  8800              LDRH     r0,[r0,#0]            ;184  ; CANAF_std_cnt
00015a  b170              CBZ      r0,|L1.378|
00015c  1e50              SUBS     r0,r2,#1              ;186
00015e  f8dfb2ec          LDR      r11,|L1.1100|
000162  f85b7020          LDR      r7,[r11,r0,LSL #2]    ;186
000166  f24e70ff          MOV      r0,#0xe7ff            ;187
00016a  ea070900          AND      r9,r7,r0              ;187
00016e  ea453043          ORR      r0,r5,r3,LSL #13      ;188
000172  4548              CMP      r0,r9                 ;188
000174  da01              BGE      |L1.378|
000176  2005              MOVS     r0,#5                 ;190
000178  e75e              B        |L1.56|
                  |L1.378|
00017a  0758              LSLS     r0,r3,#29             ;193
00017c  ea40700c          ORR      r0,r0,r12,LSL #28     ;193
000180  ea404605          ORR      r6,r0,r5,LSL #16      ;193
000184  f8dfb2c4          LDR      r11,|L1.1100|
000188  f85b0022          LDR      r0,[r11,r2,LSL #2]    ;194
00018c  b280              UXTH     r0,r0                 ;194
00018e  46de              MOV      lr,r11                ;194
000190  f84e0022          STR      r0,[lr,r2,LSL #2]     ;194
000194  f85b0022          LDR      r0,[r11,r2,LSL #2]    ;195
000198  4330              ORRS     r0,r0,r6              ;195
00019a  f84e0022          STR      r0,[lr,r2,LSL #2]     ;195
00019e  48ac              LDR      r0,|L1.1104|
0001a0  8800              LDRH     r0,[r0,#0]            ;196  ; CANAF_std_cnt
0001a2  1c40              ADDS     r0,r0,#1              ;196
0001a4  f8dfb2a8          LDR      r11,|L1.1104|
0001a8  f8ab0000          STRH     r0,[r11,#0]           ;196
0001ac  7b08              LDRB     r0,[r1,#0xc]          ;197
0001ae  f8bbb000          LDRH     r11,[r11,#0]          ;197  ; CANAF_std_cnt
0001b2  4558              CMP      r0,r11                ;197
0001b4  d12d              BNE      |L1.530|
0001b6  1c50              ADDS     r0,r2,#1              ;198
0001b8  b282              UXTH     r2,r0                 ;198
0001ba  e02a              B        |L1.530|
                  |L1.444|
0001bc  e7ff              B        |L1.446|
                  |L1.446|
0001be  f8dfb28c          LDR      r11,|L1.1100|
0001c2  f85b7022          LDR      r7,[r11,r2,LSL #2]    ;202
0001c6  f24e70ff          MOV      r0,#0xe7ff            ;203
0001ca  ea004917          AND      r9,r0,r7,LSR #16      ;203
0001ce  ea453043          ORR      r0,r5,r3,LSL #13      ;204
0001d2  4548              CMP      r0,r9                 ;204
0001d4  da01              BGE      |L1.474|
0001d6  2005              MOVS     r0,#5                 ;206
0001d8  e72e              B        |L1.56|
                  |L1.474|
0001da  0358              LSLS     r0,r3,#13             ;208
0001dc  ea40300c          ORR      r0,r0,r12,LSL #12     ;208
0001e0  ea400605          ORR      r6,r0,r5              ;208
0001e4  f8dfb264          LDR      r11,|L1.1100|
0001e8  f85b0022          LDR      r0,[r11,r2,LSL #2]    ;209
0001ec  f36f000f          BFC      r0,#0,#16             ;209
0001f0  46de              MOV      lr,r11                ;209
0001f2  f84e0022          STR      r0,[lr,r2,LSL #2]     ;209
0001f6  f85b0022          LDR      r0,[r11,r2,LSL #2]    ;210
0001fa  4330              ORRS     r0,r0,r6              ;210
0001fc  f84e0022          STR      r0,[lr,r2,LSL #2]     ;210
000200  1c50              ADDS     r0,r2,#1              ;211
000202  b282              UXTH     r2,r0                 ;211
000204  4892              LDR      r0,|L1.1104|
000206  8800              LDRH     r0,[r0,#0]            ;212  ; CANAF_std_cnt
000208  1c40              ADDS     r0,r0,#1              ;212
00020a  f8dfb244          LDR      r11,|L1.1104|
00020e  f8ab0000          STRH     r0,[r11,#0]           ;212
                  |L1.530|
000212  6888              LDR      r0,[r1,#8]            ;214
000214  1d00              ADDS     r0,r0,#4              ;214
000216  6088              STR      r0,[r1,#8]            ;214
000218  1c60              ADDS     r0,r4,#1              ;171
00021a  b284              UXTH     r4,r0                 ;171
                  |L1.540|
00021c  7b08              LDRB     r0,[r1,#0xc]          ;171
00021e  42a0              CMP      r0,r4                 ;171
000220  dc86              BGT      |L1.304|
                  |L1.546|
000222  6908              LDR      r0,[r1,#0x10]         ;219
000224  2800              CMP      r0,#0                 ;219
000226  d053              BEQ      |L1.720|
000228  2400              MOVS     r4,#0                 ;221
00022a  e04e              B        |L1.714|
                  |L1.556|
00022c  1c50              ADDS     r0,r2,#1              ;223
00022e  f5b07f00          CMP      r0,#0x200             ;223
000232  dd01              BLE      |L1.568|
000234  2002              MOVS     r0,#2                 ;225
000236  e6ff              B        |L1.56|
                  |L1.568|
000238  6908              LDR      r0,[r1,#0x10]         ;227
00023a  7803              LDRB     r3,[r0,#0]            ;227
00023c  6908              LDR      r0,[r1,#0x10]         ;228
00023e  f8908004          LDRB     r8,[r0,#4]            ;228
000242  6908              LDR      r0,[r1,#0x10]         ;229
000244  f890c001          LDRB     r12,[r0,#1]           ;229
000248  6908              LDR      r0,[r1,#0x10]         ;230
00024a  7940              LDRB     r0,[r0,#5]            ;230
00024c  9004              STR      r0,[sp,#0x10]         ;230
00024e  6908              LDR      r0,[r1,#0x10]         ;231
000250  f8b0a002          LDRH     r10,[r0,#2]           ;231
000254  6908              LDR      r0,[r1,#0x10]         ;232
000256  88c0              LDRH     r0,[r0,#6]            ;232
000258  9002              STR      r0,[sp,#8]            ;232
00025a  2600              MOVS     r6,#0                 ;234
00025c  487d              LDR      r0,|L1.1108|
00025e  8800              LDRH     r0,[r0,#0]            ;235  ; CANAF_gstd_cnt
000260  b198              CBZ      r0,|L1.650|
000262  1e50              SUBS     r0,r2,#1              ;237
000264  f8dfb1e4          LDR      r11,|L1.1100|
000268  f85b7020          LDR      r7,[r11,r0,LSL #2]    ;237
00026c  f24e70ff          MOV      r0,#0xe7ff            ;238
000270  ea070900          AND      r9,r7,r0              ;238
000274  4543              CMP      r3,r8                 ;239
000276  d106              BNE      |L1.646|
000278  9802              LDR      r0,[sp,#8]            ;239
00027a  4582              CMP      r10,r0                ;239
00027c  dc03              BGT      |L1.646|
00027e  ea4a3043          ORR      r0,r10,r3,LSL #13     ;239
000282  4548              CMP      r0,r9                 ;239
000284  da01              BGE      |L1.650|
                  |L1.646|
000286  2005              MOVS     r0,#5                 ;241
000288  e6d6              B        |L1.56|
                  |L1.650|
00028a  0758              LSLS     r0,r3,#29             ;244
00028c  ea40700c          ORR      r0,r0,r12,LSL #28     ;244
000290  ea40400a          ORR      r0,r0,r10,LSL #16     ;244
000294  ea403b48          ORR      r11,r0,r8,LSL #13     ;244
000298  9804              LDR      r0,[sp,#0x10]         ;244
00029a  ea4b3000          ORR      r0,r11,r0,LSL #12     ;244
00029e  f8ddb008          LDR      r11,[sp,#8]           ;244
0002a2  ea40060b          ORR      r6,r0,r11             ;244
0002a6  f8dfb1a4          LDR      r11,|L1.1100|
0002aa  f84b6022          STR      r6,[r11,r2,LSL #2]    ;246
0002ae  4869              LDR      r0,|L1.1108|
0002b0  8800              LDRH     r0,[r0,#0]            ;247  ; CANAF_gstd_cnt
0002b2  1c40              ADDS     r0,r0,#1              ;247
0002b4  f8dfb19c          LDR      r11,|L1.1108|
0002b8  f8ab0000          STRH     r0,[r11,#0]           ;247
0002bc  1c50              ADDS     r0,r2,#1              ;248
0002be  b282              UXTH     r2,r0                 ;248
0002c0  6908              LDR      r0,[r1,#0x10]         ;249
0002c2  3008              ADDS     r0,r0,#8              ;249
0002c4  6108              STR      r0,[r1,#0x10]         ;249
0002c6  1c60              ADDS     r0,r4,#1              ;221
0002c8  b284              UXTH     r4,r0                 ;221
                  |L1.714|
0002ca  7d08              LDRB     r0,[r1,#0x14]         ;221
0002cc  42a0              CMP      r0,r4                 ;221
0002ce  dcad              BGT      |L1.556|
                  |L1.720|
0002d0  6988              LDR      r0,[r1,#0x18]         ;254
0002d2  b380              CBZ      r0,|L1.822|
0002d4  2400              MOVS     r4,#0                 ;256
0002d6  e02b              B        |L1.816|
                  |L1.728|
0002d8  1c50              ADDS     r0,r2,#1              ;258
0002da  f5b07f00          CMP      r0,#0x200             ;258
0002de  dd01              BLE      |L1.740|
0002e0  2002              MOVS     r0,#2                 ;260
0002e2  e6a9              B        |L1.56|
                  |L1.740|
0002e4  6988              LDR      r0,[r1,#0x18]         ;262
0002e6  6840              LDR      r0,[r0,#4]            ;262
0002e8  9003              STR      r0,[sp,#0xc]          ;262
0002ea  6988              LDR      r0,[r1,#0x18]         ;263
0002ec  7803              LDRB     r3,[r0,#0]            ;263
0002ee  9803              LDR      r0,[sp,#0xc]          ;265
0002f0  ea407643          ORR      r6,r0,r3,LSL #29      ;265
0002f4  4858              LDR      r0,|L1.1112|
0002f6  8800              LDRH     r0,[r0,#0]            ;266  ; CANAF_ext_cnt
0002f8  b140              CBZ      r0,|L1.780|
0002fa  1e50              SUBS     r0,r2,#1              ;268
0002fc  f8dfb14c          LDR      r11,|L1.1100|
000300  f85b7020          LDR      r7,[r11,r0,LSL #2]    ;268
000304  42b7              CMP      r7,r6                 ;270
000306  d901              BLS      |L1.780|
000308  2005              MOVS     r0,#5                 ;272
00030a  e695              B        |L1.56|
                  |L1.780|
00030c  f8dfb13c          LDR      r11,|L1.1100|
000310  f84b6022          STR      r6,[r11,r2,LSL #2]    ;275
000314  4850              LDR      r0,|L1.1112|
000316  8800              LDRH     r0,[r0,#0]            ;276  ; CANAF_ext_cnt
000318  1c40              ADDS     r0,r0,#1              ;276
00031a  f8dfb13c          LDR      r11,|L1.1112|
00031e  f8ab0000          STRH     r0,[r11,#0]           ;276
000322  1c50              ADDS     r0,r2,#1              ;277
000324  b282              UXTH     r2,r0                 ;277
000326  6988              LDR      r0,[r1,#0x18]         ;278
000328  3008              ADDS     r0,r0,#8              ;278
00032a  6188              STR      r0,[r1,#0x18]         ;278
00032c  1c60              ADDS     r0,r4,#1              ;256
00032e  b284              UXTH     r4,r0                 ;256
                  |L1.816|
000330  7f08              LDRB     r0,[r1,#0x1c]         ;256
000332  42a0              CMP      r0,r4                 ;256
000334  dcd0              BGT      |L1.728|
                  |L1.822|
000336  6a08              LDR      r0,[r1,#0x20]         ;283
000338  b3e8              CBZ      r0,|L1.950|
00033a  2400              MOVS     r4,#0                 ;285
00033c  e04c              B        |L1.984|
                  |L1.830|
00033e  1c90              ADDS     r0,r2,#2              ;287
000340  f5b07f00          CMP      r0,#0x200             ;287
000344  dd01              BLE      |L1.842|
000346  2002              MOVS     r0,#2                 ;289
000348  e676              B        |L1.56|
                  |L1.842|
00034a  6a08              LDR      r0,[r1,#0x20]         ;291
00034c  7803              LDRB     r3,[r0,#0]            ;291
00034e  6a08              LDR      r0,[r1,#0x20]         ;292
000350  f8908001          LDRB     r8,[r0,#1]            ;292
000354  6a08              LDR      r0,[r1,#0x20]         ;293
000356  6840              LDR      r0,[r0,#4]            ;293
000358  9001              STR      r0,[sp,#4]            ;293
00035a  6a08              LDR      r0,[r1,#0x20]         ;294
00035c  6880              LDR      r0,[r0,#8]            ;294
00035e  9000              STR      r0,[sp,#0]            ;294
000360  2600              MOVS     r6,#0                 ;296
000362  483e              LDR      r0,|L1.1116|
000364  8800              LDRH     r0,[r0,#0]            ;297  ; CANAF_gext_cnt
000366  b188              CBZ      r0,|L1.908|
000368  1e50              SUBS     r0,r2,#1              ;299
00036a  f8dfb0e0          LDR      r11,|L1.1100|
00036e  f85b7020          LDR      r7,[r11,r0,LSL #2]    ;299
000372  4543              CMP      r3,r8                 ;301
000374  d108              BNE      |L1.904|
000376  e9ddb000          LDRD     r11,r0,[sp,#0]        ;301
00037a  4558              CMP      r0,r11                ;301
00037c  d804              BHI      |L1.904|
00037e  9801              LDR      r0,[sp,#4]            ;301
000380  ea407043          ORR      r0,r0,r3,LSL #29      ;301
000384  42b8              CMP      r0,r7                 ;301
000386  d201              BCS      |L1.908|
                  |L1.904|
000388  2005              MOVS     r0,#5                 ;303
00038a  e655              B        |L1.56|
                  |L1.908|
00038c  9801              LDR      r0,[sp,#4]            ;306
00038e  ea407643          ORR      r6,r0,r3,LSL #29      ;306
000392  4610              MOV      r0,r2                 ;307
000394  f1020b01          ADD      r11,r2,#1             ;307
000398  fa1ff28b          UXTH     r2,r11                ;307
00039c  f8dfb0ac          LDR      r11,|L1.1100|
0003a0  f84b6020          STR      r6,[r11,r0,LSL #2]    ;307
0003a4  9800              LDR      r0,[sp,#0]            ;308
0003a6  ea407648          ORR      r6,r0,r8,LSL #29      ;308
0003aa  4610              MOV      r0,r2                 ;309
0003ac  f1020b01          ADD      r11,r2,#1             ;309
0003b0  fa1ff28b          UXTH     r2,r11                ;309
0003b4  e000              B        |L1.952|
                  |L1.950|
0003b6  e013              B        |L1.992|
                  |L1.952|
0003b8  f8dfb090          LDR      r11,|L1.1100|
0003bc  f84b6020          STR      r6,[r11,r0,LSL #2]    ;309
0003c0  4826              LDR      r0,|L1.1116|
0003c2  8800              LDRH     r0,[r0,#0]            ;310  ; CANAF_gext_cnt
0003c4  1c40              ADDS     r0,r0,#1              ;310
0003c6  f8dfb094          LDR      r11,|L1.1116|
0003ca  f8ab0000          STRH     r0,[r11,#0]           ;310
0003ce  6a08              LDR      r0,[r1,#0x20]         ;311
0003d0  300c              ADDS     r0,r0,#0xc            ;311
0003d2  6208              STR      r0,[r1,#0x20]         ;311
0003d4  1c60              ADDS     r0,r4,#1              ;285
0003d6  b284              UXTH     r4,r0                 ;285
                  |L1.984|
0003d8  f8910024          LDRB     r0,[r1,#0x24]         ;285
0003dc  42a0              CMP      r0,r4                 ;285
0003de  dcae              BGT      |L1.830|
                  |L1.992|
0003e0  4819              LDR      r0,|L1.1096|
0003e2  8800              LDRH     r0,[r0,#0]            ;315  ; CANAF_FullCAN_cnt
0003e4  1c40              ADDS     r0,r0,#1              ;315
0003e6  1040              ASRS     r0,r0,#1              ;315
0003e8  0080              LSLS     r0,r0,#2              ;315
0003ea  f8dfb074          LDR      r11,|L1.1120|
0003ee  f8cb0004          STR      r0,[r11,#4]           ;315
0003f2  4658              MOV      r0,r11                ;316
0003f4  f8d0b004          LDR      r11,[r0,#4]           ;316
0003f8  4815              LDR      r0,|L1.1104|
0003fa  8800              LDRH     r0,[r0,#0]            ;316  ; CANAF_std_cnt
0003fc  1c40              ADDS     r0,r0,#1              ;316
0003fe  1040              ASRS     r0,r0,#1              ;316
000400  eb0b0080          ADD      r0,r11,r0,LSL #2      ;316
000404  f8dfb058          LDR      r11,|L1.1120|
000408  f8cb0008          STR      r0,[r11,#8]           ;316
00040c  4658              MOV      r0,r11                ;317
00040e  6880              LDR      r0,[r0,#8]            ;317
000410  f8dfb040          LDR      r11,|L1.1108|
000414  f8bbb000          LDRH     r11,[r11,#0]          ;317  ; CANAF_gstd_cnt
000418  eb00008b          ADD      r0,r0,r11,LSL #2      ;317
00041c  f8dfb040          LDR      r11,|L1.1120|
000420  f8cb000c          STR      r0,[r11,#0xc]         ;317
000424  4658              MOV      r0,r11                ;318
000426  68c0              LDR      r0,[r0,#0xc]          ;318
000428  f8dfb02c          LDR      r11,|L1.1112|
00042c  f8bbb000          LDRH     r11,[r11,#0]          ;318  ; CANAF_ext_cnt
000430  eb00008b          ADD      r0,r0,r11,LSL #2      ;318
000434  f8dfb028          LDR      r11,|L1.1120|
000438  f8cb0010          STR      r0,[r11,#0x10]        ;318
00043c  4658              MOV      r0,r11                ;319
00043e  6900              LDR      r0,[r0,#0x10]         ;319
000440  e010              B        |L1.1124|
000442  0000              DCW      0x0000
                  |L1.1092|
                          DCD      FULLCAN_ENABLE
                  |L1.1096|
                          DCD      CANAF_FullCAN_cnt
                  |L1.1100|
                          DCD      0x40038000
                  |L1.1104|
                          DCD      CANAF_std_cnt
                  |L1.1108|
                          DCD      CANAF_gstd_cnt
                  |L1.1112|
                          DCD      CANAF_ext_cnt
                  |L1.1116|
                          DCD      CANAF_gext_cnt
                  |L1.1120|
                          DCD      0x4003c000
                  |L1.1124|
000464  f8dfb3f0          LDR      r11,|L1.2136|
000468  f8bbb000          LDRH     r11,[r11,#0]          ;319  ; CANAF_gext_cnt
00046c  eb0000cb          ADD      r0,r0,r11,LSL #3      ;319
000470  f8dfb3e8          LDR      r11,|L1.2140|
000474  f8cb0014          STR      r0,[r11,#0x14]        ;319
000478  48f9              LDR      r0,|L1.2144|
00047a  7800              LDRB     r0,[r0,#0]            ;322  ; FULLCAN_ENABLE
00047c  b918              CBNZ     r0,|L1.1158|
00047e  2000              MOVS     r0,#0                 ;324
000480  f8cb0000          STR      r0,[r11,#0]           ;324
000484  e004              B        |L1.1168|
                  |L1.1158|
000486  2004              MOVS     r0,#4                 ;328
000488  f8dfb3d0          LDR      r11,|L1.2140|
00048c  f8cb0000          STR      r0,[r11,#0]           ;328
                  |L1.1168|
000490  2001              MOVS     r0,#1                 ;330
000492  e5d1              B        |L1.56|
;;;332    
                          ENDP

                  CAN_InitAFTable PROC
;;;41      **********************************************************************/
;;;42     void CAN_InitAFTable(void)
000494  b510              PUSH     {r4,lr}
;;;43     {
;;;44     	CPU_INT32U i = 0;
000496  2400              MOVS     r4,#0
;;;45         
;;;46     	SFF_Table[0].controller = CAN_CTL1;
000498  2000              MOVS     r0,#0
00049a  49f2              LDR      r1,|L1.2148|
00049c  7008              STRB     r0,[r1,#0]
;;;47     	SFF_Table[0].disable    = MSG_ENABLE;
00049e  7048              STRB     r0,[r1,#1]
;;;48     	SFF_Table[0].id_11      = CAN1_RX_RADAR;
0004a0  f44f70c0          MOV      r0,#0x180
0004a4  8048              STRH     r0,[r1,#2]
;;;49         
;;;50     	SFF_Table[1].controller = CAN_CTL1;
0004a6  2000              MOVS     r0,#0
0004a8  7108              STRB     r0,[r1,#4]
;;;51     	SFF_Table[1].disable    = MSG_ENABLE;
0004aa  2100              MOVS     r1,#0
0004ac  48ed              LDR      r0,|L1.2148|
0004ae  7141              STRB     r1,[r0,#5]
;;;52     	SFF_Table[1].id_11      = CAN1_RX_ID;	
0004b0  f2404112          MOV      r1,#0x412
0004b4  80c1              STRH     r1,[r0,#6]
;;;53     
;;;54       SFF_Table[2].controller = CAN_CTL1;
0004b6  2000              MOVS     r0,#0
0004b8  49ea              LDR      r1,|L1.2148|
0004ba  7208              STRB     r0,[r1,#8]
;;;55     	SFF_Table[2].disable    = MSG_ENABLE;
0004bc  2100              MOVS     r1,#0
0004be  48e9              LDR      r0,|L1.2148|
0004c0  7241              STRB     r1,[r0,#9]
;;;56     	SFF_Table[2].id_11      = CAN1_UPGRADE_ID;
0004c2  f24041fa          MOV      r1,#0x4fa
0004c6  8141              STRH     r1,[r0,#0xa]
;;;57     
;;;58     	SFF_Table[3].controller = CAN_CTL1;
0004c8  2000              MOVS     r0,#0
0004ca  49e6              LDR      r1,|L1.2148|
0004cc  7308              STRB     r0,[r1,#0xc]
;;;59     	SFF_Table[3].disable    = MSG_ENABLE;
0004ce  2100              MOVS     r1,#0
0004d0  48e4              LDR      r0,|L1.2148|
0004d2  7341              STRB     r1,[r0,#0xd]
;;;60     	SFF_Table[3].id_11      = CAN1_RX_ID2;
0004d4  f2406117          MOV      r1,#0x617
0004d8  81c1              STRH     r1,[r0,#0xe]
;;;61     	
;;;62     //	SFF_GPR_Table[0].controller1 = CAN_CTL1;
;;;63     //	SFF_GPR_Table[0].disable1    = MSG_ENABLE;
;;;64     //	SFF_GPR_Table[0].lowerID     = CAN1_RX_ID;
;;;65     //	SFF_GPR_Table[0].upperID     = CAN1_RX_ID2;
;;;66     
;;;67     //  SFF_GPR_Table[0].controller2 = CAN_CTL1;
;;;68     //	SFF_GPR_Table[0].disable2    = MSG_ENABLE;
;;;69     //	SFF_GPR_Table[0].lowerID     = 0x00;
;;;70     //	SFF_GPR_Table[0].upperID     = 0x00;
;;;71     
;;;72     	SFF_GPR_Table[0].controller1 = SFF_GPR_Table[0].controller2 = CAN_CTL1;
0004da  2000              MOVS     r0,#0
0004dc  49e2              LDR      r1,|L1.2152|
0004de  7108              STRB     r0,[r1,#4]
0004e0  7008              STRB     r0,[r1,#0]
;;;73     	SFF_GPR_Table[0].disable1    = SFF_GPR_Table[0].disable2    = MSG_DISABLE;
0004e2  2001              MOVS     r0,#1
0004e4  7148              STRB     r0,[r1,#5]
0004e6  7048              STRB     r0,[r1,#1]
;;;74     	SFF_GPR_Table[0].lowerID     = 0x00;
0004e8  2000              MOVS     r0,#0
0004ea  8048              STRH     r0,[r1,#2]
;;;75     	SFF_GPR_Table[0].upperID     = 0x00;
0004ec  80c8              STRH     r0,[r1,#6]
;;;76     
;;;77     	AFTable.FullCAN_Sec      = NULL;
0004ee  49df              LDR      r1,|L1.2156|
0004f0  6008              STR      r0,[r1,#0]  ; AFTable
;;;78     	AFTable.FC_NumEntry      = 0;
0004f2  7108              STRB     r0,[r1,#4]
;;;79     
;;;80     	AFTable.SFF_Sec          = &SFF_Table[0];//NULL;&SFF_Table[0],the sff table is 2   
0004f4  48db              LDR      r0,|L1.2148|
0004f6  6088              STR      r0,[r1,#8]  ; AFTable
;;;81     	AFTable.SFF_NumEntry     = 4;  //2       
0004f8  2004              MOVS     r0,#4
0004fa  7308              STRB     r0,[r1,#0xc]
;;;82     
;;;83     	AFTable.SFF_GPR_Sec      =NULL;          //&SFF_GPR_Table[0]; NULL   
0004fc  2000              MOVS     r0,#0
0004fe  6108              STR      r0,[r1,#0x10]  ; AFTable
;;;84     	AFTable.SFF_GPR_NumEntry =0;  
000500  7508              STRB     r0,[r1,#0x14]
;;;85     
;;;86     	AFTable.EFF_Sec          = NULL;  
000502  6188              STR      r0,[r1,#0x18]  ; AFTable
;;;87     	AFTable.EFF_NumEntry     = 0;
000504  7708              STRB     r0,[r1,#0x1c]
;;;88      
;;;89     	AFTable.EFF_GPR_Sec      = NULL;
000506  6208              STR      r0,[r1,#0x20]  ; AFTable
;;;90     	AFTable.EFF_GPR_NumEntry = 0;
000508  f8810024          STRB     r0,[r1,#0x24]
;;;91     
;;;92     	//clear ALUT RAM
;;;93     	for (i = 0; i < 512; i++) {
00050c  bf00              NOP      
00050e  e005              B        |L1.1308|
                  |L1.1296|
;;;94     		LPC_CANAF_RAM->mask[i] = 0xFFFFFFFF; /* 初始化为0xFFFF是最合理的 */
000510  f04f30ff          MOV      r0,#0xffffffff
000514  4ad6              LDR      r2,|L1.2160|
000516  f8420024          STR      r0,[r2,r4,LSL #2]
00051a  1c64              ADDS     r4,r4,#1              ;93
                  |L1.1308|
00051c  f5b47f00          CMP      r4,#0x200             ;93
000520  d3f6              BCC      |L1.1296|
;;;95     	}
;;;96     
;;;97     	if( CAN_OK == CAN_SetupAFLUT( LPC_CANAF, &AFTable )){
000522  49d2              LDR      r1,|L1.2156|
000524  48cd              LDR      r0,|L1.2140|
000526  f7fffffe          BL       CAN_SetupAFLUT
00052a  2801              CMP      r0,#1
00052c  d103              BNE      |L1.1334|
;;;98     		uart_printf( 0,"CAN INIT OK\r\n" );
00052e  a1d1              ADR      r1,|L1.2164|
000530  2000              MOVS     r0,#0
000532  f7fffffe          BL       uart_printf
                  |L1.1334|
;;;99     	}
;;;100    }
000536  bd10              POP      {r4,pc}
;;;101    
                          ENDP

                  CAN_LoadExplicitEntry PROC
;;;332    
;;;333    CAN_ERROR CAN_LoadExplicitEntry(LPC_CAN_TypeDef* CANx, uint32_t id, CAN_ID_FORMAT_Type format)
000538  e92d4ff0          PUSH     {r4-r11,lr}
;;;334    {
00053c  4607              MOV      r7,r0
00053e  460b              MOV      r3,r1
000540  4690              MOV      r8,r2
;;;335    	uint32_t tmp0 = 0;
000542  f04f0900          MOV      r9,#0
;;;336    	uint32_t buf0=0, buf1=0;
000546  2400              MOVS     r4,#0
000548  2600              MOVS     r6,#0
;;;337    	int16_t cnt1=0, cnt2=0, bound1=0, total=0;
00054a  2100              MOVS     r1,#0
00054c  2200              MOVS     r2,#0
00054e  2500              MOVS     r5,#0
000550  468c              MOV      r12,r1
;;;338    
;;;339    	if (CANx == LPC_CAN1)
000552  48cc              LDR      r0,|L1.2180|
000554  4287              CMP      r7,r0
000556  d100              BNE      |L1.1370|
;;;340    	{
;;;341    		tmp0 = 0;
000558  e004              B        |L1.1380|
                  |L1.1370|
;;;342    	}
;;;343    	else if (CANx == LPC_CAN2)
00055a  48cb              LDR      r0,|L1.2184|
00055c  4287              CMP      r7,r0
00055e  d101              BNE      |L1.1380|
;;;344    	{
;;;345    		tmp0 = 1;
000560  f04f0901          MOV      r9,#1
                  |L1.1380|
;;;346    	}
;;;347    
;;;348    	/* Acceptance Filter Memory full - return */
;;;349    	total =((CANAF_FullCAN_cnt+1)>>1)+ CANAF_FullCAN_cnt*3 +((CANAF_std_cnt + 1) >> 1)+  \
000564  48c9              LDR      r0,|L1.2188|
000566  8800              LDRH     r0,[r0,#0]  ; CANAF_FullCAN_cnt
000568  eb000a40          ADD      r10,r0,r0,LSL #1
00056c  48c7              LDR      r0,|L1.2188|
00056e  8800              LDRH     r0,[r0,#0]  ; CANAF_FullCAN_cnt
000570  1c40              ADDS     r0,r0,#1
000572  eb0a0a60          ADD      r10,r10,r0,ASR #1
000576  48c6              LDR      r0,|L1.2192|
000578  8800              LDRH     r0,[r0,#0]  ; CANAF_std_cnt
00057a  1c40              ADDS     r0,r0,#1
00057c  eb0a0060          ADD      r0,r10,r0,ASR #1
000580  f8dfa310          LDR      r10,|L1.2196|
000584  f8baa000          LDRH     r10,[r10,#0]  ; CANAF_gstd_cnt
000588  4450              ADD      r0,r0,r10
00058a  f8dfa30c          LDR      r10,|L1.2200|
00058e  f8baa000          LDRH     r10,[r10,#0]  ; CANAF_ext_cnt
000592  4450              ADD      r0,r0,r10
000594  f8dfa2c0          LDR      r10,|L1.2136|
000598  f8baa000          LDRH     r10,[r10,#0]  ; CANAF_gext_cnt
00059c  eb00004a          ADD      r0,r0,r10,LSL #1
0005a0  fa0ffc80          SXTH     r12,r0
;;;350    			CANAF_gstd_cnt + CANAF_ext_cnt + (CANAF_gext_cnt<<1);
;;;351    	if (total >= 512){ //don't have enough space
0005a4  f5bc7f00          CMP      r12,#0x200
0005a8  db02              BLT      |L1.1456|
;;;352    		return CAN_OBJECTS_FULL_ERROR;
0005aa  2002              MOVS     r0,#2
                  |L1.1452|
;;;353    	}
;;;354    
;;;355    	/* Setup Acceptance Filter Configuration
;;;356        Acceptance Filter Mode Register = Off */
;;;357    	LPC_CANAF->AFMR = 0x00000001;
;;;358    
;;;359    /*********** Add Explicit Standard Identifier Frame Format entry *********/
;;;360     	if(format == STD_ID_FORMAT)
;;;361     	{
;;;362     		id &= 0x07FF;
;;;363     		id |= (tmp0 << 13); /* Add controller number */
;;;364    		/* Move all remaining sections one place up
;;;365    		if new entry will increase FullCAN list */
;;;366    
;;;367    		//when equal, exit
;;;368    		cnt1 = (CANAF_FullCAN_cnt+1)>>1;
;;;369    		cnt2 = CANAF_std_cnt;
;;;370    		bound1 = ((CANAF_FullCAN_cnt+1)>>1)+((CANAF_std_cnt+1)>>1);
;;;371    		while (cnt1 < bound1)
;;;372    		{
;;;373    			/* Loop through standard existing IDs */
;;;374    			if (((LPC_CANAF_RAM->mask[cnt1] >> 16) & 0xE7FF) == id)
;;;375    			{
;;;376    				cnt2 = cnt1 * 2;
;;;377    				goto outcan;
;;;378    			}
;;;379    	
;;;380    			if ((LPC_CANAF_RAM->mask[cnt1] & 0x0000E7FF) == id)
;;;381    			{
;;;382    				cnt2 = cnt1 * 2 + 1;
;;;383    				goto outcan;
;;;384    			}
;;;385    	
;;;386    			cnt1++;
;;;387    		}
;;;388    
;;;389    
;;;390    		if ((CANAF_std_cnt & 0x0001) == 0)
;;;391    		{
;;;392    			cnt1   = ((CANAF_FullCAN_cnt+1)>>1)+((CANAF_std_cnt+1)>>1);
;;;393    			bound1 = total - cnt1;
;;;394    			buf0   = LPC_CANAF_RAM->mask[cnt1];
;;;395    			while(bound1--)
;;;396    			{
;;;397    				cnt1++;
;;;398    				buf1 = LPC_CANAF_RAM->mask[cnt1];
;;;399    				LPC_CANAF_RAM->mask[cnt1] = buf0;
;;;400    				buf0 = buf1;
;;;401    			}
;;;402    		}
;;;403    		if (CANAF_std_cnt == 0)
;;;404    		{
;;;405    			cnt2 = (CANAF_FullCAN_cnt + 1)>>1;
;;;406    			/* For entering first ID */
;;;407    			LPC_CANAF_RAM->mask[cnt2] = 0x0000FFFF | (id << 16);
;;;408    		}
;;;409    		else if (CANAF_std_cnt == 1)
;;;410    		{
;;;411    			cnt2 = (CANAF_FullCAN_cnt + 1)>>1;
;;;412    			/* For entering second ID */
;;;413    			if (((LPC_CANAF_RAM->mask[cnt2] >> 16)& 0xE7FF) > id)
;;;414    			{
;;;415    				LPC_CANAF_RAM->mask[cnt2] = (LPC_CANAF_RAM->mask[cnt2] >> 16) | (id << 16);
;;;416    			}
;;;417    			else
;;;418    			{
;;;419    				LPC_CANAF_RAM->mask[cnt2] = (LPC_CANAF_RAM->mask[cnt2] & 0xFFFF0000) | id;
;;;420    			}
;;;421    		}
;;;422    		else
;;;423    		{
;;;424    			/* Find where to insert new ID */
;;;425    			cnt1 = (CANAF_FullCAN_cnt+1)>>1;
;;;426    			cnt2 = CANAF_std_cnt;
;;;427    			bound1 = ((CANAF_FullCAN_cnt+1)>>1)+((CANAF_std_cnt+1)>>1);
;;;428    			while (cnt1 < bound1)
;;;429    			{
;;;430    				/* Loop through standard existing IDs */
;;;431    				if (((LPC_CANAF_RAM->mask[cnt1] >> 16) & 0xE7FF) > id)
;;;432    				{
;;;433    					cnt2 = cnt1 * 2;
;;;434    					break;
;;;435    				}
;;;436    
;;;437    				if ((LPC_CANAF_RAM->mask[cnt1] & 0x0000E7FF) > id)
;;;438    				{
;;;439    					cnt2 = cnt1 * 2 + 1;
;;;440    					break;
;;;441    				}
;;;442    
;;;443    				cnt1++;
;;;444    			}
;;;445    			/* cnt1 = U32 where to insert new ID */
;;;446    			/* cnt2 = U16 where to insert new ID */
;;;447    
;;;448    			if (cnt1 == bound1)
;;;449    			{
;;;450    				/* Adding ID as last entry */
;;;451    				/* Even number of IDs exists */
;;;452    				if ((CANAF_std_cnt & 0x0001) == 0)
;;;453    				{
;;;454    					LPC_CANAF_RAM->mask[cnt1]  = 0x0000FFFF | (id << 16);
;;;455    				}
;;;456    				/* Odd  number of IDs exists */
;;;457    				else
;;;458    				{
;;;459    					LPC_CANAF_RAM->mask[cnt1]  = (LPC_CANAF_RAM->mask[cnt1] & 0xFFFF0000) | id;
;;;460    				}
;;;461    			}
;;;462    			else
;;;463    			{
;;;464    				buf0 = LPC_CANAF_RAM->mask[cnt1]; /* Remember current entry */
;;;465    				if ((cnt2 & 0x0001) == 0)
;;;466    				{
;;;467    					/* Insert new mask to even address*/
;;;468    					buf1 = (id << 16) | (buf0 >> 16);
;;;469    				}
;;;470    				else
;;;471    				{
;;;472    					/* Insert new mask to odd  address */
;;;473    					buf1 = (buf0 & 0xFFFF0000) | id;
;;;474    				}
;;;475    				LPC_CANAF_RAM->mask[cnt1] = buf1;/* Insert mask */
;;;476    				bound1 = ((CANAF_FullCAN_cnt+1)>>1)+((CANAF_std_cnt+1)>>1)-1;
;;;477    				/* Move all remaining standard mask entries one place up */
;;;478    				while (cnt1 < bound1)
;;;479    				{
;;;480    					cnt1++;
;;;481    					buf1  = LPC_CANAF_RAM->mask[cnt1];
;;;482    					LPC_CANAF_RAM->mask[cnt1] = (buf1 >> 16) | (buf0 << 16);
;;;483    					buf0  = buf1;
;;;484    				}
;;;485    
;;;486    				if ((CANAF_std_cnt & 0x0001) == 0)
;;;487    				{
;;;488    					/* Even number of IDs exists */
;;;489    					LPC_CANAF_RAM->mask[cnt1+1] = (buf0 <<16) |(0x0000FFFF);
;;;490    				}
;;;491    			}
;;;492    		}
;;;493    		CANAF_std_cnt++;
;;;494    		//update address values
;;;495    		if((CANAF_std_cnt & 0x0001) == 1)
;;;496    		{
;;;497    		    LPC_CANAF->SFF_GRP_sa +=0x04 ;
;;;498    		    LPC_CANAF->EFF_sa     +=0x04 ;
;;;499    		    LPC_CANAF->EFF_GRP_sa +=0x04;
;;;500    		    LPC_CANAF->ENDofTable +=0x04;
;;;501     	    }
;;;502    	}
;;;503    
;;;504    /*********** Add Explicit Extended Identifier Frame Format entry *********/
;;;505     	else
;;;506     	{
;;;507     		/* Add controller number */
;;;508     		id |= (tmp0) << 29;
;;;509    
;;;510     		cnt1 = ((CANAF_FullCAN_cnt+1)>>1)+(((CANAF_std_cnt + 1) >> 1) + CANAF_gstd_cnt);
;;;511     		cnt2 = 0;
;;;512     		while (cnt2 < CANAF_ext_cnt)
;;;513     		{
;;;514     			/* Loop through extended existing masks*/
;;;515     			if (LPC_CANAF_RAM->mask[cnt1] > id)
;;;516     			{
;;;517     				break;
;;;518     			}
;;;519     			cnt1++;/* cnt1 = U32 where to insert new mask */
;;;520    			cnt2++;
;;;521     		}
;;;522    
;;;523     		buf0 = LPC_CANAF_RAM->mask[cnt1];  /* Remember current entry */
;;;524     		LPC_CANAF_RAM->mask[cnt1] = id;    /* Insert mask */
;;;525    
;;;526     		CANAF_ext_cnt++;
;;;527    
;;;528     		bound1 = total;
;;;529     		/* Move all remaining extended mask entries one place up*/
;;;530     		while (cnt2 < bound1)
;;;531     		{
;;;532     			cnt1++;
;;;533     			cnt2++;
;;;534     			buf1 = LPC_CANAF_RAM->mask[cnt1];
;;;535     			LPC_CANAF_RAM->mask[cnt1] = buf0;
;;;536     			buf0 = buf1;
;;;537     		}
;;;538     		/* update address values */
;;;539     		LPC_CANAF->EFF_GRP_sa += 4;
;;;540     		LPC_CANAF->ENDofTable += 4;
;;;541     	}
;;;542    outcan:
;;;543     	if(CANAF_FullCAN_cnt == 0) //not use FullCAN mode
;;;544     	{
;;;545     		LPC_CANAF->AFMR = 0x00;//not use FullCAN mode
;;;546     	}
;;;547     	else
;;;548     	{
;;;549     		LPC_CANAF->AFMR = 0x04;
;;;550     	}
;;;551    
;;;552     	return CAN_OK;
;;;553    }
0005ac  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.1456|
0005b0  2001              MOVS     r0,#1                 ;357
0005b2  f8dfa2a8          LDR      r10,|L1.2140|
0005b6  f8ca0000          STR      r0,[r10,#0]           ;357
0005ba  f1b80f00          CMP      r8,#0                 ;360
0005be  d16f              BNE      |L1.1696|
0005c0  f3c3030a          UBFX     r3,r3,#0,#11          ;362
0005c4  ea433349          ORR      r3,r3,r9,LSL #13      ;363
0005c8  48b0              LDR      r0,|L1.2188|
0005ca  8800              LDRH     r0,[r0,#0]            ;368  ; CANAF_FullCAN_cnt
0005cc  1c40              ADDS     r0,r0,#1              ;368
0005ce  1040              ASRS     r0,r0,#1              ;368
0005d0  b201              SXTH     r1,r0                 ;368
0005d2  48af              LDR      r0,|L1.2192|
0005d4  8800              LDRH     r0,[r0,#0]            ;369  ; CANAF_std_cnt
0005d6  b202              SXTH     r2,r0                 ;369
0005d8  48ac              LDR      r0,|L1.2188|
0005da  8800              LDRH     r0,[r0,#0]            ;370  ; CANAF_FullCAN_cnt
0005dc  1c40              ADDS     r0,r0,#1              ;370
0005de  ea4f0a60          ASR      r10,r0,#1             ;370
0005e2  48ab              LDR      r0,|L1.2192|
0005e4  8800              LDRH     r0,[r0,#0]            ;370  ; CANAF_std_cnt
0005e6  1c40              ADDS     r0,r0,#1              ;370
0005e8  eb0a0060          ADD      r0,r10,r0,ASR #1      ;370
0005ec  b205              SXTH     r5,r0                 ;370
0005ee  e01d              B        |L1.1580|
                  |L1.1520|
0005f0  f8dfa27c          LDR      r10,|L1.2160|
0005f4  f85a0021          LDR      r0,[r10,r1,LSL #2]    ;374
0005f8  f24e7aff          MOV      r10,#0xe7ff           ;374
0005fc  ea0a4010          AND      r0,r10,r0,LSR #16     ;374
000600  4298              CMP      r0,r3                 ;374
000602  d102              BNE      |L1.1546|
000604  0048              LSLS     r0,r1,#1              ;376
000606  b202              SXTH     r2,r0                 ;376
000608  e193              B        |L1.2354|
                  |L1.1546|
00060a  f8dfa264          LDR      r10,|L1.2160|
00060e  f85a0021          LDR      r0,[r10,r1,LSL #2]    ;380
000612  f24e7aff          MOV      r10,#0xe7ff           ;380
000616  ea00000a          AND      r0,r0,r10             ;380
00061a  4298              CMP      r0,r3                 ;380
00061c  d104              BNE      |L1.1576|
00061e  2001              MOVS     r0,#1                 ;382
000620  eb000041          ADD      r0,r0,r1,LSL #1       ;382
000624  b202              SXTH     r2,r0                 ;382
000626  e184              B        |L1.2354|
                  |L1.1576|
000628  1c48              ADDS     r0,r1,#1              ;386
00062a  b201              SXTH     r1,r0                 ;386
                  |L1.1580|
00062c  42a9              CMP      r1,r5                 ;371
00062e  dbdf              BLT      |L1.1520|
000630  4897              LDR      r0,|L1.2192|
000632  7800              LDRB     r0,[r0,#0]            ;390  ; CANAF_std_cnt
000634  f0000001          AND      r0,r0,#1              ;390
000638  bb08              CBNZ     r0,|L1.1662|
00063a  4894              LDR      r0,|L1.2188|
00063c  8800              LDRH     r0,[r0,#0]            ;392  ; CANAF_FullCAN_cnt
00063e  1c40              ADDS     r0,r0,#1              ;392
000640  ea4f0a60          ASR      r10,r0,#1             ;392
000644  4892              LDR      r0,|L1.2192|
000646  8800              LDRH     r0,[r0,#0]            ;392  ; CANAF_std_cnt
000648  1c40              ADDS     r0,r0,#1              ;392
00064a  eb0a0060          ADD      r0,r10,r0,ASR #1      ;392
00064e  b201              SXTH     r1,r0                 ;392
000650  ebac0001          SUB      r0,r12,r1             ;393
000654  b205              SXTH     r5,r0                 ;393
000656  f8dfa218          LDR      r10,|L1.2160|
00065a  f85a4021          LDR      r4,[r10,r1,LSL #2]    ;394
00065e  e008              B        |L1.1650|
                  |L1.1632|
000660  1c48              ADDS     r0,r1,#1              ;397
000662  b201              SXTH     r1,r0                 ;397
000664  f8dfa208          LDR      r10,|L1.2160|
000668  f85a6021          LDR      r6,[r10,r1,LSL #2]    ;398
00066c  f84a4021          STR      r4,[r10,r1,LSL #2]    ;399
000670  4634              MOV      r4,r6                 ;400
                  |L1.1650|
000672  1e28              SUBS     r0,r5,#0              ;395
000674  f1a50a01          SUB      r10,r5,#1             ;395
000678  fa0ff58a          SXTH     r5,r10                ;395
00067c  d1f0              BNE      |L1.1632|
                  |L1.1662|
00067e  4884              LDR      r0,|L1.2192|
000680  8800              LDRH     r0,[r0,#0]            ;403  ; CANAF_std_cnt
000682  b970              CBNZ     r0,|L1.1698|
000684  4881              LDR      r0,|L1.2188|
000686  8800              LDRH     r0,[r0,#0]            ;405  ; CANAF_FullCAN_cnt
000688  1c40              ADDS     r0,r0,#1              ;405
00068a  1040              ASRS     r0,r0,#1              ;405
00068c  b202              SXTH     r2,r0                 ;405
00068e  f64f70ff          MOV      r0,#0xffff            ;407
000692  ea404003          ORR      r0,r0,r3,LSL #16      ;407
000696  f8dfb1d8          LDR      r11,|L1.2160|
00069a  f84b0022          STR      r0,[r11,r2,LSL #2]    ;407
00069e  e0b6              B        |L1.2062|
                  |L1.1696|
0006a0  e0fc              B        |L1.2204|
                  |L1.1698|
0006a2  487b              LDR      r0,|L1.2192|
0006a4  8800              LDRH     r0,[r0,#0]            ;409  ; CANAF_std_cnt
0006a6  2801              CMP      r0,#1                 ;409
0006a8  d124              BNE      |L1.1780|
0006aa  4878              LDR      r0,|L1.2188|
0006ac  8800              LDRH     r0,[r0,#0]            ;411  ; CANAF_FullCAN_cnt
0006ae  1c40              ADDS     r0,r0,#1              ;411
0006b0  1040              ASRS     r0,r0,#1              ;411
0006b2  b202              SXTH     r2,r0                 ;411
0006b4  f8dfa1b8          LDR      r10,|L1.2160|
0006b8  f85a0022          LDR      r0,[r10,r2,LSL #2]    ;413
0006bc  f24e7aff          MOV      r10,#0xe7ff           ;413
0006c0  ea0a4010          AND      r0,r10,r0,LSR #16     ;413
0006c4  4298              CMP      r0,r3                 ;413
0006c6  d90a              BLS      |L1.1758|
0006c8  f8dfa1a4          LDR      r10,|L1.2160|
0006cc  f85a0022          LDR      r0,[r10,r2,LSL #2]    ;415
0006d0  0c00              LSRS     r0,r0,#16             ;415
0006d2  ea404003          ORR      r0,r0,r3,LSL #16      ;415
0006d6  46d3              MOV      r11,r10               ;415
0006d8  f84b0022          STR      r0,[r11,r2,LSL #2]    ;415
0006dc  e097              B        |L1.2062|
                  |L1.1758|
0006de  f8dfa190          LDR      r10,|L1.2160|
0006e2  f85a0022          LDR      r0,[r10,r2,LSL #2]    ;419
0006e6  f36f000f          BFC      r0,#0,#16             ;419
0006ea  4318              ORRS     r0,r0,r3              ;419
0006ec  46d3              MOV      r11,r10               ;419
0006ee  f84b0022          STR      r0,[r11,r2,LSL #2]    ;419
0006f2  e08c              B        |L1.2062|
                  |L1.1780|
0006f4  4865              LDR      r0,|L1.2188|
0006f6  8800              LDRH     r0,[r0,#0]            ;425  ; CANAF_FullCAN_cnt
0006f8  1c40              ADDS     r0,r0,#1              ;425
0006fa  1040              ASRS     r0,r0,#1              ;425
0006fc  b201              SXTH     r1,r0                 ;425
0006fe  4864              LDR      r0,|L1.2192|
000700  8800              LDRH     r0,[r0,#0]            ;426  ; CANAF_std_cnt
000702  b202              SXTH     r2,r0                 ;426
000704  4861              LDR      r0,|L1.2188|
000706  8800              LDRH     r0,[r0,#0]            ;427  ; CANAF_FullCAN_cnt
000708  1c40              ADDS     r0,r0,#1              ;427
00070a  ea4f0a60          ASR      r10,r0,#1             ;427
00070e  4860              LDR      r0,|L1.2192|
000710  8800              LDRH     r0,[r0,#0]            ;427  ; CANAF_std_cnt
000712  1c40              ADDS     r0,r0,#1              ;427
000714  eb0a0060          ADD      r0,r10,r0,ASR #1      ;427
000718  b205              SXTH     r5,r0                 ;427
00071a  e01d              B        |L1.1880|
                  |L1.1820|
00071c  f8dfa150          LDR      r10,|L1.2160|
000720  f85a0021          LDR      r0,[r10,r1,LSL #2]    ;431
000724  f24e7aff          MOV      r10,#0xe7ff           ;431
000728  ea0a4010          AND      r0,r10,r0,LSR #16     ;431
00072c  4298              CMP      r0,r3                 ;431
00072e  d902              BLS      |L1.1846|
000730  0048              LSLS     r0,r1,#1              ;433
000732  b202              SXTH     r2,r0                 ;433
000734  e012              B        |L1.1884|
                  |L1.1846|
000736  f8dfa138          LDR      r10,|L1.2160|
00073a  f85a0021          LDR      r0,[r10,r1,LSL #2]    ;437
00073e  f24e7aff          MOV      r10,#0xe7ff           ;437
000742  ea00000a          AND      r0,r0,r10             ;437
000746  4298              CMP      r0,r3                 ;437
000748  d904              BLS      |L1.1876|
00074a  2001              MOVS     r0,#1                 ;439
00074c  eb000041          ADD      r0,r0,r1,LSL #1       ;439
000750  b202              SXTH     r2,r0                 ;439
000752  e003              B        |L1.1884|
                  |L1.1876|
000754  1c48              ADDS     r0,r1,#1              ;443
000756  b201              SXTH     r1,r0                 ;443
                  |L1.1880|
000758  42a9              CMP      r1,r5                 ;428
00075a  dbdf              BLT      |L1.1820|
                  |L1.1884|
00075c  bf00              NOP                            ;434
00075e  42a9              CMP      r1,r5                 ;448
000760  d118              BNE      |L1.1940|
000762  484b              LDR      r0,|L1.2192|
000764  7800              LDRB     r0,[r0,#0]            ;452  ; CANAF_std_cnt
000766  f0000001          AND      r0,r0,#1              ;452
00076a  b940              CBNZ     r0,|L1.1918|
00076c  f64f70ff          MOV      r0,#0xffff            ;454
000770  ea404003          ORR      r0,r0,r3,LSL #16      ;454
000774  f8dfb0f8          LDR      r11,|L1.2160|
000778  f84b0021          STR      r0,[r11,r1,LSL #2]    ;454
00077c  e047              B        |L1.2062|
                  |L1.1918|
00077e  f8dfa0f0          LDR      r10,|L1.2160|
000782  f85a0021          LDR      r0,[r10,r1,LSL #2]    ;459
000786  f36f000f          BFC      r0,#0,#16             ;459
00078a  4318              ORRS     r0,r0,r3              ;459
00078c  46d3              MOV      r11,r10               ;459
00078e  f84b0021          STR      r0,[r11,r1,LSL #2]    ;459
000792  e03c              B        |L1.2062|
                  |L1.1940|
000794  f8dfa0d8          LDR      r10,|L1.2160|
000798  f85a4021          LDR      r4,[r10,r1,LSL #2]    ;464
00079c  f0020001          AND      r0,r2,#1              ;465
0007a0  b918              CBNZ     r0,|L1.1962|
0007a2  0418              LSLS     r0,r3,#16             ;468
0007a4  ea404614          ORR      r6,r0,r4,LSR #16      ;468
0007a8  e003              B        |L1.1970|
                  |L1.1962|
0007aa  0c20              LSRS     r0,r4,#16             ;473
0007ac  0400              LSLS     r0,r0,#16             ;473
0007ae  ea400603          ORR      r6,r0,r3              ;473
                  |L1.1970|
0007b2  f8dfa0bc          LDR      r10,|L1.2160|
0007b6  f84a6021          STR      r6,[r10,r1,LSL #2]    ;475
0007ba  4834              LDR      r0,|L1.2188|
0007bc  8800              LDRH     r0,[r0,#0]            ;476  ; CANAF_FullCAN_cnt
0007be  1c40              ADDS     r0,r0,#1              ;476
0007c0  ea4f0a60          ASR      r10,r0,#1             ;476
0007c4  4832              LDR      r0,|L1.2192|
0007c6  8800              LDRH     r0,[r0,#0]            ;476  ; CANAF_std_cnt
0007c8  1c40              ADDS     r0,r0,#1              ;476
0007ca  eb0a0060          ADD      r0,r10,r0,ASR #1      ;476
0007ce  1e40              SUBS     r0,r0,#1              ;476
0007d0  b205              SXTH     r5,r0                 ;476
0007d2  e00c              B        |L1.2030|
                  |L1.2004|
0007d4  1c48              ADDS     r0,r1,#1              ;480
0007d6  b201              SXTH     r1,r0                 ;480
0007d8  f8dfa094          LDR      r10,|L1.2160|
0007dc  f85a6021          LDR      r6,[r10,r1,LSL #2]    ;481
0007e0  0c30              LSRS     r0,r6,#16             ;482
0007e2  ea404004          ORR      r0,r0,r4,LSL #16      ;482
0007e6  46d3              MOV      r11,r10               ;482
0007e8  f84b0021          STR      r0,[r11,r1,LSL #2]    ;482
0007ec  4634              MOV      r4,r6                 ;483
                  |L1.2030|
0007ee  42a9              CMP      r1,r5                 ;478
0007f0  dbf0              BLT      |L1.2004|
0007f2  4827              LDR      r0,|L1.2192|
0007f4  7800              LDRB     r0,[r0,#0]            ;486  ; CANAF_std_cnt
0007f6  f0000001          AND      r0,r0,#1              ;486
0007fa  b940              CBNZ     r0,|L1.2062|
0007fc  f64f70ff          MOV      r0,#0xffff            ;489
000800  eb004a04          ADD      r10,r0,r4,LSL #16     ;489
000804  1c48              ADDS     r0,r1,#1              ;489
000806  f8dfb068          LDR      r11,|L1.2160|
00080a  f84ba020          STR      r10,[r11,r0,LSL #2]   ;489
                  |L1.2062|
00080e  4820              LDR      r0,|L1.2192|
000810  8800              LDRH     r0,[r0,#0]            ;493  ; CANAF_std_cnt
000812  1c40              ADDS     r0,r0,#1              ;493
000814  f8dfa078          LDR      r10,|L1.2192|
000818  f8aa0000          STRH     r0,[r10,#0]           ;493
00081c  4650              MOV      r0,r10                ;495
00081e  7800              LDRB     r0,[r0,#0]            ;495  ; CANAF_std_cnt
000820  f0000001          AND      r0,r0,#1              ;495
000824  2800              CMP      r0,#0                 ;495
000826  d015              BEQ      |L1.2132|
000828  480c              LDR      r0,|L1.2140|
00082a  6880              LDR      r0,[r0,#8]            ;497
00082c  1d00              ADDS     r0,r0,#4              ;497
00082e  f8dfa02c          LDR      r10,|L1.2140|
000832  f8ca0008          STR      r0,[r10,#8]           ;497
000836  4650              MOV      r0,r10                ;498
000838  68c0              LDR      r0,[r0,#0xc]          ;498
00083a  1d00              ADDS     r0,r0,#4              ;498
00083c  f8ca000c          STR      r0,[r10,#0xc]         ;498
000840  4650              MOV      r0,r10                ;499
000842  6900              LDR      r0,[r0,#0x10]         ;499
000844  1d00              ADDS     r0,r0,#4              ;499
000846  f8ca0010          STR      r0,[r10,#0x10]        ;499
00084a  4650              MOV      r0,r10                ;500
00084c  6940              LDR      r0,[r0,#0x14]         ;500
00084e  1d00              ADDS     r0,r0,#4              ;500
000850  f8ca0014          STR      r0,[r10,#0x14]        ;500
                  |L1.2132|
000854  e06c              B        |L1.2352|
000856  0000              DCW      0x0000
                  |L1.2136|
                          DCD      CANAF_gext_cnt
                  |L1.2140|
                          DCD      0x4003c000
                  |L1.2144|
                          DCD      FULLCAN_ENABLE
                  |L1.2148|
                          DCD      SFF_Table
                  |L1.2152|
                          DCD      SFF_GPR_Table
                  |L1.2156|
                          DCD      AFTable
                  |L1.2160|
                          DCD      0x40038000
                  |L1.2164|
000874  43414e20          DCB      "CAN INIT OK\r\n",0
000878  494e4954
00087c  204f4b0d
000880  0a00    
000882  00                DCB      0
000883  00                DCB      0
                  |L1.2180|
                          DCD      0x40044000
                  |L1.2184|
                          DCD      0x40048000
                  |L1.2188|
                          DCD      CANAF_FullCAN_cnt
                  |L1.2192|
                          DCD      CANAF_std_cnt
                  |L1.2196|
                          DCD      CANAF_gstd_cnt
                  |L1.2200|
                          DCD      CANAF_ext_cnt
                  |L1.2204|
00089c  ea437349          ORR      r3,r3,r9,LSL #29      ;508
0008a0  48f9              LDR      r0,|L1.3208|
0008a2  f8b0a000          LDRH     r10,[r0,#0]           ;510  ; CANAF_gstd_cnt
0008a6  48f9              LDR      r0,|L1.3212|
0008a8  8800              LDRH     r0,[r0,#0]            ;510  ; CANAF_std_cnt
0008aa  1c40              ADDS     r0,r0,#1              ;510
0008ac  eb0a0a60          ADD      r10,r10,r0,ASR #1     ;510
0008b0  48f7              LDR      r0,|L1.3216|
0008b2  8800              LDRH     r0,[r0,#0]            ;510  ; CANAF_FullCAN_cnt
0008b4  1c40              ADDS     r0,r0,#1              ;510
0008b6  eb0a0060          ADD      r0,r10,r0,ASR #1      ;510
0008ba  b201              SXTH     r1,r0                 ;510
0008bc  2200              MOVS     r2,#0                 ;511
0008be  e00a              B        |L1.2262|
                  |L1.2240|
0008c0  f8dfa3d0          LDR      r10,|L1.3220|
0008c4  f85a0021          LDR      r0,[r10,r1,LSL #2]    ;515
0008c8  4298              CMP      r0,r3                 ;515
0008ca  d900              BLS      |L1.2254|
0008cc  e007              B        |L1.2270|
                  |L1.2254|
0008ce  1c48              ADDS     r0,r1,#1              ;519
0008d0  b201              SXTH     r1,r0                 ;519
0008d2  1c50              ADDS     r0,r2,#1              ;520
0008d4  b202              SXTH     r2,r0                 ;520
                  |L1.2262|
0008d6  48f0              LDR      r0,|L1.3224|
0008d8  8800              LDRH     r0,[r0,#0]            ;512  ; CANAF_ext_cnt
0008da  4282              CMP      r2,r0                 ;512
0008dc  dbf0              BLT      |L1.2240|
                  |L1.2270|
0008de  bf00              NOP                            ;517
0008e0  f8dfa3b0          LDR      r10,|L1.3220|
0008e4  f85a4021          LDR      r4,[r10,r1,LSL #2]    ;523
0008e8  f84a3021          STR      r3,[r10,r1,LSL #2]    ;524
0008ec  48ea              LDR      r0,|L1.3224|
0008ee  8800              LDRH     r0,[r0,#0]            ;526  ; CANAF_ext_cnt
0008f0  1c40              ADDS     r0,r0,#1              ;526
0008f2  f8dfa3a4          LDR      r10,|L1.3224|
0008f6  f8aa0000          STRH     r0,[r10,#0]           ;526
0008fa  4665              MOV      r5,r12                ;528
0008fc  e00a              B        |L1.2324|
                  |L1.2302|
0008fe  1c48              ADDS     r0,r1,#1              ;532
000900  b201              SXTH     r1,r0                 ;532
000902  1c50              ADDS     r0,r2,#1              ;533
000904  b202              SXTH     r2,r0                 ;533
000906  f8dfa38c          LDR      r10,|L1.3220|
00090a  f85a6021          LDR      r6,[r10,r1,LSL #2]    ;534
00090e  f84a4021          STR      r4,[r10,r1,LSL #2]    ;535
000912  4634              MOV      r4,r6                 ;536
                  |L1.2324|
000914  42aa              CMP      r2,r5                 ;530
000916  dbf2              BLT      |L1.2302|
000918  48e0              LDR      r0,|L1.3228|
00091a  6900              LDR      r0,[r0,#0x10]         ;539
00091c  1d00              ADDS     r0,r0,#4              ;539
00091e  f8dfa37c          LDR      r10,|L1.3228|
000922  f8ca0010          STR      r0,[r10,#0x10]        ;539
000926  4650              MOV      r0,r10                ;540
000928  6940              LDR      r0,[r0,#0x14]         ;540
00092a  1d00              ADDS     r0,r0,#4              ;540
00092c  f8ca0014          STR      r0,[r10,#0x14]        ;540
                  |L1.2352|
000930  bf00              NOP                            ;542
                  |L1.2354|
000932  48d7              LDR      r0,|L1.3216|
000934  8800              LDRH     r0,[r0,#0]            ;543  ; CANAF_FullCAN_cnt
000936  b928              CBNZ     r0,|L1.2372|
000938  2000              MOVS     r0,#0                 ;545
00093a  f8dfa360          LDR      r10,|L1.3228|
00093e  f8ca0000          STR      r0,[r10,#0]           ;545
000942  e004              B        |L1.2382|
                  |L1.2372|
000944  2004              MOVS     r0,#4                 ;549
000946  f8dfa354          LDR      r10,|L1.3228|
00094a  f8ca0000          STR      r0,[r10,#0]           ;549
                  |L1.2382|
00094e  2001              MOVS     r0,#1                 ;552
000950  e62c              B        |L1.1452|
;;;554    
                          ENDP

                  CAN_LoadFullCANEntry PROC
;;;555    CAN_ERROR CAN_LoadFullCANEntry (LPC_CAN_TypeDef* CANx, uint16_t id)
000952  e92d4ffc          PUSH     {r2-r11,lr}
;;;556    {
000956  4607              MOV      r7,r0
000958  460a              MOV      r2,r1
;;;557    	uint32_t ctrl0 = 0;
00095a  f04f0800          MOV      r8,#0
;;;558    	uint32_t buf0=0, buf1=0, buf2=0;
00095e  2300              MOVS     r3,#0
000960  2400              MOVS     r4,#0
000962  4699              MOV      r9,r3
;;;559    	uint32_t tmp0=0, tmp1=0, tmp2=0;
000964  469a              MOV      r10,r3
000966  2000              MOVS     r0,#0
000968  9001              STR      r0,[sp,#4]
00096a  9000              STR      r0,[sp,#0]
;;;560    	int16_t cnt1=0, cnt2=0, bound1=0, total=0;
00096c  2100              MOVS     r1,#0
00096e  4684              MOV      r12,r0
000970  2500              MOVS     r5,#0
000972  2600              MOVS     r6,#0
;;;561    
;;;562    	if (CANx == LPC_CAN1)
000974  48ca              LDR      r0,|L1.3232|
000976  4287              CMP      r7,r0
000978  d100              BNE      |L1.2428|
;;;563    	{
;;;564    		ctrl0 = 0;
00097a  e004              B        |L1.2438|
                  |L1.2428|
;;;565    	}
;;;566    	else if (CANx == LPC_CAN2)
00097c  48c9              LDR      r0,|L1.3236|
00097e  4287              CMP      r7,r0
000980  d101              BNE      |L1.2438|
;;;567    	{
;;;568    		ctrl0 = 1;
000982  f04f0801          MOV      r8,#1
                  |L1.2438|
;;;569    	}
;;;570    
;;;571    	/* Acceptance Filter Memory full - return */
;;;572    	total =((CANAF_FullCAN_cnt+1)>>1)+ CANAF_FullCAN_cnt*3 +((CANAF_std_cnt + 1) >> 1)+  \
000986  48c2              LDR      r0,|L1.3216|
000988  8800              LDRH     r0,[r0,#0]  ; CANAF_FullCAN_cnt
00098a  eb000b40          ADD      r11,r0,r0,LSL #1
00098e  48c0              LDR      r0,|L1.3216|
000990  8800              LDRH     r0,[r0,#0]  ; CANAF_FullCAN_cnt
000992  1c40              ADDS     r0,r0,#1
000994  eb0b0b60          ADD      r11,r11,r0,ASR #1
000998  48bc              LDR      r0,|L1.3212|
00099a  8800              LDRH     r0,[r0,#0]  ; CANAF_std_cnt
00099c  1c40              ADDS     r0,r0,#1
00099e  eb0b0060          ADD      r0,r11,r0,ASR #1
0009a2  f8dfb2e4          LDR      r11,|L1.3208|
0009a6  f8bbb000          LDRH     r11,[r11,#0]  ; CANAF_gstd_cnt
0009aa  4458              ADD      r0,r0,r11
0009ac  f8dfb2e8          LDR      r11,|L1.3224|
0009b0  f8bbb000          LDRH     r11,[r11,#0]  ; CANAF_ext_cnt
0009b4  4458              ADD      r0,r0,r11
0009b6  f8dfb2f0          LDR      r11,|L1.3240|
0009ba  f8bbb000          LDRH     r11,[r11,#0]  ; CANAF_gext_cnt
0009be  eb00004b          ADD      r0,r0,r11,LSL #1
0009c2  b206              SXTH     r6,r0
;;;573    			CANAF_gstd_cnt + CANAF_ext_cnt + (CANAF_gext_cnt<<1);
;;;574    	//don't have enough space for this fullCAN Entry and its Object(3*32 bytes)
;;;575    	if ((total >=508)||(CANAF_FullCAN_cnt>=64)){
0009c4  f5b67ffe          CMP      r6,#0x1fc
0009c8  da03              BGE      |L1.2514|
0009ca  48b1              LDR      r0,|L1.3216|
0009cc  8800              LDRH     r0,[r0,#0]  ; CANAF_FullCAN_cnt
0009ce  2840              CMP      r0,#0x40
0009d0  db02              BLT      |L1.2520|
                  |L1.2514|
;;;576    		return CAN_OBJECTS_FULL_ERROR;
0009d2  2002              MOVS     r0,#2
                  |L1.2516|
;;;577    	}
;;;578    	/* Setup Acceptance Filter Configuration
;;;579        Acceptance Filter Mode Register = Off */
;;;580    	LPC_CANAF->AFMR = 0x00000001;
;;;581    
;;;582    	/* Add mask for standard identifiers   */
;;;583    	id &= 0x07FF;
;;;584    	id |= (ctrl0 << 13) | (1 << 11); /* Add controller number */
;;;585    //	total = ((CANAF_std_cnt + 1) >> 1)+ CANAF_gstd_cnt + CANAF_ext_cnt + (CANAF_gext_cnt<<1);
;;;586    	/* Move all remaining sections one place up
;;;587    	if new entry will increase FullCAN list */
;;;588    	if (((CANAF_FullCAN_cnt & 0x0001) == 0)&&(total!=0))
;;;589    	{
;;;590    		//then remove remaining section
;;;591    		cnt1   = (CANAF_FullCAN_cnt >> 1);
;;;592    		bound1 = total;
;;;593    		buf0   = LPC_CANAF_RAM->mask[cnt1];
;;;594    
;;;595    		while (bound1--)
;;;596    		{
;;;597    			cnt1++;
;;;598    			buf1 = LPC_CANAF_RAM->mask[cnt1];
;;;599    			LPC_CANAF_RAM->mask[cnt1] = buf0;
;;;600    			buf0 = buf1;
;;;601    		}
;;;602    	}
;;;603    	if (CANAF_FullCAN_cnt == 0)
;;;604    	{
;;;605    		/* For entering first ID */
;;;606    		LPC_CANAF_RAM->mask[0] = 0x0000FFFF | (id << 16);
;;;607    	}
;;;608    	else if (CANAF_FullCAN_cnt == 1)
;;;609    	{
;;;610    		/* For entering second ID */
;;;611    		if (((LPC_CANAF_RAM->mask[0] >> 16)& 0xE7FF) > id)
;;;612    		{
;;;613    			LPC_CANAF_RAM->mask[0] = (LPC_CANAF_RAM->mask[0] >> 16) | (id << 16);
;;;614    		}
;;;615    		else
;;;616    		{
;;;617    			LPC_CANAF_RAM->mask[0] = (LPC_CANAF_RAM->mask[0] & 0xFFFF0000) | id;
;;;618    		}
;;;619    	}
;;;620    	else
;;;621    	{
;;;622    		/* Find where to insert new ID */
;;;623    		cnt1 = 0;
;;;624    		cnt2 = CANAF_FullCAN_cnt;
;;;625    		bound1 = (CANAF_FullCAN_cnt - 1) >> 1;
;;;626    		while (cnt1 <= bound1)
;;;627    		{
;;;628    			/* Loop through standard existing IDs */
;;;629    			if (((LPC_CANAF_RAM->mask[cnt1] >> 16) & 0xE7FF) > (id & 0xE7FF))
;;;630    			{
;;;631    				cnt2 = cnt1 * 2;
;;;632    				break;
;;;633    			}
;;;634    
;;;635    			if ((LPC_CANAF_RAM->mask[cnt1] & 0x0000E7FF) > (id & 0xE7FF))
;;;636    			{
;;;637    				cnt2 = cnt1 * 2 + 1;
;;;638    				break;
;;;639    			}
;;;640    
;;;641    			cnt1++;
;;;642    		}
;;;643    		/* cnt1 = U32 where to insert new ID */
;;;644    		/* cnt2 = U16 where to insert new ID */
;;;645    
;;;646    		if (cnt1 > bound1)
;;;647    		{
;;;648    			/* Adding ID as last entry */
;;;649    			/* Even number of IDs exists */
;;;650    			if ((CANAF_FullCAN_cnt & 0x0001) == 0)
;;;651    			{
;;;652    				LPC_CANAF_RAM->mask[cnt1]  = 0x0000FFFF | (id << 16);
;;;653    			}
;;;654    			/* Odd  number of IDs exists */
;;;655    			else
;;;656    			{
;;;657    				LPC_CANAF_RAM->mask[cnt1]  = (LPC_CANAF_RAM->mask[cnt1] & 0xFFFF0000) | id;
;;;658    			}
;;;659    		}
;;;660    		else
;;;661    		{
;;;662    			buf0 = LPC_CANAF_RAM->mask[cnt1]; /* Remember current entry */
;;;663    			if ((cnt2 & 0x0001) == 0)
;;;664    			{
;;;665    				/* Insert new mask to even address*/
;;;666    				buf1 = (id << 16) | (buf0 >> 16);
;;;667    			}
;;;668    			else
;;;669    			{
;;;670    				/* Insert new mask to odd  address */
;;;671    				buf1 = (buf0 & 0xFFFF0000) | id;
;;;672    			}
;;;673    			LPC_CANAF_RAM->mask[cnt1] = buf1;/* Insert mask */
;;;674    			bound1 = CANAF_FullCAN_cnt >> 1;
;;;675    			/* Move all remaining standard mask entries one place up */
;;;676    			while (cnt1 < bound1)
;;;677    			{
;;;678    				cnt1++;
;;;679    				buf1  = LPC_CANAF_RAM->mask[cnt1];
;;;680    				LPC_CANAF_RAM->mask[cnt1] = (buf1 >> 16) | (buf0 << 16);
;;;681    				buf0  = buf1;
;;;682    			}
;;;683    
;;;684    			if ((CANAF_FullCAN_cnt & 0x0001) == 0)
;;;685    			{
;;;686    				/* Even number of IDs exists */
;;;687    				LPC_CANAF_RAM->mask[cnt1] = (LPC_CANAF_RAM->mask[cnt1] & 0xFFFF0000)
;;;688    											| (0x0000FFFF);
;;;689    			}
;;;690    		}
;;;691    	}
;;;692    	//restruct FulCAN Object Section
;;;693    	bound1 = CANAF_FullCAN_cnt - cnt2;
;;;694    	cnt1 = total - (CANAF_FullCAN_cnt)*3 + cnt2*3 + 1;
;;;695    	buf0 = LPC_CANAF_RAM->mask[cnt1];
;;;696    	buf1 = LPC_CANAF_RAM->mask[cnt1+1];
;;;697    	buf2 = LPC_CANAF_RAM->mask[cnt1+2];
;;;698    	LPC_CANAF_RAM->mask[cnt1]=LPC_CANAF_RAM->mask[cnt1+1]= LPC_CANAF_RAM->mask[cnt1+2]=0x00;
;;;699    	cnt1+=3;
;;;700    	while(bound1--)
;;;701    	{
;;;702    		tmp0 = LPC_CANAF_RAM->mask[cnt1];
;;;703    		tmp1 = LPC_CANAF_RAM->mask[cnt1+1];
;;;704    		tmp2 = LPC_CANAF_RAM->mask[cnt1+2];
;;;705    		LPC_CANAF_RAM->mask[cnt1]= buf0;
;;;706    		LPC_CANAF_RAM->mask[cnt1+1]= buf1;
;;;707    		LPC_CANAF_RAM->mask[cnt1+2]= buf2;
;;;708    		buf0 = tmp0;
;;;709    		buf1 = tmp1;
;;;710    		buf2 = tmp2;
;;;711    		cnt1+=3;
;;;712    	}
;;;713    	CANAF_FullCAN_cnt++;
;;;714    	//update address values
;;;715    	LPC_CANAF->SFF_sa 	  +=0x04;
;;;716    	LPC_CANAF->SFF_GRP_sa +=0x04 ;
;;;717    	LPC_CANAF->EFF_sa     +=0x04 ;
;;;718    	LPC_CANAF->EFF_GRP_sa +=0x04;
;;;719    	LPC_CANAF->ENDofTable +=0x04;
;;;720    
;;;721    	LPC_CANAF->AFMR = 0x04;
;;;722     	return CAN_OK;
;;;723    }
0009d4  e8bd8ffc          POP      {r2-r11,pc}
                  |L1.2520|
0009d8  2001              MOVS     r0,#1                 ;580
0009da  f8dfb2c0          LDR      r11,|L1.3228|
0009de  f8cb0000          STR      r0,[r11,#0]           ;580
0009e2  f3c2020a          UBFX     r2,r2,#0,#11          ;583
0009e6  02c0              LSLS     r0,r0,#11             ;584
0009e8  ea403048          ORR      r0,r0,r8,LSL #13      ;584
0009ec  4310              ORRS     r0,r0,r2              ;584
0009ee  b282              UXTH     r2,r0                 ;584
0009f0  48a7              LDR      r0,|L1.3216|
0009f2  7800              LDRB     r0,[r0,#0]            ;588  ; CANAF_FullCAN_cnt
0009f4  f0000001          AND      r0,r0,#1              ;588
0009f8  b9c0              CBNZ     r0,|L1.2604|
0009fa  b1be              CBZ      r6,|L1.2604|
0009fc  48a4              LDR      r0,|L1.3216|
0009fe  8800              LDRH     r0,[r0,#0]            ;591  ; CANAF_FullCAN_cnt
000a00  1041              ASRS     r1,r0,#1              ;591
000a02  4635              MOV      r5,r6                 ;592
000a04  f8dfb28c          LDR      r11,|L1.3220|
000a08  f85b3021          LDR      r3,[r11,r1,LSL #2]    ;593
000a0c  e008              B        |L1.2592|
                  |L1.2574|
000a0e  1c48              ADDS     r0,r1,#1              ;597
000a10  b201              SXTH     r1,r0                 ;597
000a12  f8dfb280          LDR      r11,|L1.3220|
000a16  f85b4021          LDR      r4,[r11,r1,LSL #2]    ;598
000a1a  f84b3021          STR      r3,[r11,r1,LSL #2]    ;599
000a1e  4623              MOV      r3,r4                 ;600
                  |L1.2592|
000a20  1e28              SUBS     r0,r5,#0              ;595
000a22  f1a50b01          SUB      r11,r5,#1             ;595
000a26  fa0ff58b          SXTH     r5,r11                ;595
000a2a  d1f0              BNE      |L1.2574|
                  |L1.2604|
000a2c  4898              LDR      r0,|L1.3216|
000a2e  8800              LDRH     r0,[r0,#0]            ;603  ; CANAF_FullCAN_cnt
000a30  b940              CBNZ     r0,|L1.2628|
000a32  f64f70ff          MOV      r0,#0xffff            ;606
000a36  ea404002          ORR      r0,r0,r2,LSL #16      ;606
000a3a  f8dfb258          LDR      r11,|L1.3220|
000a3e  f8cb0000          STR      r0,[r11,#0]           ;606
000a42  e0a5              B        |L1.2960|
                  |L1.2628|
000a44  4892              LDR      r0,|L1.3216|
000a46  8800              LDRH     r0,[r0,#0]            ;608  ; CANAF_FullCAN_cnt
000a48  2801              CMP      r0,#1                 ;608
000a4a  d11b              BNE      |L1.2692|
000a4c  4891              LDR      r0,|L1.3220|
000a4e  6800              LDR      r0,[r0,#0]            ;611
000a50  f24e7bff          MOV      r11,#0xe7ff           ;611
000a54  ea0b4010          AND      r0,r11,r0,LSR #16     ;611
000a58  4290              CMP      r0,r2                 ;611
000a5a  d909              BLS      |L1.2672|
000a5c  488d              LDR      r0,|L1.3220|
000a5e  6800              LDR      r0,[r0,#0]            ;613
000a60  0c00              LSRS     r0,r0,#16             ;613
000a62  ea404002          ORR      r0,r0,r2,LSL #16      ;613
000a66  f8dfb22c          LDR      r11,|L1.3220|
000a6a  f8cb0000          STR      r0,[r11,#0]           ;613
000a6e  e08f              B        |L1.2960|
                  |L1.2672|
000a70  4888              LDR      r0,|L1.3220|
000a72  6800              LDR      r0,[r0,#0]            ;617
000a74  f36f000f          BFC      r0,#0,#16             ;617
000a78  4310              ORRS     r0,r0,r2              ;617
000a7a  f8dfb218          LDR      r11,|L1.3220|
000a7e  f8cb0000          STR      r0,[r11,#0]           ;617
000a82  e085              B        |L1.2960|
                  |L1.2692|
000a84  2100              MOVS     r1,#0                 ;623
000a86  4882              LDR      r0,|L1.3216|
000a88  8800              LDRH     r0,[r0,#0]            ;624  ; CANAF_FullCAN_cnt
000a8a  fa0ffc80          SXTH     r12,r0                ;624
000a8e  4880              LDR      r0,|L1.3216|
000a90  8800              LDRH     r0,[r0,#0]            ;625  ; CANAF_FullCAN_cnt
000a92  1e40              SUBS     r0,r0,#1              ;625
000a94  1040              ASRS     r0,r0,#1              ;625
000a96  b205              SXTH     r5,r0                 ;625
000a98  e024              B        |L1.2788|
                  |L1.2714|
000a9a  f8dfb1f8          LDR      r11,|L1.3220|
000a9e  f85b0021          LDR      r0,[r11,r1,LSL #2]    ;629
000aa2  f24e7bff          MOV      r11,#0xe7ff           ;629
000aa6  ea0b4b10          AND      r11,r11,r0,LSR #16    ;629
000aaa  f24e70ff          MOV      r0,#0xe7ff            ;629
000aae  4010              ANDS     r0,r0,r2              ;629
000ab0  4583              CMP      r11,r0                ;629
000ab2  d903              BLS      |L1.2748|
000ab4  0048              LSLS     r0,r1,#1              ;631
000ab6  fa0ffc80          SXTH     r12,r0                ;631
000aba  e015              B        |L1.2792|
                  |L1.2748|
000abc  f8dfb1d4          LDR      r11,|L1.3220|
000ac0  f85b0021          LDR      r0,[r11,r1,LSL #2]    ;635
000ac4  f24e7bff          MOV      r11,#0xe7ff           ;635
000ac8  ea00000b          AND      r0,r0,r11             ;635
000acc  ea020b0b          AND      r11,r2,r11            ;635
000ad0  4558              CMP      r0,r11                ;635
000ad2  d905              BLS      |L1.2784|
000ad4  2001              MOVS     r0,#1                 ;637
000ad6  eb000041          ADD      r0,r0,r1,LSL #1       ;637
000ada  fa0ffc80          SXTH     r12,r0                ;637
000ade  e003              B        |L1.2792|
                  |L1.2784|
000ae0  1c48              ADDS     r0,r1,#1              ;641
000ae2  b201              SXTH     r1,r0                 ;641
                  |L1.2788|
000ae4  42a9              CMP      r1,r5                 ;626
000ae6  ddd8              BLE      |L1.2714|
                  |L1.2792|
000ae8  bf00              NOP                            ;632
000aea  42a9              CMP      r1,r5                 ;646
000aec  dd18              BLE      |L1.2848|
000aee  4868              LDR      r0,|L1.3216|
000af0  7800              LDRB     r0,[r0,#0]            ;650  ; CANAF_FullCAN_cnt
000af2  f0000001          AND      r0,r0,#1              ;650
000af6  b940              CBNZ     r0,|L1.2826|
000af8  f64f70ff          MOV      r0,#0xffff            ;652
000afc  ea404002          ORR      r0,r0,r2,LSL #16      ;652
000b00  f8dfe190          LDR      lr,|L1.3220|
000b04  f84e0021          STR      r0,[lr,r1,LSL #2]     ;652
000b08  e042              B        |L1.2960|
                  |L1.2826|
000b0a  f8dfb188          LDR      r11,|L1.3220|
000b0e  f85b0021          LDR      r0,[r11,r1,LSL #2]    ;657
000b12  f36f000f          BFC      r0,#0,#16             ;657
000b16  4310              ORRS     r0,r0,r2              ;657
000b18  46de              MOV      lr,r11                ;657
000b1a  f84e0021          STR      r0,[lr,r1,LSL #2]     ;657
000b1e  e037              B        |L1.2960|
                  |L1.2848|
000b20  f8dfb170          LDR      r11,|L1.3220|
000b24  f85b3021          LDR      r3,[r11,r1,LSL #2]    ;662
000b28  f00c0001          AND      r0,r12,#1             ;663
000b2c  b918              CBNZ     r0,|L1.2870|
000b2e  0410              LSLS     r0,r2,#16             ;666
000b30  ea404413          ORR      r4,r0,r3,LSR #16      ;666
000b34  e003              B        |L1.2878|
                  |L1.2870|
000b36  0c18              LSRS     r0,r3,#16             ;671
000b38  0400              LSLS     r0,r0,#16             ;671
000b3a  ea400402          ORR      r4,r0,r2              ;671
                  |L1.2878|
000b3e  f8dfb154          LDR      r11,|L1.3220|
000b42  f84b4021          STR      r4,[r11,r1,LSL #2]    ;673
000b46  4852              LDR      r0,|L1.3216|
000b48  8800              LDRH     r0,[r0,#0]            ;674  ; CANAF_FullCAN_cnt
000b4a  1045              ASRS     r5,r0,#1              ;674
000b4c  e00c              B        |L1.2920|
                  |L1.2894|
000b4e  1c48              ADDS     r0,r1,#1              ;678
000b50  b201              SXTH     r1,r0                 ;678
000b52  f8dfb140          LDR      r11,|L1.3220|
000b56  f85b4021          LDR      r4,[r11,r1,LSL #2]    ;679
000b5a  0c20              LSRS     r0,r4,#16             ;680
000b5c  ea404003          ORR      r0,r0,r3,LSL #16      ;680
000b60  46de              MOV      lr,r11                ;680
000b62  f84e0021          STR      r0,[lr,r1,LSL #2]     ;680
000b66  4623              MOV      r3,r4                 ;681
                  |L1.2920|
000b68  42a9              CMP      r1,r5                 ;676
000b6a  dbf0              BLT      |L1.2894|
000b6c  4848              LDR      r0,|L1.3216|
000b6e  7800              LDRB     r0,[r0,#0]            ;684  ; CANAF_FullCAN_cnt
000b70  f0000001          AND      r0,r0,#1              ;684
000b74  b960              CBNZ     r0,|L1.2960|
000b76  f8dfb11c          LDR      r11,|L1.3220|
000b7a  f85b0021          LDR      r0,[r11,r1,LSL #2]    ;687
000b7e  f36f000f          BFC      r0,#0,#16             ;687
000b82  f64f7bff          MOV      r11,#0xffff           ;687
000b86  4458              ADD      r0,r0,r11             ;687
000b88  f8dfe108          LDR      lr,|L1.3220|
000b8c  f84e0021          STR      r0,[lr,r1,LSL #2]     ;687
                  |L1.2960|
000b90  483f              LDR      r0,|L1.3216|
000b92  8800              LDRH     r0,[r0,#0]            ;693  ; CANAF_FullCAN_cnt
000b94  eba0000c          SUB      r0,r0,r12             ;693
000b98  b205              SXTH     r5,r0                 ;693
000b9a  483d              LDR      r0,|L1.3216|
000b9c  8800              LDRH     r0,[r0,#0]            ;694  ; CANAF_FullCAN_cnt
000b9e  eb000040          ADD      r0,r0,r0,LSL #1       ;694
000ba2  1a30              SUBS     r0,r6,r0              ;694
000ba4  eb0c0b4c          ADD      r11,r12,r12,LSL #1    ;694
000ba8  4458              ADD      r0,r0,r11             ;694
000baa  1c40              ADDS     r0,r0,#1              ;694
000bac  b201              SXTH     r1,r0                 ;694
000bae  f8dfb0e4          LDR      r11,|L1.3220|
000bb2  f85b3021          LDR      r3,[r11,r1,LSL #2]    ;695
000bb6  1c48              ADDS     r0,r1,#1              ;696
000bb8  f85b4020          LDR      r4,[r11,r0,LSL #2]    ;696
000bbc  1c88              ADDS     r0,r1,#2              ;697
000bbe  f85b9020          LDR      r9,[r11,r0,LSL #2]    ;697
000bc2  2000              MOVS     r0,#0                 ;698
000bc4  f1010b02          ADD      r11,r1,#2             ;698
000bc8  f8dfe0c8          LDR      lr,|L1.3220|
000bcc  f84e002b          STR      r0,[lr,r11,LSL #2]    ;698
000bd0  f1010b01          ADD      r11,r1,#1             ;698
000bd4  f84e002b          STR      r0,[lr,r11,LSL #2]    ;698
000bd8  f84e0021          STR      r0,[lr,r1,LSL #2]     ;698
000bdc  1cc8              ADDS     r0,r1,#3              ;699
000bde  b201              SXTH     r1,r0                 ;699
000be0  e019              B        |L1.3094|
                  |L1.3042|
000be2  f8dfb0b0          LDR      r11,|L1.3220|
000be6  f85ba021          LDR      r10,[r11,r1,LSL #2]   ;702
000bea  1c48              ADDS     r0,r1,#1              ;703
000bec  f85b0020          LDR      r0,[r11,r0,LSL #2]    ;703
000bf0  9001              STR      r0,[sp,#4]            ;703
000bf2  1c88              ADDS     r0,r1,#2              ;704
000bf4  f85b0020          LDR      r0,[r11,r0,LSL #2]    ;704
000bf8  9000              STR      r0,[sp,#0]            ;704
000bfa  f84b3021          STR      r3,[r11,r1,LSL #2]    ;705
000bfe  1c48              ADDS     r0,r1,#1              ;706
000c00  f84b4020          STR      r4,[r11,r0,LSL #2]    ;706
000c04  1c88              ADDS     r0,r1,#2              ;707
000c06  f84b9020          STR      r9,[r11,r0,LSL #2]    ;707
000c0a  4653              MOV      r3,r10                ;708
000c0c  9c01              LDR      r4,[sp,#4]            ;709
000c0e  f8dd9000          LDR      r9,[sp,#0]            ;710
000c12  1cc8              ADDS     r0,r1,#3              ;711
000c14  b201              SXTH     r1,r0                 ;711
                  |L1.3094|
000c16  1e28              SUBS     r0,r5,#0              ;700
000c18  f1a50b01          SUB      r11,r5,#1             ;700
000c1c  fa0ff58b          SXTH     r5,r11                ;700
000c20  d1df              BNE      |L1.3042|
000c22  481b              LDR      r0,|L1.3216|
000c24  8800              LDRH     r0,[r0,#0]            ;713  ; CANAF_FullCAN_cnt
000c26  1c40              ADDS     r0,r0,#1              ;713
000c28  f8dfb064          LDR      r11,|L1.3216|
000c2c  f8ab0000          STRH     r0,[r11,#0]           ;713
000c30  481a              LDR      r0,|L1.3228|
000c32  6840              LDR      r0,[r0,#4]            ;715
000c34  1d00              ADDS     r0,r0,#4              ;715
000c36  f8dfb064          LDR      r11,|L1.3228|
000c3a  f8cb0004          STR      r0,[r11,#4]           ;715
000c3e  4658              MOV      r0,r11                ;716
000c40  6880              LDR      r0,[r0,#8]            ;716
000c42  1d00              ADDS     r0,r0,#4              ;716
000c44  f8cb0008          STR      r0,[r11,#8]           ;716
000c48  4658              MOV      r0,r11                ;717
000c4a  68c0              LDR      r0,[r0,#0xc]          ;717
000c4c  1d00              ADDS     r0,r0,#4              ;717
000c4e  f8cb000c          STR      r0,[r11,#0xc]         ;717
000c52  4658              MOV      r0,r11                ;718
000c54  6900              LDR      r0,[r0,#0x10]         ;718
000c56  1d00              ADDS     r0,r0,#4              ;718
000c58  f8cb0010          STR      r0,[r11,#0x10]        ;718
000c5c  4658              MOV      r0,r11                ;719
000c5e  6940              LDR      r0,[r0,#0x14]         ;719
000c60  1d00              ADDS     r0,r0,#4              ;719
000c62  f8cb0014          STR      r0,[r11,#0x14]        ;719
000c66  2004              MOVS     r0,#4                 ;721
000c68  f8cb0000          STR      r0,[r11,#0]           ;721
000c6c  2001              MOVS     r0,#1                 ;722
000c6e  e6b1              B        |L1.2516|
;;;724    CAN_ERROR CAN_LoadGroupEntry(LPC_CAN_TypeDef* CANx, uint32_t lowerID, \
                          ENDP

                  CAN_LoadGroupEntry PROC
000c70  e92d4fff          PUSH     {r0-r11,lr}
;;;725    		uint32_t upperID, CAN_ID_FORMAT_Type format)
;;;726    {
000c74  460c              MOV      r4,r1
000c76  4615              MOV      r5,r2
;;;727    	uint16_t tmp = 0;
000c78  f04f0c00          MOV      r12,#0
;;;728    	uint32_t buf0, buf1, entry1, entry2, LID,UID;
;;;729    	int16_t cnt1, bound1, total;
;;;730    	//LPC_CANAF_RAM_TypeDef *AFLUTTest = LPC_CANAF_RAM;
;;;731    
;;;732    	if(lowerID > upperID) return CAN_CONFLICT_ID_ERROR;
000c7c  42ac              CMP      r4,r5
000c7e  d915              BLS      |L1.3244|
000c80  2006              MOVS     r0,#6
                  |L1.3202|
;;;733    	if(CANx == LPC_CAN1)
;;;734    	{
;;;735    		tmp = 0;
;;;736    	}
;;;737    	else
;;;738    	{
;;;739    		tmp = 1;
;;;740    	}
;;;741    
;;;742    	total =((CANAF_FullCAN_cnt+1)>>1)+ CANAF_FullCAN_cnt*3 +((CANAF_std_cnt + 1) >> 1)+  \
;;;743    			CANAF_gstd_cnt + CANAF_ext_cnt + (CANAF_gext_cnt<<1);
;;;744    
;;;745    	/* Setup Acceptance Filter Configuration
;;;746    	Acceptance Filter Mode Register = Off */
;;;747    	LPC_CANAF->AFMR = 0x00000001;
;;;748    
;;;749    /*********Add Group of Standard Identifier Frame Format************/
;;;750    	if(format == STD_ID_FORMAT)
;;;751    	{
;;;752    		if ((total >= 512)){//don't have enough space
;;;753    			return CAN_OBJECTS_FULL_ERROR;
;;;754    		}
;;;755    		lowerID &=0x7FF; //mask ID
;;;756    		upperID &=0x7FF;
;;;757    		entry1  = (tmp << 29)|(lowerID << 16)|(tmp << 13)|(upperID << 0);
;;;758    		cnt1 = ((CANAF_FullCAN_cnt+1)>>1) + ((CANAF_std_cnt + 1) >> 1);
;;;759    
;;;760    		//if this is the first Group standard ID entry
;;;761    		if(CANAF_gstd_cnt == 0)
;;;762    		{
;;;763    			LPC_CANAF_RAM->mask[cnt1] = entry1;
;;;764    		}
;;;765    		else
;;;766    		{
;;;767    			//find the position to add new Group entry
;;;768    			bound1 = ((CANAF_FullCAN_cnt+1)>>1) + ((CANAF_std_cnt + 1) >> 1) + CANAF_gstd_cnt;
;;;769    			while(cnt1 < bound1)
;;;770    			{
;;;771    				//compare controller first
;;;772    				while((LPC_CANAF_RAM->mask[cnt1] >> 29)< (entry1 >> 29))//increase until meet greater or equal controller
;;;773    					cnt1++;
;;;774    				buf0 = LPC_CANAF_RAM->mask[cnt1];
;;;775    				if((LPC_CANAF_RAM->mask[cnt1] >> 29)> (entry1 >> 29)) //meet greater controller
;;;776    				{
;;;777    					//add at this position
;;;778    					LPC_CANAF_RAM->mask[cnt1] = entry1;
;;;779    					break;
;;;780    				}
;;;781    				else //meet equal controller
;;;782    				{
;;;783    					LID  = (buf0 >> 16)&0x7FF;
;;;784    					UID  = buf0 & 0x7FF;
;;;785    					if (upperID <= LID)
;;;786    					{
;;;787    					//add new entry before this entry
;;;788    					LPC_CANAF_RAM->mask[cnt1] = entry1;
;;;789    					break;
;;;790    				}
;;;791    				else if (lowerID >= UID)
;;;792    				{
;;;793    					//load next entry to compare
;;;794    					cnt1 ++;
;;;795    				}
;;;796    				else
;;;797    						return CAN_CONFLICT_ID_ERROR;
;;;798    				}
;;;799    			}
;;;800    			if(cnt1 >= bound1)
;;;801    			{
;;;802    				//add new entry at the last position in this list
;;;803    				buf0 = LPC_CANAF_RAM->mask[cnt1];
;;;804    				LPC_CANAF_RAM->mask[cnt1] = entry1;
;;;805    			}
;;;806    
;;;807    			//remove all remaining entry of this section one place up
;;;808    			bound1 = total - cnt1;
;;;809    			while(bound1--)
;;;810    			{
;;;811    				cnt1++;
;;;812    				buf1 = LPC_CANAF_RAM->mask[cnt1];
;;;813    				LPC_CANAF_RAM->mask[cnt1] = buf0;
;;;814    				buf0 = buf1;
;;;815    			}
;;;816    		}
;;;817    		CANAF_gstd_cnt++;
;;;818    		//update address values
;;;819    		LPC_CANAF->EFF_sa     +=0x04 ;
;;;820    		LPC_CANAF->EFF_GRP_sa +=0x04;
;;;821    		LPC_CANAF->ENDofTable +=0x04;
;;;822    	}
;;;823    
;;;824    
;;;825    /*********Add Group of Extended Identifier Frame Format************/
;;;826    	else
;;;827    	{
;;;828    		if ((total >= 511)){//don't have enough space
;;;829    			return CAN_OBJECTS_FULL_ERROR;
;;;830    		}
;;;831    		lowerID  &= 0x1FFFFFFF; //mask ID
;;;832    		upperID &= 0x1FFFFFFF;
;;;833    		entry1   = (tmp << 29)|(lowerID << 0);
;;;834    		entry2   = (tmp << 29)|(upperID << 0);
;;;835    
;;;836    		cnt1 = ((CANAF_FullCAN_cnt+1)>>1) + ((CANAF_std_cnt + 1) >> 1) + CANAF_gstd_cnt + CANAF_ext_cnt;
;;;837    		//if this is the first Group standard ID entry
;;;838    		if(CANAF_gext_cnt == 0)
;;;839    		{
;;;840    			LPC_CANAF_RAM->mask[cnt1] = entry1;
;;;841    			LPC_CANAF_RAM->mask[cnt1+1] = entry2;
;;;842    		}
;;;843    		else
;;;844    		{
;;;845    			//find the position to add new Group entry
;;;846    			bound1 = ((CANAF_FullCAN_cnt+1)>>1) + ((CANAF_std_cnt + 1) >> 1) + CANAF_gstd_cnt \
;;;847    						+ CANAF_ext_cnt + (CANAF_gext_cnt<<1);
;;;848    			while(cnt1 < bound1)
;;;849    			{
;;;850    				while((LPC_CANAF_RAM->mask[cnt1] >>29)< tmp) //increase until meet greater or equal controller
;;;851    					cnt1++;
;;;852    				buf0 = LPC_CANAF_RAM->mask[cnt1];
;;;853    				buf1 = LPC_CANAF_RAM->mask[cnt1+1];
;;;854    				if((LPC_CANAF_RAM->mask[cnt1] >> 29)> (entry1 >> 29)) //meet greater controller
;;;855    				{
;;;856    					//add at this position
;;;857    					LPC_CANAF_RAM->mask[cnt1] = entry1;
;;;858    					LPC_CANAF_RAM->mask[++cnt1] = entry2;
;;;859    					break;
;;;860    				}
;;;861    				else //meet equal controller
;;;862    				{
;;;863    					LID  = buf0 & 0x1FFFFFFF; //mask ID
;;;864    					UID  = buf1 & 0x1FFFFFFF;
;;;865    					if (upperID <= LID)
;;;866    					{
;;;867    						//add new entry before this entry
;;;868    						LPC_CANAF_RAM->mask[cnt1] = entry1;
;;;869    						LPC_CANAF_RAM->mask[++cnt1] = entry2;
;;;870    						break;
;;;871    					}
;;;872    					else if (lowerID >= UID)
;;;873    					{
;;;874    						//load next entry to compare
;;;875    						cnt1 +=2;
;;;876    					}
;;;877    					else
;;;878    						return CAN_CONFLICT_ID_ERROR;
;;;879    				}
;;;880    			}
;;;881    			if(cnt1 >= bound1)
;;;882    			{
;;;883    				//add new entry at the last position in this list
;;;884    				buf0 = LPC_CANAF_RAM->mask[cnt1];
;;;885    				buf1 = LPC_CANAF_RAM->mask[cnt1+1];
;;;886    				LPC_CANAF_RAM->mask[cnt1]   = entry1;
;;;887    				LPC_CANAF_RAM->mask[++cnt1] = entry2;
;;;888    			}
;;;889    			//remove all remaining entry of this section two place up
;;;890    			bound1 = total - cnt1 + 1;
;;;891    			cnt1++;
;;;892    			while(bound1>0)
;;;893    			{
;;;894    				entry1 = LPC_CANAF_RAM->mask[cnt1];
;;;895    				entry2 = LPC_CANAF_RAM->mask[cnt1+1];
;;;896    				LPC_CANAF_RAM->mask[cnt1]   = buf0;
;;;897    				LPC_CANAF_RAM->mask[cnt1+1] = buf1;
;;;898    				buf0 = entry1;
;;;899    				buf1 = entry2;
;;;900    				cnt1   +=2;
;;;901    				bound1 -=2;
;;;902    			}
;;;903    		}
;;;904    		CANAF_gext_cnt++;
;;;905    		//update address values
;;;906    		LPC_CANAF->ENDofTable +=0x08;
;;;907    	}
;;;908    
;;;909    	if(CANAF_FullCAN_cnt == 0) //not use FullCAN mode
;;;910     	{
;;;911     		LPC_CANAF->AFMR = 0x00;//not use FullCAN mode
;;;912     	}
;;;913     	else
;;;914     	{
;;;915     		LPC_CANAF->AFMR = 0x04;
;;;916     	}
;;;917     	return CAN_OK;
;;;918    }
000c82  b004              ADD      sp,sp,#0x10
000c84  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.3208|
                          DCD      CANAF_gstd_cnt
                  |L1.3212|
                          DCD      CANAF_std_cnt
                  |L1.3216|
                          DCD      CANAF_FullCAN_cnt
                  |L1.3220|
                          DCD      0x40038000
                  |L1.3224|
                          DCD      CANAF_ext_cnt
                  |L1.3228|
                          DCD      0x4003c000
                  |L1.3232|
                          DCD      0x40044000
                  |L1.3236|
                          DCD      0x40048000
                  |L1.3240|
                          DCD      CANAF_gext_cnt
                  |L1.3244|
000cac  f8dfe408          LDR      lr,|L1.4280|
000cb0  9800              LDR      r0,[sp,#0]            ;733
000cb2  4570              CMP      r0,lr                 ;733
000cb4  d102              BNE      |L1.3260|
000cb6  f04f0c00          MOV      r12,#0                ;735
000cba  e001              B        |L1.3264|
                  |L1.3260|
000cbc  f04f0c01          MOV      r12,#1                ;739
                  |L1.3264|
000cc0  48fe              LDR      r0,|L1.4284|
000cc2  8800              LDRH     r0,[r0,#0]            ;742  ; CANAF_FullCAN_cnt
000cc4  eb000e40          ADD      lr,r0,r0,LSL #1       ;742
000cc8  48fc              LDR      r0,|L1.4284|
000cca  8800              LDRH     r0,[r0,#0]            ;742  ; CANAF_FullCAN_cnt
000ccc  1c40              ADDS     r0,r0,#1              ;742
000cce  eb0e0e60          ADD      lr,lr,r0,ASR #1       ;742
000cd2  48fb              LDR      r0,|L1.4288|
000cd4  8800              LDRH     r0,[r0,#0]            ;742  ; CANAF_std_cnt
000cd6  1c40              ADDS     r0,r0,#1              ;742
000cd8  eb0e0060          ADD      r0,lr,r0,ASR #1       ;742
000cdc  f8dfe3e4          LDR      lr,|L1.4292|
000ce0  f8bee000          LDRH     lr,[lr,#0]            ;742  ; CANAF_gstd_cnt
000ce4  4470              ADD      r0,r0,lr              ;742
000ce6  f8dfe3e0          LDR      lr,|L1.4296|
000cea  f8bee000          LDRH     lr,[lr,#0]            ;742  ; CANAF_ext_cnt
000cee  4470              ADD      r0,r0,lr              ;742
000cf0  f8dfe3d8          LDR      lr,|L1.4300|
000cf4  f8bee000          LDRH     lr,[lr,#0]            ;742  ; CANAF_gext_cnt
000cf8  eb00004e          ADD      r0,r0,lr,LSL #1       ;742
000cfc  fa0ff980          SXTH     r9,r0                 ;742
000d00  2001              MOVS     r0,#1                 ;747
000d02  f8dfe3cc          LDR      lr,|L1.4304|
000d06  f8ce0000          STR      r0,[lr,#0]            ;747
000d0a  9803              LDR      r0,[sp,#0xc]          ;750
000d0c  2800              CMP      r0,#0                 ;750
000d0e  d17d              BNE      |L1.3596|
000d10  f5b97f00          CMP      r9,#0x200             ;752
000d14  db01              BLT      |L1.3354|
000d16  2002              MOVS     r0,#2                 ;753
000d18  e7b3              B        |L1.3202|
                  |L1.3354|
000d1a  f3c4040a          UBFX     r4,r4,#0,#11          ;755
000d1e  f3c5050a          UBFX     r5,r5,#0,#11          ;756
000d22  ea4f704c          LSL      r0,r12,#29            ;757
000d26  ea404004          ORR      r0,r0,r4,LSL #16      ;757
000d2a  ea40304c          ORR      r0,r0,r12,LSL #13     ;757
000d2e  ea400205          ORR      r2,r0,r5              ;757
000d32  48e2              LDR      r0,|L1.4284|
000d34  8800              LDRH     r0,[r0,#0]            ;758  ; CANAF_FullCAN_cnt
000d36  1c40              ADDS     r0,r0,#1              ;758
000d38  ea4f0e60          ASR      lr,r0,#1              ;758
000d3c  48e0              LDR      r0,|L1.4288|
000d3e  8800              LDRH     r0,[r0,#0]            ;758  ; CANAF_std_cnt
000d40  1c40              ADDS     r0,r0,#1              ;758
000d42  eb0e0060          ADD      r0,lr,r0,ASR #1       ;758
000d46  b201              SXTH     r1,r0                 ;758
000d48  48de              LDR      r0,|L1.4292|
000d4a  8800              LDRH     r0,[r0,#0]            ;761  ; CANAF_gstd_cnt
000d4c  b920              CBNZ     r0,|L1.3416|
000d4e  f8dfe384          LDR      lr,|L1.4308|
000d52  f84e2021          STR      r2,[lr,r1,LSL #2]     ;763
000d56  e056              B        |L1.3590|
                  |L1.3416|
000d58  48d8              LDR      r0,|L1.4284|
000d5a  8800              LDRH     r0,[r0,#0]            ;768  ; CANAF_FullCAN_cnt
000d5c  1c40              ADDS     r0,r0,#1              ;768
000d5e  ea4f0e60          ASR      lr,r0,#1              ;768
000d62  48d7              LDR      r0,|L1.4288|
000d64  8800              LDRH     r0,[r0,#0]            ;768  ; CANAF_std_cnt
000d66  1c40              ADDS     r0,r0,#1              ;768
000d68  eb0e0060          ADD      r0,lr,r0,ASR #1       ;768
000d6c  f8dfe354          LDR      lr,|L1.4292|
000d70  f8bee000          LDRH     lr,[lr,#0]            ;768  ; CANAF_gstd_cnt
000d74  4470              ADD      r0,r0,lr              ;768
000d76  b203              SXTH     r3,r0                 ;768
000d78  e027              B        |L1.3530|
                  |L1.3450|
000d7a  e001              B        |L1.3456|
                  |L1.3452|
000d7c  1c48              ADDS     r0,r1,#1              ;773
000d7e  b201              SXTH     r1,r0                 ;773
                  |L1.3456|
000d80  f8dfe350          LDR      lr,|L1.4308|
000d84  f85e0021          LDR      r0,[lr,r1,LSL #2]     ;772
000d88  0f40              LSRS     r0,r0,#29             ;772
000d8a  ebb07f52          CMP      r0,r2,LSR #29         ;772
000d8e  d3f5              BCC      |L1.3452|
000d90  f85e6021          LDR      r6,[lr,r1,LSL #2]     ;774
000d94  f85e0021          LDR      r0,[lr,r1,LSL #2]     ;775
000d98  0f40              LSRS     r0,r0,#29             ;775
000d9a  ebb07f52          CMP      r0,r2,LSR #29         ;775
000d9e  d902              BLS      |L1.3494|
000da0  f84e2021          STR      r2,[lr,r1,LSL #2]     ;778
000da4  e013              B        |L1.3534|
                  |L1.3494|
000da6  f3c64a0a          UBFX     r10,r6,#16,#11        ;783
000daa  f3c60b0a          UBFX     r11,r6,#0,#11         ;784
000dae  4555              CMP      r5,r10                ;785
000db0  d804              BHI      |L1.3516|
000db2  f8dfe320          LDR      lr,|L1.4308|
000db6  f84e2021          STR      r2,[lr,r1,LSL #2]     ;788
000dba  e008              B        |L1.3534|
                  |L1.3516|
000dbc  455c              CMP      r4,r11                ;791
000dbe  d302              BCC      |L1.3526|
000dc0  1c48              ADDS     r0,r1,#1              ;794
000dc2  b201              SXTH     r1,r0                 ;794
000dc4  e001              B        |L1.3530|
                  |L1.3526|
000dc6  2006              MOVS     r0,#6                 ;797
000dc8  e75b              B        |L1.3202|
                  |L1.3530|
000dca  4299              CMP      r1,r3                 ;769
000dcc  dbd5              BLT      |L1.3450|
                  |L1.3534|
000dce  bf00              NOP                            ;779
000dd0  4299              CMP      r1,r3                 ;800
000dd2  db05              BLT      |L1.3552|
000dd4  f8dfe2fc          LDR      lr,|L1.4308|
000dd8  f85e6021          LDR      r6,[lr,r1,LSL #2]     ;803
000ddc  f84e2021          STR      r2,[lr,r1,LSL #2]     ;804
                  |L1.3552|
000de0  eba90001          SUB      r0,r9,r1              ;808
000de4  b203              SXTH     r3,r0                 ;808
000de6  e008              B        |L1.3578|
                  |L1.3560|
000de8  1c48              ADDS     r0,r1,#1              ;811
000dea  b201              SXTH     r1,r0                 ;811
000dec  f8dfe2e4          LDR      lr,|L1.4308|
000df0  f85e8021          LDR      r8,[lr,r1,LSL #2]     ;812
000df4  f84e6021          STR      r6,[lr,r1,LSL #2]     ;813
000df8  4646              MOV      r6,r8                 ;814
                  |L1.3578|
000dfa  1e18              SUBS     r0,r3,#0              ;809
000dfc  f1a30e01          SUB      lr,r3,#1              ;809
000e00  fa0ff38e          SXTH     r3,lr                 ;809
000e04  d1f0              BNE      |L1.3560|
                  |L1.3590|
000e06  48af              LDR      r0,|L1.4292|
000e08  8800              LDRH     r0,[r0,#0]            ;817  ; CANAF_gstd_cnt
000e0a  e000              B        |L1.3598|
                  |L1.3596|
000e0c  e016              B        |L1.3644|
                  |L1.3598|
000e0e  1c40              ADDS     r0,r0,#1              ;817
000e10  f8dfe2b0          LDR      lr,|L1.4292|
000e14  f8ae0000          STRH     r0,[lr,#0]            ;817
000e18  48ad              LDR      r0,|L1.4304|
000e1a  68c0              LDR      r0,[r0,#0xc]          ;819
000e1c  1d00              ADDS     r0,r0,#4              ;819
000e1e  f8dfe2b0          LDR      lr,|L1.4304|
000e22  f8ce000c          STR      r0,[lr,#0xc]          ;819
000e26  4670              MOV      r0,lr                 ;820
000e28  6900              LDR      r0,[r0,#0x10]         ;820
000e2a  1d00              ADDS     r0,r0,#4              ;820
000e2c  f8ce0010          STR      r0,[lr,#0x10]         ;820
000e30  4670              MOV      r0,lr                 ;821
000e32  6940              LDR      r0,[r0,#0x14]         ;821
000e34  1d00              ADDS     r0,r0,#4              ;821
000e36  f8ce0014          STR      r0,[lr,#0x14]         ;821
000e3a  e0b6              B        |L1.4010|
                  |L1.3644|
000e3c  f5b97fff          CMP      r9,#0x1fe             ;828
000e40  dd01              BLE      |L1.3654|
000e42  2002              MOVS     r0,#2                 ;829
000e44  e71d              B        |L1.3202|
                  |L1.3654|
000e46  f0244460          BIC      r4,r4,#0xe0000000     ;831
000e4a  f0254560          BIC      r5,r5,#0xe0000000     ;832
000e4e  ea44724c          ORR      r2,r4,r12,LSL #29     ;833
000e52  ea45774c          ORR      r7,r5,r12,LSL #29     ;834
000e56  4899              LDR      r0,|L1.4284|
000e58  8800              LDRH     r0,[r0,#0]            ;836  ; CANAF_FullCAN_cnt
000e5a  1c40              ADDS     r0,r0,#1              ;836
000e5c  ea4f0e60          ASR      lr,r0,#1              ;836
000e60  4897              LDR      r0,|L1.4288|
000e62  8800              LDRH     r0,[r0,#0]            ;836  ; CANAF_std_cnt
000e64  1c40              ADDS     r0,r0,#1              ;836
000e66  eb0e0060          ADD      r0,lr,r0,ASR #1       ;836
000e6a  f8dfe258          LDR      lr,|L1.4292|
000e6e  f8bee000          LDRH     lr,[lr,#0]            ;836  ; CANAF_gstd_cnt
000e72  4470              ADD      r0,r0,lr              ;836
000e74  f8dfe250          LDR      lr,|L1.4296|
000e78  f8bee000          LDRH     lr,[lr,#0]            ;836  ; CANAF_ext_cnt
000e7c  4470              ADD      r0,r0,lr              ;836
000e7e  b201              SXTH     r1,r0                 ;836
000e80  4892              LDR      r0,|L1.4300|
000e82  8800              LDRH     r0,[r0,#0]            ;838  ; CANAF_gext_cnt
000e84  b938              CBNZ     r0,|L1.3734|
000e86  f8dfe24c          LDR      lr,|L1.4308|
000e8a  f84e2021          STR      r2,[lr,r1,LSL #2]     ;840
000e8e  1c48              ADDS     r0,r1,#1              ;841
000e90  f84e7020          STR      r7,[lr,r0,LSL #2]     ;841
000e94  e07b              B        |L1.3982|
                  |L1.3734|
000e96  4889              LDR      r0,|L1.4284|
000e98  8800              LDRH     r0,[r0,#0]            ;846  ; CANAF_FullCAN_cnt
000e9a  1c40              ADDS     r0,r0,#1              ;846
000e9c  ea4f0e60          ASR      lr,r0,#1              ;846
000ea0  4887              LDR      r0,|L1.4288|
000ea2  8800              LDRH     r0,[r0,#0]            ;846  ; CANAF_std_cnt
000ea4  1c40              ADDS     r0,r0,#1              ;846
000ea6  eb0e0060          ADD      r0,lr,r0,ASR #1       ;846
000eaa  f8dfe218          LDR      lr,|L1.4292|
000eae  f8bee000          LDRH     lr,[lr,#0]            ;846  ; CANAF_gstd_cnt
000eb2  4470              ADD      r0,r0,lr              ;846
000eb4  f8dfe210          LDR      lr,|L1.4296|
000eb8  f8bee000          LDRH     lr,[lr,#0]            ;846  ; CANAF_ext_cnt
000ebc  4470              ADD      r0,r0,lr              ;846
000ebe  f8dfe20c          LDR      lr,|L1.4300|
000ec2  f8bee000          LDRH     lr,[lr,#0]            ;846  ; CANAF_gext_cnt
000ec6  eb00004e          ADD      r0,r0,lr,LSL #1       ;846
000eca  b203              SXTH     r3,r0                 ;846
000ecc  e033              B        |L1.3894|
                  |L1.3790|
000ece  e001              B        |L1.3796|
                  |L1.3792|
000ed0  1c48              ADDS     r0,r1,#1              ;851
000ed2  b201              SXTH     r1,r0                 ;851
                  |L1.3796|
000ed4  f8dfe1fc          LDR      lr,|L1.4308|
000ed8  f85e0021          LDR      r0,[lr,r1,LSL #2]     ;850
000edc  ebbc7f50          CMP      r12,r0,LSR #29        ;850
000ee0  d8f6              BHI      |L1.3792|
000ee2  f85e6021          LDR      r6,[lr,r1,LSL #2]     ;852
000ee6  1c48              ADDS     r0,r1,#1              ;853
000ee8  f85e8020          LDR      r8,[lr,r0,LSL #2]     ;853
000eec  f85e0021          LDR      r0,[lr,r1,LSL #2]     ;854
000ef0  0f40              LSRS     r0,r0,#29             ;854
000ef2  ebb07f52          CMP      r0,r2,LSR #29         ;854
000ef6  d907              BLS      |L1.3848|
000ef8  f84e2021          STR      r2,[lr,r1,LSL #2]     ;857
000efc  1c48              ADDS     r0,r1,#1              ;858
000efe  b200              SXTH     r0,r0                 ;858
000f00  4601              MOV      r1,r0                 ;858
000f02  f84e7020          STR      r7,[lr,r0,LSL #2]     ;858
000f06  e018              B        |L1.3898|
                  |L1.3848|
000f08  f0264a60          BIC      r10,r6,#0xe0000000    ;863
000f0c  f0284b60          BIC      r11,r8,#0xe0000000    ;864
000f10  4555              CMP      r5,r10                ;865
000f12  d809              BHI      |L1.3880|
000f14  f8dfe1bc          LDR      lr,|L1.4308|
000f18  f84e2021          STR      r2,[lr,r1,LSL #2]     ;868
000f1c  1c48              ADDS     r0,r1,#1              ;869
000f1e  b200              SXTH     r0,r0                 ;869
000f20  4601              MOV      r1,r0                 ;869
000f22  f84e7020          STR      r7,[lr,r0,LSL #2]     ;869
000f26  e008              B        |L1.3898|
                  |L1.3880|
000f28  455c              CMP      r4,r11                ;872
000f2a  d302              BCC      |L1.3890|
000f2c  1c88              ADDS     r0,r1,#2              ;875
000f2e  b201              SXTH     r1,r0                 ;875
000f30  e001              B        |L1.3894|
                  |L1.3890|
000f32  2006              MOVS     r0,#6                 ;878
000f34  e6a5              B        |L1.3202|
                  |L1.3894|
000f36  4299              CMP      r1,r3                 ;848
000f38  dbc9              BLT      |L1.3790|
                  |L1.3898|
000f3a  bf00              NOP                            ;859
000f3c  4299              CMP      r1,r3                 ;881
000f3e  db0c              BLT      |L1.3930|
000f40  f8dfe190          LDR      lr,|L1.4308|
000f44  f85e6021          LDR      r6,[lr,r1,LSL #2]     ;884
000f48  1c48              ADDS     r0,r1,#1              ;885
000f4a  f85e8020          LDR      r8,[lr,r0,LSL #2]     ;885
000f4e  f84e2021          STR      r2,[lr,r1,LSL #2]     ;886
000f52  b200              SXTH     r0,r0                 ;887
000f54  4601              MOV      r1,r0                 ;887
000f56  f84e7020          STR      r7,[lr,r0,LSL #2]     ;887
                  |L1.3930|
000f5a  eba90001          SUB      r0,r9,r1              ;890
000f5e  1c40              ADDS     r0,r0,#1              ;890
000f60  b203              SXTH     r3,r0                 ;890
000f62  1c48              ADDS     r0,r1,#1              ;891
000f64  b201              SXTH     r1,r0                 ;891
000f66  e010              B        |L1.3978|
                  |L1.3944|
000f68  f8dfe168          LDR      lr,|L1.4308|
000f6c  f85e2021          LDR      r2,[lr,r1,LSL #2]     ;894
000f70  1c48              ADDS     r0,r1,#1              ;895
000f72  f85e7020          LDR      r7,[lr,r0,LSL #2]     ;895
000f76  f84e6021          STR      r6,[lr,r1,LSL #2]     ;896
000f7a  f84e8020          STR      r8,[lr,r0,LSL #2]     ;897
000f7e  4616              MOV      r6,r2                 ;898
000f80  46b8              MOV      r8,r7                 ;899
000f82  1c88              ADDS     r0,r1,#2              ;900
000f84  b201              SXTH     r1,r0                 ;900
000f86  1e98              SUBS     r0,r3,#2              ;901
000f88  b203              SXTH     r3,r0                 ;901
                  |L1.3978|
000f8a  2b00              CMP      r3,#0                 ;892
000f8c  dcec              BGT      |L1.3944|
                  |L1.3982|
000f8e  484f              LDR      r0,|L1.4300|
000f90  8800              LDRH     r0,[r0,#0]            ;904  ; CANAF_gext_cnt
000f92  1c40              ADDS     r0,r0,#1              ;904
000f94  f8dfe134          LDR      lr,|L1.4300|
000f98  f8ae0000          STRH     r0,[lr,#0]            ;904
000f9c  484c              LDR      r0,|L1.4304|
000f9e  6940              LDR      r0,[r0,#0x14]         ;906
000fa0  3008              ADDS     r0,r0,#8              ;906
000fa2  f8dfe12c          LDR      lr,|L1.4304|
000fa6  f8ce0014          STR      r0,[lr,#0x14]         ;906
                  |L1.4010|
000faa  4844              LDR      r0,|L1.4284|
000fac  8800              LDRH     r0,[r0,#0]            ;909  ; CANAF_FullCAN_cnt
000fae  b928              CBNZ     r0,|L1.4028|
000fb0  2000              MOVS     r0,#0                 ;911
000fb2  f8dfe11c          LDR      lr,|L1.4304|
000fb6  f8ce0000          STR      r0,[lr,#0]            ;911
000fba  e004              B        |L1.4038|
                  |L1.4028|
000fbc  2004              MOVS     r0,#4                 ;915
000fbe  f8dfe110          LDR      lr,|L1.4304|
000fc2  f8ce0000          STR      r0,[lr,#0]            ;915
                  |L1.4038|
000fc6  2001              MOVS     r0,#1                 ;917
000fc8  e65b              B        |L1.3202|
;;;919    CAN_ERROR CAN_RemoveEntry(AFLUT_ENTRY_Type EntryType, uint16_t position)
                          ENDP

                  CAN_RemoveEntry PROC
000fca  e92d41f0          PUSH     {r4-r8,lr}
;;;920    {
000fce  4607              MOV      r7,r0
000fd0  460a              MOV      r2,r1
;;;921    	uint16_t cnt, bound, total;
;;;922    	uint32_t buf0, buf1;
;;;923    
;;;924    	/* Setup Acceptance Filter Configuration
;;;925    	Acceptance Filter Mode Register = Off */
;;;926    	LPC_CANAF->AFMR = 0x00000001;
000fd2  2001              MOVS     r0,#1
000fd4  f8dfc0f8          LDR      r12,|L1.4304|
000fd8  f8cc0000          STR      r0,[r12,#0]
;;;927    	total = ((CANAF_FullCAN_cnt+1)>>1)+((CANAF_std_cnt + 1) >> 1) + \
000fdc  4837              LDR      r0,|L1.4284|
000fde  8800              LDRH     r0,[r0,#0]  ; CANAF_FullCAN_cnt
000fe0  1c40              ADDS     r0,r0,#1
000fe2  ea4f0c60          ASR      r12,r0,#1
000fe6  4836              LDR      r0,|L1.4288|
000fe8  8800              LDRH     r0,[r0,#0]  ; CANAF_std_cnt
000fea  1c40              ADDS     r0,r0,#1
000fec  eb0c0060          ADD      r0,r12,r0,ASR #1
000ff0  f8dfc0d0          LDR      r12,|L1.4292|
000ff4  f8bcc000          LDRH     r12,[r12,#0]  ; CANAF_gstd_cnt
000ff8  4460              ADD      r0,r0,r12
000ffa  f8dfc0cc          LDR      r12,|L1.4296|
000ffe  f8bcc000          LDRH     r12,[r12,#0]  ; CANAF_ext_cnt
001002  4460              ADD      r0,r0,r12
001004  f8dfc0c4          LDR      r12,|L1.4300|
001008  f8bcc000          LDRH     r12,[r12,#0]  ; CANAF_gext_cnt
00100c  eb00004c          ADD      r0,r0,r12,LSL #1
001010  b286              UXTH     r6,r0
;;;928    			CANAF_gstd_cnt + CANAF_ext_cnt + (CANAF_gext_cnt<<1);
;;;929    
;;;930    
;;;931    /************** Remove FullCAN Entry *************/
;;;932    	if(EntryType == FULLCAN_ENTRY)
001012  2f00              CMP      r7,#0
001014  d174              BNE      |L1.4352|
;;;933    	{
;;;934    		if((CANAF_FullCAN_cnt==0)||(position >= CANAF_FullCAN_cnt))
001016  4829              LDR      r0,|L1.4284|
001018  8800              LDRH     r0,[r0,#0]  ; CANAF_FullCAN_cnt
00101a  b118              CBZ      r0,|L1.4132|
00101c  4827              LDR      r0,|L1.4284|
00101e  8800              LDRH     r0,[r0,#0]  ; CANAF_FullCAN_cnt
001020  4282              CMP      r2,r0
001022  db02              BLT      |L1.4138|
                  |L1.4132|
;;;935    		{
;;;936    			return CAN_ENTRY_NOT_EXIT_ERROR;
001024  2007              MOVS     r0,#7
                  |L1.4134|
;;;937    		}
;;;938    		else
;;;939    		{
;;;940    			cnt = position >> 1;
;;;941    			buf0 = LPC_CANAF_RAM->mask[cnt];
;;;942    			bound = (CANAF_FullCAN_cnt - position -1)>>1;
;;;943    			if((position & 0x0001) == 0) //event position
;;;944    			{
;;;945    				while(bound--)
;;;946    				{
;;;947    					//remove all remaining FullCAN entry one place down
;;;948    					buf1  = LPC_CANAF_RAM->mask[cnt+1];
;;;949    					LPC_CANAF_RAM->mask[cnt] = (buf1 >> 16) | (buf0 << 16);
;;;950    					buf0  = buf1;
;;;951    					cnt++;
;;;952    				}
;;;953    			}
;;;954    			else //odd position
;;;955    			{
;;;956    				while(bound--)
;;;957    				{
;;;958    					//remove all remaining FullCAN entry one place down
;;;959    					buf1  = LPC_CANAF_RAM->mask[cnt+1];
;;;960    					LPC_CANAF_RAM->mask[cnt] = (buf0 & 0xFFFF0000)|(buf1 >> 16);
;;;961    					LPC_CANAF_RAM->mask[cnt+1] = LPC_CANAF_RAM->mask[cnt+1] << 16;
;;;962    					buf0  = buf1<<16;
;;;963    					cnt++;
;;;964    				}
;;;965    			}
;;;966    			if((CANAF_FullCAN_cnt & 0x0001) == 0)
;;;967    			{
;;;968    				if((position & 0x0001)==0)
;;;969    					LPC_CANAF_RAM->mask[cnt] = (buf0 << 16) | (0x0000FFFF);
;;;970    				else
;;;971    					LPC_CANAF_RAM->mask[cnt] = buf0 | 0x0000FFFF;
;;;972    			}
;;;973    			else
;;;974    			{
;;;975    				//remove all remaining section one place down
;;;976    				cnt = (CANAF_FullCAN_cnt + 1)>>1;
;;;977    				bound = total + CANAF_FullCAN_cnt * 3;
;;;978    				while(bound>cnt)
;;;979    				{
;;;980    					LPC_CANAF_RAM->mask[cnt-1] = LPC_CANAF_RAM->mask[cnt];
;;;981    					cnt++;
;;;982    				}
;;;983    				LPC_CANAF_RAM->mask[cnt-1]=0x00;
;;;984    				//update address values
;;;985    				LPC_CANAF->SFF_sa 	  -=0x04;
;;;986    				LPC_CANAF->SFF_GRP_sa -=0x04 ;
;;;987    				LPC_CANAF->EFF_sa     -=0x04 ;
;;;988    				LPC_CANAF->EFF_GRP_sa -=0x04;
;;;989    				LPC_CANAF->ENDofTable -=0x04;
;;;990    			}
;;;991    			CANAF_FullCAN_cnt--;
;;;992    
;;;993    			//delete its FullCAN Object in the FullCAN Object section
;;;994    			//remove all remaining FullCAN Object three place down
;;;995    			cnt = total + position * 3;
;;;996    			bound = (CANAF_FullCAN_cnt - position + 1) * 3;
;;;997    
;;;998    			while(bound)
;;;999    			{
;;;1000   				LPC_CANAF_RAM->mask[cnt]=LPC_CANAF_RAM->mask[cnt+3];;
;;;1001   				LPC_CANAF_RAM->mask[cnt+1]=LPC_CANAF_RAM->mask[cnt+4];
;;;1002   				LPC_CANAF_RAM->mask[cnt+2]=LPC_CANAF_RAM->mask[cnt+5];
;;;1003   				bound -=3;
;;;1004   				cnt   +=3;
;;;1005   			}
;;;1006   		}
;;;1007   	}
;;;1008   
;;;1009   /************** Remove Explicit Standard ID Entry *************/
;;;1010   	else if(EntryType == EXPLICIT_STANDARD_ENTRY)
;;;1011   	{
;;;1012   		if((CANAF_std_cnt==0)||(position >= CANAF_std_cnt))
;;;1013   		{
;;;1014   			return CAN_ENTRY_NOT_EXIT_ERROR;
;;;1015   		}
;;;1016   		else
;;;1017   		{
;;;1018   			cnt = ((CANAF_FullCAN_cnt+1)>>1)+ (position >> 1);
;;;1019   			buf0 = LPC_CANAF_RAM->mask[cnt];
;;;1020   			bound = (CANAF_std_cnt - position - 1)>>1;
;;;1021   			if((position & 0x0001) == 0) //event position
;;;1022   			{
;;;1023   				while(bound--)
;;;1024   				{
;;;1025   					//remove all remaining FullCAN entry one place down
;;;1026   					buf1  = LPC_CANAF_RAM->mask[cnt+1];
;;;1027   					LPC_CANAF_RAM->mask[cnt] = (buf1 >> 16) | (buf0 << 16);
;;;1028   					buf0  = buf1;
;;;1029   					cnt++;
;;;1030   				}
;;;1031   			}
;;;1032   			else //odd position
;;;1033   			{
;;;1034   				while(bound--)
;;;1035   				{
;;;1036   					//remove all remaining FullCAN entry one place down
;;;1037   					buf1  = LPC_CANAF_RAM->mask[cnt+1];
;;;1038   					LPC_CANAF_RAM->mask[cnt] = (buf0 & 0xFFFF0000)|(buf1 >> 16);
;;;1039   					LPC_CANAF_RAM->mask[cnt+1] = LPC_CANAF_RAM->mask[cnt+1] << 16;
;;;1040   					buf0  = buf1<<16;
;;;1041   					cnt++;
;;;1042   				}
;;;1043   			}
;;;1044   			if((CANAF_std_cnt & 0x0001) == 0)
;;;1045   			{
;;;1046   				if((position & 0x0001)==0)
;;;1047   					LPC_CANAF_RAM->mask[cnt] = (buf0 << 16) | (0x0000FFFF);
;;;1048   				else
;;;1049   					LPC_CANAF_RAM->mask[cnt] = buf0 | 0x0000FFFF;
;;;1050   			}
;;;1051   			else
;;;1052   			{
;;;1053   				//remove all remaining section one place down
;;;1054   				cnt = ((CANAF_FullCAN_cnt + 1)>>1) + ((CANAF_std_cnt + 1) >> 1);
;;;1055   				bound = total + CANAF_FullCAN_cnt * 3;
;;;1056   				while(bound>cnt)
;;;1057   				{
;;;1058   					LPC_CANAF_RAM->mask[cnt-1] = LPC_CANAF_RAM->mask[cnt];
;;;1059   					cnt++;
;;;1060   				}
;;;1061   				LPC_CANAF_RAM->mask[cnt-1]=0x00;
;;;1062   				//update address value
;;;1063   				LPC_CANAF->SFF_GRP_sa -=0x04 ;
;;;1064   				LPC_CANAF->EFF_sa     -=0x04 ;
;;;1065   				LPC_CANAF->EFF_GRP_sa -=0x04;
;;;1066   				LPC_CANAF->ENDofTable -=0x04;
;;;1067   			}
;;;1068   			CANAF_std_cnt--;
;;;1069   		}
;;;1070   	}
;;;1071   
;;;1072   /************** Remove Group of Standard ID Entry *************/
;;;1073   	else if(EntryType == GROUP_STANDARD_ENTRY)
;;;1074   	{
;;;1075   		if((CANAF_gstd_cnt==0)||(position >= CANAF_gstd_cnt))
;;;1076   		{
;;;1077   			return CAN_ENTRY_NOT_EXIT_ERROR;
;;;1078   		}
;;;1079   		else
;;;1080   		{
;;;1081   			cnt = ((CANAF_FullCAN_cnt + 1)>>1) + ((CANAF_std_cnt + 1) >> 1)+ position + 1;
;;;1082   			bound = total + CANAF_FullCAN_cnt * 3;
;;;1083   			while (cnt<bound)
;;;1084   			{
;;;1085   				LPC_CANAF_RAM->mask[cnt-1] = LPC_CANAF_RAM->mask[cnt];
;;;1086   				cnt++;
;;;1087   			}
;;;1088   			LPC_CANAF_RAM->mask[cnt-1]=0x00;
;;;1089   		}
;;;1090   		CANAF_gstd_cnt--;
;;;1091   		//update address value
;;;1092   		LPC_CANAF->EFF_sa     -=0x04;
;;;1093   		LPC_CANAF->EFF_GRP_sa -=0x04;
;;;1094   		LPC_CANAF->ENDofTable -=0x04;
;;;1095   	}
;;;1096   
;;;1097   /************** Remove Explicit Extended ID Entry *************/
;;;1098   	else if(EntryType == EXPLICIT_EXTEND_ENTRY)
;;;1099   	{
;;;1100   		if((CANAF_ext_cnt==0)||(position >= CANAF_ext_cnt))
;;;1101   		{
;;;1102   			return CAN_ENTRY_NOT_EXIT_ERROR;
;;;1103   		}
;;;1104   		else
;;;1105   		{
;;;1106   			cnt = ((CANAF_FullCAN_cnt + 1)>>1) + ((CANAF_std_cnt + 1) >> 1)+ CANAF_gstd_cnt + position + 1;
;;;1107   			bound = total + CANAF_FullCAN_cnt * 3;
;;;1108   			while (cnt<bound)
;;;1109   			{
;;;1110   				LPC_CANAF_RAM->mask[cnt-1] = LPC_CANAF_RAM->mask[cnt];
;;;1111   				cnt++;
;;;1112   			}
;;;1113   			LPC_CANAF_RAM->mask[cnt-1]=0x00;
;;;1114   		}
;;;1115   		CANAF_ext_cnt--;
;;;1116   		LPC_CANAF->EFF_GRP_sa -=0x04;
;;;1117   		LPC_CANAF->ENDofTable -=0x04;
;;;1118   	}
;;;1119   
;;;1120   /************** Remove Group of Extended ID Entry *************/
;;;1121   	else
;;;1122   	{
;;;1123   		if((CANAF_gext_cnt==0)||(position >= CANAF_gext_cnt))
;;;1124   		{
;;;1125   			return CAN_ENTRY_NOT_EXIT_ERROR;
;;;1126   		}
;;;1127   		else
;;;1128   		{
;;;1129   			cnt = total - (CANAF_gext_cnt<<1) + (position<<1);
;;;1130   			bound = total + CANAF_FullCAN_cnt * 3;
;;;1131   			while (cnt<bound)
;;;1132   			{
;;;1133   				//remove all remaining entry two place up
;;;1134   				LPC_CANAF_RAM->mask[cnt] = LPC_CANAF_RAM->mask[cnt+2];
;;;1135   				LPC_CANAF_RAM->mask[cnt+1] = LPC_CANAF_RAM->mask[cnt+3];
;;;1136   				cnt+=2;
;;;1137   			}
;;;1138   		}
;;;1139   		CANAF_gext_cnt--;
;;;1140   		LPC_CANAF->ENDofTable -=0x08;
;;;1141   	}
;;;1142   
;;;1143   	if(CANAF_FullCAN_cnt == 0) //not use FullCAN mode
;;;1144    	{
;;;1145    		LPC_CANAF->AFMR = 0x00;//not use FullCAN mode
;;;1146    	}
;;;1147    	else
;;;1148    	{
;;;1149    		LPC_CANAF->AFMR = 0x04;
;;;1150    	}
;;;1151   	return CAN_OK;
;;;1152   }
001026  e8bd81f0          POP      {r4-r8,pc}
                  |L1.4138|
00102a  1051              ASRS     r1,r2,#1              ;940
00102c  f8dfc0a4          LDR      r12,|L1.4308|
001030  f85c5021          LDR      r5,[r12,r1,LSL #2]    ;941
001034  4821              LDR      r0,|L1.4284|
001036  8800              LDRH     r0,[r0,#0]            ;942  ; CANAF_FullCAN_cnt
001038  1a80              SUBS     r0,r0,r2              ;942
00103a  1e40              SUBS     r0,r0,#1              ;942
00103c  f3c0034f          UBFX     r3,r0,#1,#16          ;942
001040  f0020001          AND      r0,r2,#1              ;943
001044  b9a8              CBNZ     r0,|L1.4210|
001046  e00d              B        |L1.4196|
                  |L1.4168|
001048  1c48              ADDS     r0,r1,#1              ;948
00104a  f8dfc088          LDR      r12,|L1.4308|
00104e  f85c4020          LDR      r4,[r12,r0,LSL #2]    ;948
001052  0c20              LSRS     r0,r4,#16             ;949
001054  ea404005          ORR      r0,r0,r5,LSL #16      ;949
001058  46e0              MOV      r8,r12                ;949
00105a  f8480021          STR      r0,[r8,r1,LSL #2]     ;949
00105e  4625              MOV      r5,r4                 ;950
001060  1c48              ADDS     r0,r1,#1              ;951
001062  b281              UXTH     r1,r0                 ;951
                  |L1.4196|
001064  1e18              SUBS     r0,r3,#0              ;945
001066  f1a30c01          SUB      r12,r3,#1             ;945
00106a  fa1ff38c          UXTH     r3,r12                ;945
00106e  d1eb              BNE      |L1.4168|
001070  e01c              B        |L1.4268|
                  |L1.4210|
001072  e015              B        |L1.4256|
                  |L1.4212|
001074  1c48              ADDS     r0,r1,#1              ;959
001076  f8dfc05c          LDR      r12,|L1.4308|
00107a  f85c4020          LDR      r4,[r12,r0,LSL #2]    ;959
00107e  0c28              LSRS     r0,r5,#16             ;960
001080  0400              LSLS     r0,r0,#16             ;960
001082  ea404014          ORR      r0,r0,r4,LSR #16      ;960
001086  46e0              MOV      r8,r12                ;960
001088  f8480021          STR      r0,[r8,r1,LSL #2]     ;960
00108c  1c48              ADDS     r0,r1,#1              ;961
00108e  f85c0020          LDR      r0,[r12,r0,LSL #2]    ;961
001092  ea4f4c00          LSL      r12,r0,#16            ;961
001096  1c48              ADDS     r0,r1,#1              ;961
001098  f848c020          STR      r12,[r8,r0,LSL #2]    ;961
00109c  0425              LSLS     r5,r4,#16             ;962
00109e  b281              UXTH     r1,r0                 ;963
                  |L1.4256|
0010a0  1e18              SUBS     r0,r3,#0              ;956
0010a2  f1a30c01          SUB      r12,r3,#1             ;956
0010a6  fa1ff38c          UXTH     r3,r12                ;956
0010aa  d1e3              BNE      |L1.4212|
                  |L1.4268|
0010ac  4803              LDR      r0,|L1.4284|
0010ae  7800              LDRB     r0,[r0,#0]            ;966  ; CANAF_FullCAN_cnt
0010b0  f0000001          AND      r0,r0,#1              ;966
0010b4  bb28              CBNZ     r0,|L1.4354|
0010b6  e00f              B        |L1.4312|
                  |L1.4280|
                          DCD      0x40044000
                  |L1.4284|
                          DCD      CANAF_FullCAN_cnt
                  |L1.4288|
                          DCD      CANAF_std_cnt
                  |L1.4292|
                          DCD      CANAF_gstd_cnt
                  |L1.4296|
                          DCD      CANAF_ext_cnt
                  |L1.4300|
                          DCD      CANAF_gext_cnt
                  |L1.4304|
                          DCD      0x4003c000
                  |L1.4308|
                          DCD      0x40038000
                  |L1.4312|
0010d8  f0020001          AND      r0,r2,#1              ;968
0010dc  b940              CBNZ     r0,|L1.4336|
0010de  f64f70ff          MOV      r0,#0xffff            ;969
0010e2  eb004005          ADD      r0,r0,r5,LSL #16      ;969
0010e6  f8df83fc          LDR      r8,|L1.5348|
0010ea  f8480021          STR      r0,[r8,r1,LSL #2]     ;969
0010ee  e042              B        |L1.4470|
                  |L1.4336|
0010f0  f64f70ff          MOV      r0,#0xffff            ;971
0010f4  4328              ORRS     r0,r0,r5              ;971
0010f6  f8df83ec          LDR      r8,|L1.5348|
0010fa  f8480021          STR      r0,[r8,r1,LSL #2]     ;971
0010fe  e03a              B        |L1.4470|
                  |L1.4352|
001100  e068              B        |L1.4564|
                  |L1.4354|
001102  48f9              LDR      r0,|L1.5352|
001104  8800              LDRH     r0,[r0,#0]            ;976  ; CANAF_FullCAN_cnt
001106  1c40              ADDS     r0,r0,#1              ;976
001108  1041              ASRS     r1,r0,#1              ;976
00110a  48f7              LDR      r0,|L1.5352|
00110c  8800              LDRH     r0,[r0,#0]            ;977  ; CANAF_FullCAN_cnt
00110e  eb000040          ADD      r0,r0,r0,LSL #1       ;977
001112  4430              ADD      r0,r0,r6              ;977
001114  b283              UXTH     r3,r0                 ;977
001116  e00a              B        |L1.4398|
                  |L1.4376|
001118  f8dfc3c8          LDR      r12,|L1.5348|
00111c  f85cc021          LDR      r12,[r12,r1,LSL #2]   ;980
001120  1e48              SUBS     r0,r1,#1              ;980
001122  f8df83c0          LDR      r8,|L1.5348|
001126  f848c020          STR      r12,[r8,r0,LSL #2]    ;980
00112a  1c48              ADDS     r0,r1,#1              ;981
00112c  b281              UXTH     r1,r0                 ;981
                  |L1.4398|
00112e  428b              CMP      r3,r1                 ;978
001130  dcf2              BGT      |L1.4376|
001132  f04f0c00          MOV      r12,#0                ;983
001136  1e48              SUBS     r0,r1,#1              ;983
001138  f8df83a8          LDR      r8,|L1.5348|
00113c  f848c020          STR      r12,[r8,r0,LSL #2]    ;983
001140  48ea              LDR      r0,|L1.5356|
001142  6840              LDR      r0,[r0,#4]            ;985
001144  1f00              SUBS     r0,r0,#4              ;985
001146  f8dfc3a4          LDR      r12,|L1.5356|
00114a  f8cc0004          STR      r0,[r12,#4]           ;985
00114e  4660              MOV      r0,r12                ;986
001150  6880              LDR      r0,[r0,#8]            ;986
001152  1f00              SUBS     r0,r0,#4              ;986
001154  f8cc0008          STR      r0,[r12,#8]           ;986
001158  4660              MOV      r0,r12                ;987
00115a  68c0              LDR      r0,[r0,#0xc]          ;987
00115c  1f00              SUBS     r0,r0,#4              ;987
00115e  f8cc000c          STR      r0,[r12,#0xc]         ;987
001162  4660              MOV      r0,r12                ;988
001164  6900              LDR      r0,[r0,#0x10]         ;988
001166  1f00              SUBS     r0,r0,#4              ;988
001168  f8cc0010          STR      r0,[r12,#0x10]        ;988
00116c  4660              MOV      r0,r12                ;989
00116e  6940              LDR      r0,[r0,#0x14]         ;989
001170  1f00              SUBS     r0,r0,#4              ;989
001172  f8cc0014          STR      r0,[r12,#0x14]        ;989
                  |L1.4470|
001176  48dc              LDR      r0,|L1.5352|
001178  8800              LDRH     r0,[r0,#0]            ;991  ; CANAF_FullCAN_cnt
00117a  1e40              SUBS     r0,r0,#1              ;991
00117c  f8dfc368          LDR      r12,|L1.5352|
001180  f8ac0000          STRH     r0,[r12,#0]           ;991
001184  eb020042          ADD      r0,r2,r2,LSL #1       ;995
001188  4430              ADD      r0,r0,r6              ;995
00118a  b281              UXTH     r1,r0                 ;995
00118c  4660              MOV      r0,r12                ;996
00118e  8800              LDRH     r0,[r0,#0]            ;996  ; CANAF_FullCAN_cnt
001190  1a80              SUBS     r0,r0,r2              ;996
001192  1c40              ADDS     r0,r0,#1              ;996
001194  eb000040          ADD      r0,r0,r0,LSL #1       ;996
001198  b283              UXTH     r3,r0                 ;996
00119a  e018              B        |L1.4558|
                  |L1.4508|
00119c  1cc8              ADDS     r0,r1,#3              ;1000
00119e  f8dfc344          LDR      r12,|L1.5348|
0011a2  f85c0020          LDR      r0,[r12,r0,LSL #2]    ;1000
0011a6  46e0              MOV      r8,r12                ;1000
0011a8  f8480021          STR      r0,[r8,r1,LSL #2]     ;1000
0011ac  1d08              ADDS     r0,r1,#4              ;1001
0011ae  f85cc020          LDR      r12,[r12,r0,LSL #2]   ;1001
0011b2  1c48              ADDS     r0,r1,#1              ;1001
0011b4  f848c020          STR      r12,[r8,r0,LSL #2]    ;1001
0011b8  1d48              ADDS     r0,r1,#5              ;1002
0011ba  46c4              MOV      r12,r8                ;1002
0011bc  f85cc020          LDR      r12,[r12,r0,LSL #2]   ;1002
0011c0  1c88              ADDS     r0,r1,#2              ;1002
0011c2  f848c020          STR      r12,[r8,r0,LSL #2]    ;1002
0011c6  1ed8              SUBS     r0,r3,#3              ;1003
0011c8  b283              UXTH     r3,r0                 ;1003
0011ca  1cc8              ADDS     r0,r1,#3              ;1004
0011cc  b281              UXTH     r1,r0                 ;1004
                  |L1.4558|
0011ce  2b00              CMP      r3,#0                 ;998
0011d0  d1e4              BNE      |L1.4508|
0011d2  e17e              B        |L1.5330|
                  |L1.4564|
0011d4  2f01              CMP      r7,#1                 ;1010
0011d6  d17a              BNE      |L1.4814|
0011d8  48c5              LDR      r0,|L1.5360|
0011da  8800              LDRH     r0,[r0,#0]            ;1012  ; CANAF_std_cnt
0011dc  b118              CBZ      r0,|L1.4582|
0011de  48c4              LDR      r0,|L1.5360|
0011e0  8800              LDRH     r0,[r0,#0]            ;1012  ; CANAF_std_cnt
0011e2  4282              CMP      r2,r0                 ;1012
0011e4  db01              BLT      |L1.4586|
                  |L1.4582|
0011e6  2007              MOVS     r0,#7                 ;1014
0011e8  e71d              B        |L1.4134|
                  |L1.4586|
0011ea  48bf              LDR      r0,|L1.5352|
0011ec  8800              LDRH     r0,[r0,#0]            ;1018  ; CANAF_FullCAN_cnt
0011ee  1c40              ADDS     r0,r0,#1              ;1018
0011f0  1040              ASRS     r0,r0,#1              ;1018
0011f2  eb000062          ADD      r0,r0,r2,ASR #1       ;1018
0011f6  b281              UXTH     r1,r0                 ;1018
0011f8  f8dfc2e8          LDR      r12,|L1.5348|
0011fc  f85c5021          LDR      r5,[r12,r1,LSL #2]    ;1019
001200  48bb              LDR      r0,|L1.5360|
001202  8800              LDRH     r0,[r0,#0]            ;1020  ; CANAF_std_cnt
001204  1a80              SUBS     r0,r0,r2              ;1020
001206  1e40              SUBS     r0,r0,#1              ;1020
001208  f3c0034f          UBFX     r3,r0,#1,#16          ;1020
00120c  f0020001          AND      r0,r2,#1              ;1021
001210  b9a8              CBNZ     r0,|L1.4670|
001212  e00d              B        |L1.4656|
                  |L1.4628|
001214  1c48              ADDS     r0,r1,#1              ;1026
001216  f8dfc2cc          LDR      r12,|L1.5348|
00121a  f85c4020          LDR      r4,[r12,r0,LSL #2]    ;1026
00121e  0c20              LSRS     r0,r4,#16             ;1027
001220  ea404005          ORR      r0,r0,r5,LSL #16      ;1027
001224  46e0              MOV      r8,r12                ;1027
001226  f8480021          STR      r0,[r8,r1,LSL #2]     ;1027
00122a  4625              MOV      r5,r4                 ;1028
00122c  1c48              ADDS     r0,r1,#1              ;1029
00122e  b281              UXTH     r1,r0                 ;1029
                  |L1.4656|
001230  1e18              SUBS     r0,r3,#0              ;1023
001232  f1a30c01          SUB      r12,r3,#1             ;1023
001236  fa1ff38c          UXTH     r3,r12                ;1023
00123a  d1eb              BNE      |L1.4628|
00123c  e01c              B        |L1.4728|
                  |L1.4670|
00123e  e015              B        |L1.4716|
                  |L1.4672|
001240  1c48              ADDS     r0,r1,#1              ;1037
001242  f8dfc2a0          LDR      r12,|L1.5348|
001246  f85c4020          LDR      r4,[r12,r0,LSL #2]    ;1037
00124a  0c28              LSRS     r0,r5,#16             ;1038
00124c  0400              LSLS     r0,r0,#16             ;1038
00124e  ea404014          ORR      r0,r0,r4,LSR #16      ;1038
001252  46e0              MOV      r8,r12                ;1038
001254  f8480021          STR      r0,[r8,r1,LSL #2]     ;1038
001258  1c48              ADDS     r0,r1,#1              ;1039
00125a  f85c0020          LDR      r0,[r12,r0,LSL #2]    ;1039
00125e  ea4f4c00          LSL      r12,r0,#16            ;1039
001262  1c48              ADDS     r0,r1,#1              ;1039
001264  f848c020          STR      r12,[r8,r0,LSL #2]    ;1039
001268  0425              LSLS     r5,r4,#16             ;1040
00126a  b281              UXTH     r1,r0                 ;1041
                  |L1.4716|
00126c  1e18              SUBS     r0,r3,#0              ;1034
00126e  f1a30c01          SUB      r12,r3,#1             ;1034
001272  fa1ff38c          UXTH     r3,r12                ;1034
001276  d1e3              BNE      |L1.4672|
                  |L1.4728|
001278  489d              LDR      r0,|L1.5360|
00127a  7800              LDRB     r0,[r0,#0]            ;1044  ; CANAF_std_cnt
00127c  f0000001          AND      r0,r0,#1              ;1044
001280  b998              CBNZ     r0,|L1.4778|
001282  f0020001          AND      r0,r2,#1              ;1046
001286  b940              CBNZ     r0,|L1.4762|
001288  f64f70ff          MOV      r0,#0xffff            ;1047
00128c  eb004005          ADD      r0,r0,r5,LSL #16      ;1047
001290  f8df8250          LDR      r8,|L1.5348|
001294  f8480021          STR      r0,[r8,r1,LSL #2]     ;1047
001298  e044              B        |L1.4900|
                  |L1.4762|
00129a  f64f70ff          MOV      r0,#0xffff            ;1049
00129e  4328              ORRS     r0,r0,r5              ;1049
0012a0  f8df8240          LDR      r8,|L1.5348|
0012a4  f8480021          STR      r0,[r8,r1,LSL #2]     ;1049
0012a8  e03c              B        |L1.4900|
                  |L1.4778|
0012aa  488f              LDR      r0,|L1.5352|
0012ac  8800              LDRH     r0,[r0,#0]            ;1054  ; CANAF_FullCAN_cnt
0012ae  1c40              ADDS     r0,r0,#1              ;1054
0012b0  ea4f0c60          ASR      r12,r0,#1             ;1054
0012b4  488e              LDR      r0,|L1.5360|
0012b6  8800              LDRH     r0,[r0,#0]            ;1054  ; CANAF_std_cnt
0012b8  1c40              ADDS     r0,r0,#1              ;1054
0012ba  eb0c0060          ADD      r0,r12,r0,ASR #1      ;1054
0012be  b281              UXTH     r1,r0                 ;1054
0012c0  4889              LDR      r0,|L1.5352|
0012c2  8800              LDRH     r0,[r0,#0]            ;1055  ; CANAF_FullCAN_cnt
0012c4  eb000040          ADD      r0,r0,r0,LSL #1       ;1055
0012c8  4430              ADD      r0,r0,r6              ;1055
0012ca  b283              UXTH     r3,r0                 ;1055
0012cc  e00b              B        |L1.4838|
                  |L1.4814|
0012ce  e031              B        |L1.4916|
                  |L1.4816|
0012d0  f8dfc210          LDR      r12,|L1.5348|
0012d4  f85cc021          LDR      r12,[r12,r1,LSL #2]   ;1058
0012d8  1e48              SUBS     r0,r1,#1              ;1058
0012da  f8df8208          LDR      r8,|L1.5348|
0012de  f848c020          STR      r12,[r8,r0,LSL #2]    ;1058
0012e2  1c48              ADDS     r0,r1,#1              ;1059
0012e4  b281              UXTH     r1,r0                 ;1059
                  |L1.4838|
0012e6  428b              CMP      r3,r1                 ;1056
0012e8  dcf2              BGT      |L1.4816|
0012ea  f04f0c00          MOV      r12,#0                ;1061
0012ee  1e48              SUBS     r0,r1,#1              ;1061
0012f0  f8df81f0          LDR      r8,|L1.5348|
0012f4  f848c020          STR      r12,[r8,r0,LSL #2]    ;1061
0012f8  487c              LDR      r0,|L1.5356|
0012fa  6880              LDR      r0,[r0,#8]            ;1063
0012fc  1f00              SUBS     r0,r0,#4              ;1063
0012fe  f8dfc1ec          LDR      r12,|L1.5356|
001302  f8cc0008          STR      r0,[r12,#8]           ;1063
001306  4660              MOV      r0,r12                ;1064
001308  68c0              LDR      r0,[r0,#0xc]          ;1064
00130a  1f00              SUBS     r0,r0,#4              ;1064
00130c  f8cc000c          STR      r0,[r12,#0xc]         ;1064
001310  4660              MOV      r0,r12                ;1065
001312  6900              LDR      r0,[r0,#0x10]         ;1065
001314  1f00              SUBS     r0,r0,#4              ;1065
001316  f8cc0010          STR      r0,[r12,#0x10]        ;1065
00131a  4660              MOV      r0,r12                ;1066
00131c  6940              LDR      r0,[r0,#0x14]         ;1066
00131e  1f00              SUBS     r0,r0,#4              ;1066
001320  f8cc0014          STR      r0,[r12,#0x14]        ;1066
                  |L1.4900|
001324  4872              LDR      r0,|L1.5360|
001326  8800              LDRH     r0,[r0,#0]            ;1068  ; CANAF_std_cnt
001328  1e40              SUBS     r0,r0,#1              ;1068
00132a  f8dfc1c4          LDR      r12,|L1.5360|
00132e  f8ac0000          STRH     r0,[r12,#0]           ;1068
001332  e0ce              B        |L1.5330|
                  |L1.4916|
001334  2f02              CMP      r7,#2                 ;1073
001336  d149              BNE      |L1.5068|
001338  486e              LDR      r0,|L1.5364|
00133a  8800              LDRH     r0,[r0,#0]            ;1075  ; CANAF_gstd_cnt
00133c  b118              CBZ      r0,|L1.4934|
00133e  486d              LDR      r0,|L1.5364|
001340  8800              LDRH     r0,[r0,#0]            ;1075  ; CANAF_gstd_cnt
001342  4282              CMP      r2,r0                 ;1075
001344  db01              BLT      |L1.4938|
                  |L1.4934|
001346  2007              MOVS     r0,#7                 ;1077
001348  e66d              B        |L1.4134|
                  |L1.4938|
00134a  4867              LDR      r0,|L1.5352|
00134c  8800              LDRH     r0,[r0,#0]            ;1081  ; CANAF_FullCAN_cnt
00134e  1c40              ADDS     r0,r0,#1              ;1081
001350  ea4f0c60          ASR      r12,r0,#1             ;1081
001354  4866              LDR      r0,|L1.5360|
001356  8800              LDRH     r0,[r0,#0]            ;1081  ; CANAF_std_cnt
001358  1c40              ADDS     r0,r0,#1              ;1081
00135a  eb0c0060          ADD      r0,r12,r0,ASR #1      ;1081
00135e  4410              ADD      r0,r0,r2              ;1081
001360  1c40              ADDS     r0,r0,#1              ;1081
001362  b281              UXTH     r1,r0                 ;1081
001364  4860              LDR      r0,|L1.5352|
001366  8800              LDRH     r0,[r0,#0]            ;1082  ; CANAF_FullCAN_cnt
001368  eb000040          ADD      r0,r0,r0,LSL #1       ;1082
00136c  4430              ADD      r0,r0,r6              ;1082
00136e  b283              UXTH     r3,r0                 ;1082
001370  e00a              B        |L1.5000|
                  |L1.4978|
001372  f8dfc170          LDR      r12,|L1.5348|
001376  f85cc021          LDR      r12,[r12,r1,LSL #2]   ;1085
00137a  1e48              SUBS     r0,r1,#1              ;1085
00137c  f8df8164          LDR      r8,|L1.5348|
001380  f848c020          STR      r12,[r8,r0,LSL #2]    ;1085
001384  1c48              ADDS     r0,r1,#1              ;1086
001386  b281              UXTH     r1,r0                 ;1086
                  |L1.5000|
001388  4299              CMP      r1,r3                 ;1083
00138a  dbf2              BLT      |L1.4978|
00138c  f04f0c00          MOV      r12,#0                ;1088
001390  1e48              SUBS     r0,r1,#1              ;1088
001392  f8df8150          LDR      r8,|L1.5348|
001396  f848c020          STR      r12,[r8,r0,LSL #2]    ;1088
00139a  4856              LDR      r0,|L1.5364|
00139c  8800              LDRH     r0,[r0,#0]            ;1090  ; CANAF_gstd_cnt
00139e  1e40              SUBS     r0,r0,#1              ;1090
0013a0  f8dfc150          LDR      r12,|L1.5364|
0013a4  f8ac0000          STRH     r0,[r12,#0]           ;1090
0013a8  4850              LDR      r0,|L1.5356|
0013aa  68c0              LDR      r0,[r0,#0xc]          ;1092
0013ac  1f00              SUBS     r0,r0,#4              ;1092
0013ae  f8dfc13c          LDR      r12,|L1.5356|
0013b2  f8cc000c          STR      r0,[r12,#0xc]         ;1092
0013b6  4660              MOV      r0,r12                ;1093
0013b8  6900              LDR      r0,[r0,#0x10]         ;1093
0013ba  1f00              SUBS     r0,r0,#4              ;1093
0013bc  f8cc0010          STR      r0,[r12,#0x10]        ;1093
0013c0  4660              MOV      r0,r12                ;1094
0013c2  6940              LDR      r0,[r0,#0x14]         ;1094
0013c4  1f00              SUBS     r0,r0,#4              ;1094
0013c6  f8cc0014          STR      r0,[r12,#0x14]        ;1094
0013ca  e082              B        |L1.5330|
                  |L1.5068|
0013cc  2f03              CMP      r7,#3                 ;1098
0013ce  d149              BNE      |L1.5220|
0013d0  4849              LDR      r0,|L1.5368|
0013d2  8800              LDRH     r0,[r0,#0]            ;1100  ; CANAF_ext_cnt
0013d4  b118              CBZ      r0,|L1.5086|
0013d6  4848              LDR      r0,|L1.5368|
0013d8  8800              LDRH     r0,[r0,#0]            ;1100  ; CANAF_ext_cnt
0013da  4282              CMP      r2,r0                 ;1100
0013dc  db01              BLT      |L1.5090|
                  |L1.5086|
0013de  2007              MOVS     r0,#7                 ;1102
0013e0  e621              B        |L1.4134|
                  |L1.5090|
0013e2  4841              LDR      r0,|L1.5352|
0013e4  8800              LDRH     r0,[r0,#0]            ;1106  ; CANAF_FullCAN_cnt
0013e6  1c40              ADDS     r0,r0,#1              ;1106
0013e8  ea4f0c60          ASR      r12,r0,#1             ;1106
0013ec  4840              LDR      r0,|L1.5360|
0013ee  8800              LDRH     r0,[r0,#0]            ;1106  ; CANAF_std_cnt
0013f0  1c40              ADDS     r0,r0,#1              ;1106
0013f2  eb0c0060          ADD      r0,r12,r0,ASR #1      ;1106
0013f6  f8dfc0fc          LDR      r12,|L1.5364|
0013fa  f8bcc000          LDRH     r12,[r12,#0]          ;1106  ; CANAF_gstd_cnt
0013fe  4460              ADD      r0,r0,r12             ;1106
001400  4410              ADD      r0,r0,r2              ;1106
001402  1c40              ADDS     r0,r0,#1              ;1106
001404  b281              UXTH     r1,r0                 ;1106
001406  4838              LDR      r0,|L1.5352|
001408  8800              LDRH     r0,[r0,#0]            ;1107  ; CANAF_FullCAN_cnt
00140a  eb000040          ADD      r0,r0,r0,LSL #1       ;1107
00140e  4430              ADD      r0,r0,r6              ;1107
001410  b283              UXTH     r3,r0                 ;1107
001412  e00a              B        |L1.5162|
                  |L1.5140|
001414  f8dfc0cc          LDR      r12,|L1.5348|
001418  f85cc021          LDR      r12,[r12,r1,LSL #2]   ;1110
00141c  1e48              SUBS     r0,r1,#1              ;1110
00141e  f8df80c4          LDR      r8,|L1.5348|
001422  f848c020          STR      r12,[r8,r0,LSL #2]    ;1110
001426  1c48              ADDS     r0,r1,#1              ;1111
001428  b281              UXTH     r1,r0                 ;1111
                  |L1.5162|
00142a  4299              CMP      r1,r3                 ;1108
00142c  dbf2              BLT      |L1.5140|
00142e  f04f0c00          MOV      r12,#0                ;1113
001432  1e48              SUBS     r0,r1,#1              ;1113
001434  f8df80ac          LDR      r8,|L1.5348|
001438  f848c020          STR      r12,[r8,r0,LSL #2]    ;1113
00143c  482e              LDR      r0,|L1.5368|
00143e  8800              LDRH     r0,[r0,#0]            ;1115  ; CANAF_ext_cnt
001440  1e40              SUBS     r0,r0,#1              ;1115
001442  f8dfc0b4          LDR      r12,|L1.5368|
001446  f8ac0000          STRH     r0,[r12,#0]           ;1115
00144a  4828              LDR      r0,|L1.5356|
00144c  6900              LDR      r0,[r0,#0x10]         ;1116
00144e  1f00              SUBS     r0,r0,#4              ;1116
001450  f8dfc098          LDR      r12,|L1.5356|
001454  f8cc0010          STR      r0,[r12,#0x10]        ;1116
001458  4660              MOV      r0,r12                ;1117
00145a  6940              LDR      r0,[r0,#0x14]         ;1117
00145c  1f00              SUBS     r0,r0,#4              ;1117
00145e  f8cc0014          STR      r0,[r12,#0x14]        ;1117
001462  e036              B        |L1.5330|
                  |L1.5220|
001464  4825              LDR      r0,|L1.5372|
001466  8800              LDRH     r0,[r0,#0]            ;1123  ; CANAF_gext_cnt
001468  b118              CBZ      r0,|L1.5234|
00146a  4824              LDR      r0,|L1.5372|
00146c  8800              LDRH     r0,[r0,#0]            ;1123  ; CANAF_gext_cnt
00146e  4282              CMP      r2,r0                 ;1123
001470  db01              BLT      |L1.5238|
                  |L1.5234|
001472  2007              MOVS     r0,#7                 ;1125
001474  e5d7              B        |L1.4134|
                  |L1.5238|
001476  4821              LDR      r0,|L1.5372|
001478  8800              LDRH     r0,[r0,#0]            ;1129  ; CANAF_gext_cnt
00147a  eba60040          SUB      r0,r6,r0,LSL #1       ;1129
00147e  eb000042          ADD      r0,r0,r2,LSL #1       ;1129
001482  b281              UXTH     r1,r0                 ;1129
001484  4818              LDR      r0,|L1.5352|
001486  8800              LDRH     r0,[r0,#0]            ;1130  ; CANAF_FullCAN_cnt
001488  eb000040          ADD      r0,r0,r0,LSL #1       ;1130
00148c  4430              ADD      r0,r0,r6              ;1130
00148e  b283              UXTH     r3,r0                 ;1130
001490  e00f              B        |L1.5298|
                  |L1.5266|
001492  1c88              ADDS     r0,r1,#2              ;1134
001494  f8dfc04c          LDR      r12,|L1.5348|
001498  f85c0020          LDR      r0,[r12,r0,LSL #2]    ;1134
00149c  46e0              MOV      r8,r12                ;1134
00149e  f8480021          STR      r0,[r8,r1,LSL #2]     ;1134
0014a2  1cc8              ADDS     r0,r1,#3              ;1135
0014a4  f85cc020          LDR      r12,[r12,r0,LSL #2]   ;1135
0014a8  1c48              ADDS     r0,r1,#1              ;1135
0014aa  f848c020          STR      r12,[r8,r0,LSL #2]    ;1135
0014ae  1c88              ADDS     r0,r1,#2              ;1136
0014b0  b281              UXTH     r1,r0                 ;1136
                  |L1.5298|
0014b2  4299              CMP      r1,r3                 ;1131
0014b4  dbed              BLT      |L1.5266|
0014b6  4811              LDR      r0,|L1.5372|
0014b8  8800              LDRH     r0,[r0,#0]            ;1139  ; CANAF_gext_cnt
0014ba  1e40              SUBS     r0,r0,#1              ;1139
0014bc  f8dfc03c          LDR      r12,|L1.5372|
0014c0  f8ac0000          STRH     r0,[r12,#0]           ;1139
0014c4  4809              LDR      r0,|L1.5356|
0014c6  6940              LDR      r0,[r0,#0x14]         ;1140
0014c8  3808              SUBS     r0,r0,#8              ;1140
0014ca  f8dfc020          LDR      r12,|L1.5356|
0014ce  f8cc0014          STR      r0,[r12,#0x14]        ;1140
                  |L1.5330|
0014d2  4805              LDR      r0,|L1.5352|
0014d4  8800              LDRH     r0,[r0,#0]            ;1143  ; CANAF_FullCAN_cnt
0014d6  b998              CBNZ     r0,|L1.5376|
0014d8  2000              MOVS     r0,#0                 ;1145
0014da  f8dfc010          LDR      r12,|L1.5356|
0014de  f8cc0000          STR      r0,[r12,#0]           ;1145
0014e2  e012              B        |L1.5386|
                  |L1.5348|
                          DCD      0x40038000
                  |L1.5352|
                          DCD      CANAF_FullCAN_cnt
                  |L1.5356|
                          DCD      0x4003c000
                  |L1.5360|
                          DCD      CANAF_std_cnt
                  |L1.5364|
                          DCD      CANAF_gstd_cnt
                  |L1.5368|
                          DCD      CANAF_ext_cnt
                  |L1.5372|
                          DCD      CANAF_gext_cnt
                  |L1.5376|
001500  2004              MOVS     r0,#4                 ;1149
001502  f8dfc00c          LDR      r12,|L1.5392|
001506  f8cc0000          STR      r0,[r12,#0]           ;1149
                  |L1.5386|
00150a  2001              MOVS     r0,#1                 ;1151
00150c  e58b              B        |L1.4134|
;;;1153   
                          ENDP

00150e  0000              DCW      0x0000
                  |L1.5392|
                          DCD      0x4003c000

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  AFTable
                          %        40
                  SFF_Table
                          %        32

                          AREA ||.data||, DATA, ALIGN=1

                  SFF_GPR_Table
                          %        8
                  CANAF_FullCAN_cnt
000008  0000              DCW      0x0000
                  CANAF_std_cnt
00000a  0000              DCW      0x0000
                  CANAF_gstd_cnt
00000c  0000              DCW      0x0000
                  CANAF_ext_cnt
00000e  0000              DCW      0x0000
                  CANAF_gext_cnt
000010  0000              DCW      0x0000
                  FULLCAN_ENABLE
000012  00                DCB      0x00
